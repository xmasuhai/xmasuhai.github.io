<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>【JS编程接口05】DOM事件与事件委托 - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="目录§ ⇧ 1. 点击事件 § 2. addEventListener § 3. target V.S. currentTarget § 4. 取消冒泡 § 5. 不可取消冒泡的事件 § 6. 阻止滚动 § 7. 自定义事件 § 8. 事件委托（事件代理） § 9. 封装事件委托 § 10. $3" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.59.1" />


<link rel="canonical" href="http://xmasuhai.xyz/post/api/dom/js%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A305dom%E4%BA%8B%E4%BB%B6%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="【JS编程接口05】DOM事件与事件委托" />
<meta property="og:description" content="目录§ ⇧ 1. 点击事件 § 2. addEventListener § 3. target V.S. currentTarget § 4. 取消冒泡 § 5. 不可取消冒泡的事件 § 6. 阻止滚动 § 7. 自定义事件 § 8. 事件委托（事件代理） § 9. 封装事件委托 § 10. $3" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/api/dom/js%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A305dom%E4%BA%8B%E4%BB%B6%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98/" />
<meta property="article:published_time" content="2020-06-07T20:28:40+08:00" />
<meta property="article:modified_time" content="2020-06-07T20:39:42+08:00" />
<meta itemprop="name" content="【JS编程接口05】DOM事件与事件委托">
<meta itemprop="description" content="目录§ ⇧ 1. 点击事件 § 2. addEventListener § 3. target V.S. currentTarget § 4. 取消冒泡 § 5. 不可取消冒泡的事件 § 6. 阻止滚动 § 7. 自定义事件 § 8. 事件委托（事件代理） § 9. 封装事件委托 § 10. $3">


<meta itemprop="datePublished" content="2020-06-07T20:28:40&#43;08:00" />
<meta itemprop="dateModified" content="2020-06-07T20:39:42&#43;08:00" />
<meta itemprop="wordCount" content="4637">



<meta itemprop="keywords" content="DOM,JavaScript,API," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【JS编程接口05】DOM事件与事件委托"/>
<meta name="twitter:description" content="目录§ ⇧ 1. 点击事件 § 2. addEventListener § 3. target V.S. currentTarget § 4. 取消冒泡 § 5. 不可取消冒泡的事件 § 6. 阻止滚动 § 7. 自定义事件 § 8. 事件委托（事件代理） § 9. 封装事件委托 § 10. $3"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          <div class="mobile-menu-parent">
            <span class="mobile-submenu-open"></span>
            <a href="http://xmasuhai.xyz/">
              docs
            </a>
          </div>
          <ul class="mobile-submenu-list">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          <a class="menu-item-link menu-parent" href="http://xmasuhai.xyz/">docs</a>
          <ul class="submenu">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">【JS编程接口05】DOM事件与事件委托</h1>
      
      <div class="post-meta">
        <time datetime="2020-06-07" class="post-time">
          2020-06-07
        </time>
        <div class="post-category">
            <a href="http://xmasuhai.xyz/categories/dom/"> DOM </a>
            <a href="http://xmasuhai.xyz/categories/javascript/"> JavaScript </a>
            <a href="http://xmasuhai.xyz/categories/api/"> API </a>
            
          </div>
        <span class="more-meta"> 约 4637 字 </span>
          <span class="more-meta"> 预计阅读 10 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#目录-a-id-catalogue-href-catalogue-a-a-href-catalogue-a">目录<a id="catalogue" href="#catalogue" > § </a><a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#1-点击事件-a-id-点击事件-href-点击事件-a-a-href-catalogue-a">1. 点击事件 <a id="点击事件" href="#点击事件"> § </a> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#2-addeventlistener-a-id-addeventlistener-href-addeventlistener-a-a-href-catalogue-a">2.<code>addEventListener</code><a id="addEventListener" href="#addEventListener"> § </a> <a href="#catalogue"> ⇧ </a></a>
<ul>
<li><a href="#2-1-事件绑定api">2.1 事件绑定API</a></li>
<li><a href="#6-2-小结二">6.2 小结二</a></li>
</ul></li>
<li><a href="#7-自定义事件-a-id-自定义事件-href-自定义事件-a-a-href-catalogue-a">7. 自定义事件 <a id="自定义事件" href="#自定义事件"> § </a> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#8-事件委托-事件代理-a-id-事件委托-href-事件委托-a-a-href-catalogue-a">8. 事件委托（事件代理） <a id="事件委托" href="#事件委托"> § </a> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#9-封装事件委托-a-id-封装事件委托-href-封装事件委托-a-a-href-catalogue-a">9. 封装事件委托 <a id="封装事件委托" href="#封装事件委托"> § </a> <a href="#catalogue"> ⇧ </a></a>
<ul>
<li><a href="#参考文章">参考文章</a></li>
<li><a href="#相关文章">相关文章</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h2 id="目录-a-id-catalogue-href-catalogue-a-a-href-catalogue-a">目录<a id="catalogue" href="#catalogue" > § </a><a href="#catalogue"> ⇧ </a></h2>

<ul>
<li><a id="_$1_" href="#点击事件">1. 点击事件 § </a></li>
<li><a id="_$2_" href="#addEventListener">2. <code>addEventListener</code> § </a></li>
<li><a id="_$3_" href="#targetVScurrentTarget">3. <code>target</code> V.S. <code>currentTarget</code> § </a></li>
<li><a id="_$4_" href="#取消冒泡">4. 取消冒泡 § </a></li>
<li><a id="_$5_" href="#不可取消冒泡的事件">5. 不可取消冒泡的事件 § </a></li>
<li><a id="_$6_" href="#阻止滚动">6. 阻止滚动 § </a></li>
<li><a id="_$7_" href="#自定义事件">7. 自定义事件 § </a></li>
<li><a id="_$8_" href="#事件委托">8. 事件委托（事件代理） § </a></li>
<li><a id="_$9_" href="#封装事件委托">9. 封装事件委托 § </a></li>
<li><a id="_$10_" href="#_$2_">10. $3 § </a></li>
<li><a id="_$11_" href="#_$2_">11. $3 § </a></li>
</ul>

<hr />

<h2 id="1-点击事件-a-id-点击事件-href-点击事件-a-a-href-catalogue-a">1. 点击事件 <a id="点击事件" href="#点击事件"> § </a> <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>有三个div，.爷爷&gt;.爸爸&gt;.儿子</p>
</blockquote>

<ul>
<li><p>给三个div分别添加事件监听，<code>fnYe/fnBa/fnEr</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;爷爷&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;爸爸&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;儿子&#34;</span><span class="p">&gt;</span>
    文字
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>点击文字，同时算点击了儿子、爸爸、爷爷</p></li>

<li><p>点击文字，事件的调用顺序</p></li>

<li><p>W3C制定浏览器标准需同时支持两种调用顺序</p></li>

<li><p>首先按爷爷-&gt;爸爸-&gt;儿子顺序查找函数监听，从外向内，找监听函数，叫事件捕获</p></li>

<li><p>然后按儿子-&gt;爸爸-&gt;爷爷顺序查找函数监听，从内向外，找监听函数，叫事件冒泡</p></li>

<li><p>有监听函数就调用，并提供事件信息，没有就跳过</p></li>

<li><p>可选择间监听的函数放在捕获阶段还是冒泡阶段调用</p></li>
</ul>

<hr />

<h2 id="2-addeventlistener-a-id-addeventlistener-href-addeventlistener-a-a-href-catalogue-a">2.<code>addEventListener</code><a id="addEventListener" href="#addEventListener"> § </a> <a href="#catalogue"> ⇧ </a></h2>

<h3 id="2-1-事件绑定api">2.1 事件绑定API</h3>

<ul>
<li><code>element.addEventListener('click', fn, boolean)</code> 冒泡</li>
</ul>

<blockquote>
<p>如果bool不传或为<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy">falsy</a></p>
</blockquote>

<ul>
<li>就让fn走冒泡，即当浏览器在冒泡阶段发现节点有fn监听函数，就会调用fn，并提供事件信息</li>
<li>即监听函数默认走冒泡</li>
</ul>

<blockquote>
<p>如果bool为true</p>
</blockquote>

<ul>
<li>就让fn走捕获， 即当浏览器在捕获阶段发现节点有fn监听函数，就会调用fn，并提供信息</li>
</ul>

<blockquote>
<p>你可以选择吧fn放在哪边</p>
</blockquote>

<ul>
<li>如果bool为true，fn就放在左边，右边空跑</li>
<li>如果bool为空或falsy，fn就放在右边，左边空跑</li>
</ul>

<p>代码示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv1 x&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv2 x&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv3 x&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv4 x&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv5 x&#34;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv6 x&#34;</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;lv7 x&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-CSS" data-lang="CSS"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-CSS" data-lang="CSS"><span class="o">*</span> <span class="p">{</span>
  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
<span class="p">}</span>


<span class="nt">div</span><span class="o">[</span><span class="nt">class</span><span class="o">^=</span><span class="s2">&#34;lv&#34;</span><span class="o">]</span><span class="p">:</span><span class="nd">not</span><span class="o">([</span><span class="nt">class</span><span class="o">=</span><span class="s2">&#34;.lv7&#34;</span><span class="o">])</span> <span class="p">{</span>
  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="o">-</span><span class="kc">flex</span><span class="p">;</span>
  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv1</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">purple</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv2</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv3</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">cyan</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv4</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">green</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv5</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">yellow</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv6</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">orange</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">lv7</span> <span class="p">{</span>
  <span class="k">width</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span>
  <span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="o">-</span><span class="kc">flex</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">x</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="kc">transparent</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
<span class="kr">const</span> <span class="p">[</span><span class="nx">lv1</span><span class="p">,</span> <span class="nx">lv2</span><span class="p">,</span> <span class="nx">lv3</span><span class="p">,</span> <span class="nx">lv4</span><span class="p">,</span> <span class="nx">lv5</span><span class="p">,</span> <span class="nx">lv6</span><span class="p">,</span> <span class="nx">lv7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv1&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv2&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv3&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv4&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv5&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv6&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv7&#39;</span><span class="p">)]</span>
<span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lv1</span><span class="p">)</span>
<span class="nx">lv1</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">n</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>事件结束后，e 还在？</p>
</blockquote>

<ul>
<li>答案并不是「在」，也不是「不在」</li>
<li>e 只是没了 <code>currentTarget: null</code> ，其他属性都还「健在」</li>
<li>动作结束，事件结束，e 会被浏览器悄悄改变</li>
<li>不推荐在事件结束后访问 e</li>

<li><p>把属性复制到自己的变量里再使用，比如<code>const tempEvent = e.currentTarget</code> 就是把 currentTarget 的引用复制到 tempEvent</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
<span class="kr">const</span> <span class="p">[</span><span class="nx">lv1</span><span class="p">,</span> <span class="nx">lv2</span><span class="p">,</span> <span class="nx">lv3</span><span class="p">,</span> <span class="nx">lv4</span><span class="p">,</span> <span class="nx">lv5</span><span class="p">,</span> <span class="nx">lv6</span><span class="p">,</span> <span class="nx">lv7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv1&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv2&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv3&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv4&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv5&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv6&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv7&#39;</span><span class="p">)]</span>
<span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lv1</span><span class="p">)</span>
<span class="nx">lv1</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">tempEvent</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">tempEvent</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">n</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="nx">n</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>循环监听事件</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">$</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">lvn</span> <span class="o">=</span> <span class="p">[</span><span class="nx">lv1</span><span class="p">,</span> <span class="nx">lv2</span><span class="p">,</span> <span class="nx">lv3</span><span class="p">,</span> <span class="nx">lv4</span><span class="p">,</span> <span class="nx">lv5</span><span class="p">,</span> <span class="nx">lv6</span><span class="p">,</span> <span class="nx">lv7</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv1&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv2&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv3&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv4&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv5&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv6&#39;</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.lv7&#39;</span><span class="p">)]</span>

<span class="kr">const</span> <span class="nx">removeX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">tempEvent</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">tempEvent</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">n</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
  <span class="nx">n</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">addX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">tempEvent</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">tempEvent</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">n</span> <span class="o">*</span> <span class="mi">150</span><span class="p">)</span>
  <span class="nx">n</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lvn</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">lvnEle</span> <span class="o">=</span> <span class="nx">lvn</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="nx">lvnEle</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">removeX</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
  <span class="nx">lvnEle</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">addX</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
  <span class="c1">// console.log(n, i)
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><a href="https://codepen.io/xmasuhai/pen/vYOMYxY">事件捕获和冒泡效果链接</a></p>
</blockquote>

<p><html>
    <p class="codepen" data-height="265" data-theme-id="light" data-default-tab="html,result" data-user="xmasuhai" data-slug-hash="vYOMYxY" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="event">
      <span>See the Pen <a href="https://codepen.io/xmasuhai/pen/vYOMYxY">
</html></p>

<hr />

<iframe height="265" style="width: 100%;" scrolling="no" title="event" src="https://codepen.io/xmasuhai/embed/vYOMYxY?height=265&theme-id=light&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/xmasuhai/pen/vYOMYxY'>event</a> by Joel Xu

---

<div class="codepen" data-height="265" data-theme-id="light" data-default-tab="html,result" data-user="xmasuhai" data-slug-hash="vYOMYxY" data-prefill='{"title":"event","tags":[],"scripts":[],"stylesheets":[]}'>
  <pre data-lang="html">&lt;!DOCTYPE html>
&lt;html lang="zh-Hans">
</div>

---

### 2.2 小结

> 注意点

- 子节点被点击了，也算点击父节点
- 先调用父节点的函数还是先调用儿子的函数

> 捕获与冒泡

- **捕获**先调用父节点的监听函数
- **冒泡**先调用子节点的监听函数

> W3C 事件模型

- 先捕获（先爸爸->儿子），再冒泡（先儿子->爸爸）
- 冒泡可以被阻止，而捕获不可被阻止
- 注意 e 对象被传给所有监听函数
- 事件结束后，e 对象就不存在了

## 3.`target` V.S. `currentTarget` <a id="targetVScurrentTarget" href="#targetVScurrentTarget"> § </a> <a href="#catalogue"> ⇧ </a>

> 区别

- `e.target`用户操作的元素
- `e.currentTarget`程序员监听的函数
- `this`是`e.currentTarget`，不推荐使用，易混淆

```JavaScript
// <div id="target">target</div>
console.log(target.onclick) // null
// 简单赋值 改写 （箭头函数不支持内部 this）
target.onclick = function(e){
    console.log('hi')
    console.log(this)
    console.log(e) // 包含了点击事件的所有信息
}

// target.onclick.call(target, event)
// this <- target
// event <- e
// this 是浏览器在用户点击时，用 .call() 按顺序传进来的
```

> 举例

- div > span{文字}，用户点击文字
- `e.target`就是span
- `e.currentTarget`就是div

> 特例：同一个节点上的监听事件

- 背景
  - 只有一个div被监听（不考虑父子同时被监听），同级
  - fn分别在捕获阶段和冒泡阶段监听click事件
  - 用户点击的元素就是开发者监听的
  - `e.target === e.currentTarget`
- 代码
  - `div.addEventListener('click', f1)`
  - `div.addEventListener('click',f2, true)`
  - 问，f1 先执行还是 f2 先执行
  - 如果把位置调换后，哪个先执行
  - 哪个先监听就哪个先执行

## 4. 取消冒泡 <a id="取消冒泡" href="#取消冒泡"> § </a> <a href="#catalogue"> ⇧ </a>

> 捕获不可取消，但冒泡可以

- `e.stopPropagation()`可以中断冒泡，浏览器不再向上传递
- 一般用于封装某些独立的组件

## 5. 不可取消冒泡的事件 <a id="不可取消冒泡的事件" href="#不可取消冒泡的事件"> § </a> <a href="#catalogue"> ⇧ </a>

- MDN 英文版搜 `scroll event`，看到`Bubbles`和`Cancelable`
- `Bubbles`是该事件是否会冒泡
- `Cancelable`是开发者是否可以取消冒泡

---

## 6. 阻止滚动 <a id="阻止滚动" href="#阻止滚动"> § </a> <a href="#catalogue"> ⇧ </a>

### 6.1 阻止页面滚动的步骤

> `scoll`事件不可取消冒泡和默认事件

- 阻止`scoll`默认事件无效，因先有滚轮滚动才有滚动事件
- 要阻止滚动，可阻止`wheel`和`touchstart`的默认动作

```JavaScript
x.addEventListener('wheel', (e) => {
  e.preventDefault()
});

x.addEventListener('touchstart', (e) => {
  e.preventDefault()
});
```

- 注意需要找准滚动所在的元素，能覆盖整个滚动区域的元素，[示例代码](https://codepen.io/xmasuhai/pen/wvMapyz?__cf_chl_jschl_tk__=c9cea17adb70fc1618b1fea2ca707a5e55bb1bd3-1591492706-0-AQZom389fFDtqqlFLs8Jma1_TsNa_af1YJkydJg8Sq8Nh7UVUTYAodQOncNBxwTLGwkH3yVa9PV_0_rWSjR8OpQM7i_nv7dOb9bqerLtg47rKulOqHnC-JiIXyuNLPzUdVdB3USqFAHmbPEFEM384UZ3MJ3uXGBeV5Dne-oHZkeFT4V8dGEBPfSw_cl328AcR8g6iP-Cuj6yBCqO-RQQpbtWCJtViudXLeCVeSqAYY0thgtb6CIz88KIEoDr1EvYe4RcavShW-ZKzCF2BfAUCDeLhpkKJdlduboXgx2TiAME0Q7WsMD8CZ0kflgm56f6_2EBB62BTLo6R9qa4BAcw9Q)
- 但是滚动条依然开可以用鼠标拖动，可以用CSS让滚动条 `width: 0`

```CSS
::-webkit-scrollbar {
  width: 0 !important;
}
```

> `CSS`实现隐藏滚动条

- 滚动条是在 `Document`上的
- 使用`overflow:hidden`可以直接取消滚动条
- 但此时 JS 依然可以修改`scrollTop`

> 在有`iframe`的场景下可能失效

---

<iframe height="265" style="width: 100%;" scrolling="no" title="prevent scroll" src="https://codepen.io/xmasuhai/embed/preview/wvMapyz?height=265&theme-id=dark&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/xmasuhai/pen/wvMapyz'>prevent scroll</a> by Joel Xu
  (<a href='https://codepen.io/xmasuhai'>@xmasuhai</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

<hr />

<p><p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="html,result" data-user="xmasuhai" data-slug-hash="wvMapyz" data-preview="true" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="prevent scroll">
  <span>See the Pen <a href="https://codepen.io/xmasuhai/pen/wvMapyz">
  prevent scroll</a> by Joel Xu (<a href="https://codepen.io/xmasuhai">@xmasuhai</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script></p>

<hr />

<h3 id="6-2-小结二">6.2 小结二</h3>

<blockquote>
<p><code>target</code>和<code>currentTarget</code></p>
</blockquote>

<ul>
<li>一个是用户点击的，一个是开发者监听的</li>
</ul>

<blockquote>
<p>取消冒泡</p>
</blockquote>

<ul>
<li><code>e.stopPropagation()</code></li>
</ul>

<blockquote>
<p>事件的特性</p>
</blockquote>

<ul>
<li><code>Bubbles</code></li>
<li><code>Cancelable</code></li>
<li><code>scoll</code> 的<code>Cancelable</code>是<code>false</code></li>
</ul>

<blockquote>
<p>如何禁用滚动</p>
</blockquote>

<ul>
<li>取消特定元素的<code>wheel</code>和<code>touchstart</code>的默认动作</li>
</ul>

<hr />

<h2 id="7-自定义事件-a-id-自定义事件-href-自定义事件-a-a-href-catalogue-a">7. 自定义事件 <a id="自定义事件" href="#自定义事件"> § </a> <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>浏览器自带事件</p>
</blockquote>

<ul>
<li>一共100多种事件，详见<a href="https://developer.mozilla.org/zh-CN/docs/Web/Events">MDN 事件参考</a></li>
</ul>

<blockquote>
<p>自定义事件</p>
</blockquote>

<ul>
<li><code>const userEvent = new CustomEvent(&quot;newName&quot;, {detail:{}, bubbles, cancelable})</code></li>
<li><code>userElement.dispatchEvent(event)</code></li>
<li><code>userElement.addEventListener(event)</code></li>
<li><a href="https://codepen.io/pen/?editors=1111">示例代码</a></li>
</ul>

<hr />

<iframe height="265" style="width: 100%;" scrolling="no" title="userEvent" src="https://codepen.io/xmasuhai/embed/PoZqEyz?height=265&theme-id=dark&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/xmasuhai/pen/PoZqEyz'>userEvent</a> by Joel Xu
  (<a href='https://codepen.io/xmasuhai'>@xmasuhai</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

<hr />

<p><p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="xmasuhai" data-slug-hash="PoZqEyz" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="userEvent">
  <span>See the Pen <a href="https://codepen.io/xmasuhai/pen/PoZqEyz">
  userEvent</a> by Joel Xu (<a href="https://codepen.io/xmasuhai">@xmasuhai</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script></p>

<hr />

<h2 id="8-事件委托-事件代理-a-id-事件委托-href-事件委托-a-a-href-catalogue-a">8. 事件委托（事件代理） <a id="事件委托" href="#事件委托"> § </a> <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>让父/祖元素监听原本在子元素上的监听事件；将子元素监听事件委托父/祖元素监听</li>
</ul>

<blockquote>
<p>场景一</p>
</blockquote>

<ul>
<li>要给100个按钮添加点击事件，不需要添加100个监听器</li>
<li>监听这100元素的祖先元素，等冒泡的时候判断是否传递到当前元素</li>
<li>即判断用户操作的<code>target</code>是否是这100个按钮中的一个</li>
</ul>

<blockquote>
<p>场景二</p>
</blockquote>

<ul>
<li>要监听目前不存在的元素的点击事件</li>
<li>监听祖先元素，等点击的时候看是否是想要监听的元素</li>
</ul>

<blockquote>
<p>事件委托的优点</p>
</blockquote>

<ul>
<li>节省监听数（内存）</li>
<li>可以监听动态元素</li>
</ul>

<blockquote>
<p><a href="https://codepen.io/xmasuhai/pen/RwrPQNa?editors=1111">示例代码链接</a></p>
</blockquote>

<hr />

<iframe height="265" style="width: 100%;" scrolling="no" title="Event Delegation" src="https://codepen.io/xmasuhai/embed/RwrPQNa?height=265&theme-id=dark&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/xmasuhai/pen/RwrPQNa'>Event Delegation</a> by Joel Xu
  (<a href='https://codepen.io/xmasuhai'>@xmasuhai</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

<hr />

<p><p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="xmasuhai" data-slug-hash="RwrPQNa" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Event Delegation">
  <span>See the Pen <a href="https://codepen.io/xmasuhai/pen/RwrPQNa">
  Event Delegation</a> by Joel Xu (<a href="https://codepen.io/xmasuhai">@xmasuhai</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script></p>

<hr />

<h2 id="9-封装事件委托-a-id-封装事件委托-href-封装事件委托-a-a-href-catalogue-a">9. 封装事件委托 <a id="封装事件委托" href="#封装事件委托"> § </a> <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>要求</p>
</blockquote>

<ul>
<li>写出这样一个函数<code>on('click', '#testDiv', 'li', fn)</code></li>
<li>当用户点击<code>#testDiv</code>里的<code>li</code>元素时，调用fn函数</li>
<li>事件委托</li>
</ul>

<blockquote>
<p>方案一</p>
</blockquote>

<ul>
<li><p>判断<code>target</code>是否匹配<code>li</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="cm">/*
</span><span class="cm">&lt;div id=&#34;div1&#34;&gt;
</span><span class="cm">&lt;span&gt;span1&lt;/span&gt;
</span><span class="cm">&lt;/div&gt;
</span><span class="cm">&lt;script src=&#34;EventDelegation.js&#34;&gt;&lt;/script&gt;
</span><span class="cm">*/</span>

<span class="cm">/* // 未封装
</span><span class="cm">div1.addEventListener(&#39;click&#39;, (e) =&gt; {
</span><span class="cm">const tempButton = e.target // by user
</span><span class="cm">if (tempButton.tagName.toLowerCase() === &#34;button&#34;) {
</span><span class="cm">console.log(&#39;button被点击了&#39;)
</span><span class="cm">console.log(&#39;button内容是&#39; + tempButton.textContent)
</span><span class="cm">console.log(&#39;button id是&#39; + tempButton.dataset.id)
</span><span class="cm">}
</span><span class="cm">});
</span><span class="cm">*/</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">&#39;click &#39;</span> <span class="o">+</span> <span class="nx">i</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;data-id&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
<span class="nx">div1</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span>
<span class="p">},</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="s1">&#39;#div1&#39;</span><span class="p">,</span> <span class="s1">&#39;button&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">tempElement</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="c1">// by user
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;button被点击了&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;button内容是&#39;</span> <span class="o">+</span> <span class="nx">tempElement</span><span class="p">.</span><span class="nx">textContent</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;button id是&#39;</span> <span class="o">+</span> <span class="nx">tempElement</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
<span class="p">})</span>

<span class="kd">function</span> <span class="nx">on</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">))</span> <span class="p">{</span>
<span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">tempElement</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="c1">// by user
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">tempElement</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">fn</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">})</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>

<li><p>这个答案有缺陷</p></li>

<li><p>如果将操作的元素内部再放一层子元素，比如包裹 <code>span</code> 元素</p></li>

<li><p>操作的元素变为<code>span</code> 元素</p></li>

<li><p>点击的时候，<code>tempElement</code>是<code>span</code>，而<code>selector</code>是<code>button</code>，不匹配，就不执行<code>fn</code></p></li>
</ul>

<blockquote>
<p>方案二</p>
</blockquote>

<ul>
<li><p><a href="https://github.com/FrankFang/wheels/blob/master/lib/dom/index.js#L2">递归判断</a><code>target/target的父元素/target的祖元素</code>是否匹配<code>li</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">function</span> <span class="nx">on</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">element</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">))</span> <span class="p">{</span>
<span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="kd">let</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span>
<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">selector</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// 范围是 element 之内的元素
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">===</span> <span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">el</span> <span class="o">=</span> <span class="kc">null</span>
    <span class="k">break</span>
  <span class="p">}</span>
  <span class="nx">el</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span>
<span class="p">}</span>
<span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span>
<span class="p">})</span>
<span class="k">return</span> <span class="nx">element</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p><code>jQuery</code>的实现</p>
</blockquote>

<ul>
<li><code>$('#xxx').on('click', 'li', fn)</code></li>
</ul>

<hr />

<blockquote>
<p>JS 支持事件吗</p>
</blockquote>

<ul>
<li>DOM 事件不属于JS的功能，而是浏览器提供的 DOM 功能</li>
<li>JS 只是调用了 DOM 提供的<code>addEventListener</code>这个API</li>
<li>所以 JS 不支持，提供事件机制的时浏览器</li>
</ul>

<blockquote>
<p>追问：手写JS事件系统</p>
</blockquote>

<ul>
<li><a href="https://static.xiedaimala.com/xdml/file/3ac7c224-c23d-491f-84b5-4fabfbeab9b8/2019-8-21-10-39-21.pdf">手写 EventHub PDF</a></li>
<li><a href="https://github.com/FrankFang/source-eventhub">源码</a></li>
</ul>

<hr />

<p>面试题：请简述 DOM 事件模型或 DOM 事件机制（你可以写一篇博客来回答这个问题）</p>

<p>提示：请描述什么是捕获什么是冒泡，并说说是先捕获还是先冒泡，再搜搜看网上的文章怎么说</p>

<ul>
<li>浏览器的事件模型，就是通过监听函数（listener） 事件发生后，浏览器监听到了这个事件，就会执行对应的监听函数</li>
<li>DOM 事件机制 事件发生会分成三个阶段 捕获 目标 冒泡阶段，在各层元素之间传播，使得同一个事件会在多个节点上触发</li>
<li>事件捕获是从window（-&gt; Document -&gt; html -&gt; &hellip;）开始由外向内查找监听函数</li>
<li>事件冒泡是从当前操作的节点（目标节点）开始由内向外直至 window 查找监听函数</li>
<li>按照先捕获，后冒泡的顺序执行</li>
</ul>

<blockquote>
<p>捕获：当用户点击按钮，浏览器会从 window 从上向下遍历至用户点击的按钮，逐个触发事件处理函数。</p>

<p>冒泡：浏览器从用户点击的按钮从下往上遍历至 window，逐个触发事件处理函数。</p>

<p>W3C 事件模型/事件机制：对每个事件先捕获再冒泡</p>
</blockquote>

<p>面试题：请简述事件委托（可写博客回答）</p>

<p>提示：请想办法把「监听祖先元素」说得高大上一点</p>

<ul>
<li>事件委托就是把一个元素响应事件（click、keydown&hellip;&hellip;）的函数委托到另一个元素</li>
<li>一般是把元素的事件委托到它的父层或者更外层元素上，真正绑定事件的是外层元素</li>
<li>当事件响应到需要绑定的元素上时，会通过事件冒泡机制从而触发它的外层元素的绑定事件</li>
<li>然后在外层元素上去执行函数，即便一开始当前元素不存在于页面中，也能实现事件委托</li>
<li>以达到减少内存消耗和动态绑定事件的目的</li>
</ul>

<blockquote>
<p>事件委托就是把事件监听放在祖先元素（如父元素、爷爷元素）上。</p>

<p>好处是：1 节约监听数量 2 可以监听动态生成的元素。</p>
</blockquote>

<p>代码示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="c1">// 错误版（但是可能能过）
</span><span class="c1"></span> <span class="nx">ul</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
     <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;li&#39;</span><span class="p">){</span>
         <span class="nx">fn</span><span class="p">()</span> <span class="c1">// 执行某个函数
</span><span class="c1"></span>     <span class="p">}</span>
 <span class="p">})</span>
<span class="c1">// bug 在于，如果用户点击的是 li 里面的 span，就没法触发 fn，这显然不对。
</span><span class="c1">// 高级版
</span><span class="c1"></span> <span class="kd">function</span> <span class="nx">delegate</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">eventType</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">eventType</span><span class="p">,</span> <span class="nx">e</span> <span class="p">=&gt;</span> <span class="p">{</span>
       <span class="kd">let</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span>
       <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">selector</span><span class="p">))</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">===</span> <span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">el</span> <span class="o">=</span> <span class="kc">null</span>
           <span class="k">break</span>
         <span class="p">}</span>
         <span class="nx">el</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span>
       <span class="p">}</span>
       <span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">el</span><span class="p">)</span>
     <span class="p">})</span>
     <span class="k">return</span> <span class="nx">element</span>
   <span class="p">}</span>
<span class="c1">// 思路是点击 span 后，递归遍历 span 的祖先元素看其中有没有 ul 里面的 li。
</span></code></pre></td></tr></table>
</div>
</div>
<!-- Article End -->

<hr />

<!-- test -->

<div style="text-align:center;">·未完待续·</div>

<!-- ok -->

<hr />

<h3 id="参考文章">参考文章</h3>

<ul>
<li><a href="https://static.xiedaimala.com/xdml/file/3ac7c224-c23d-491f-84b5-4fabfbeab9b8/2020-5-26-9-39-45.pdf">DOM 事件与事件委托.pdf</a></li>
<li><a href="https://static.xiedaimala.com/xdml/file/f40ceb64-df08-4420-9226-7f76dbff15d5/2020-1-3-17-55-22.pdf">事件.pdf</a></li>
<li><a href="https://static.xiedaimala.com/xdml/file/3ac7c224-c23d-491f-84b5-4fabfbeab9b8/2019-8-21-10-39-21.pdf">手写 EventHub PDF</a></li>
<li><a href="https://wangdoc.com/javascript/dom/index.html">网道 DOM</a></li>
<li><a href="https://wangdoc.com/javascript/events/index.html">网道 DOM事件</a></li>
</ul>

<h3 id="相关文章">相关文章</h3>

<ul>
<li>无</li>
</ul>

<hr />

<ul>
<li>作者： Joel</li>
<li>文章链接：</li>
<li><a href="http://xmasuhai.xyz/posts/版权声明链接/">版权声明</a></li>
<li>非自由转载-非商用-非衍生-保持署名</li>
<li><a style='color:#DB2D5D;' href='https://xiedaimala.com/bbs/users/8c266e6f-55a2-4348-a180-17cb8cdb2c46#/?page=1' target='_blank' rel='noreferrer noopener'>河</a>
<a style='color:#006CFF;' href='https://juejin.im/user/59abfad26fb9a0248f4aa221' target='_blank' rel='noreferrer noopener'>掘</a>
<a style='color:#009A61;' href='https://segmentfault.com/u/joel_59b17eb9d2155' target='_blank' rel='noreferrer noopener'>思</a>
<a style='color:#0084FF;' href='https://www.zhihu.com/people/xue-shou-41/posts' target='_blank' rel='noreferrer noopener'>知</a>
<a style='color:#EA6F5A;' href='https://www.jianshu.com/u/079916729823' target='_blank' rel='noreferrer noopener'>简</a></li>
</ul>

<hr />

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2020-06-07
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/dom/">DOM</a>
          <a href="http://xmasuhai.xyz/tags/javascript/">JavaScript</a>
          <a href="http://xmasuhai.xyz/tags/api/">API</a>
          
        </div>

      
      <nav class="post-nav">
        
        
          <a class="next" href="/post/js/js%E9%9D%9E%E5%85%A8%E8%A7%A309%E6%80%BB%E7%BB%93/">
            <span class="next-text nav-default">【JS非全解09】总结</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
