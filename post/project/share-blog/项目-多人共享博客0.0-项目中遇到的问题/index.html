<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>【项目 多人共享博客】0.0 项目中遇到的问题 - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="项目中遇到的问题 大纲链接§ [toc] 推荐阅读 Vite真香之路 问题记录 pnpm add -g pnpm安装路径提示错误 无法升级 The location of the currently running pnpm differs from the location where pnpm will be installed ⇧ 复现 运行" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.91.2" />


<link rel="canonical" href="http://xmasuhai.xyz/post/project/share-blog/%E9%A1%B9%E7%9B%AE-%E5%A4%9A%E4%BA%BA%E5%85%B1%E4%BA%AB%E5%8D%9A%E5%AE%A20.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="【项目 多人共享博客】0.0 项目中遇到的问题" />
<meta property="og:description" content="项目中遇到的问题 大纲链接§ [toc] 推荐阅读 Vite真香之路 问题记录 pnpm add -g pnpm安装路径提示错误 无法升级 The location of the currently running pnpm differs from the location where pnpm will be installed ⇧ 复现 运行" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/project/share-blog/%E9%A1%B9%E7%9B%AE-%E5%A4%9A%E4%BA%BA%E5%85%B1%E4%BA%AB%E5%8D%9A%E5%AE%A20.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-01T10:04:10+08:00" />
<meta property="article:modified_time" content="2022-06-07T08:48:37+08:00" />

<meta itemprop="name" content="【项目 多人共享博客】0.0 项目中遇到的问题">
<meta itemprop="description" content="项目中遇到的问题 大纲链接§ [toc] 推荐阅读 Vite真香之路 问题记录 pnpm add -g pnpm安装路径提示错误 无法升级 The location of the currently running pnpm differs from the location where pnpm will be installed ⇧ 复现 运行"><meta itemprop="datePublished" content="2022-06-01T10:04:10+08:00" />
<meta itemprop="dateModified" content="2022-06-07T08:48:37+08:00" />
<meta itemprop="wordCount" content="6494">
<meta itemprop="keywords" content="FrontEnd,Project," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【项目 多人共享博客】0.0 项目中遇到的问题"/>
<meta name="twitter:description" content="项目中遇到的问题 大纲链接§ [toc] 推荐阅读 Vite真香之路 问题记录 pnpm add -g pnpm安装路径提示错误 无法升级 The location of the currently running pnpm differs from the location where pnpm will be installed ⇧ 复现 运行"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">【项目 多人共享博客】0.0 项目中遇到的问题</h1>
      
      <div class="post-meta">
        <time datetime="2022-06-01" class="post-time">
          2022-06-01
        </time>
        <div class="post-category">
            
          </div>
        <span class="more-meta"> 约 6494 字 </span>
          <span class="more-meta"> 预计阅读 13 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#pnpm-add--g-pnpm安装路径提示错误-无法升级-the-location-of-the-currently-running-pnpm-differs-from-the-location-where-pnpm-will-be-installed-a-hrefcatalogue--a"><code>pnpm add -g pnpm</code>安装路径提示错误 无法升级 <code>The location of the currently running pnpm differs from the location where pnpm will be installed</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#build遇到报错-the-service-was-stopped-write-epipe--a-hrefcatalogue--a"><code>build</code>遇到报错 <code>The service was stopped: write EPIPE</code>  <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#如何在生命周期中恰当地处理异步与异步传递数据">如何在生命周期中恰当地处理异步与异步传递数据</a></li>
    <li><a href="#登录注册-错误时也跳转-a-hrefcatalogue--a">登录注册 错误时也跳转 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#解决-使用tsx语法-使用slot插槽报错-vue-warn-slot-default-invoked-outside-of-the-render-function-this-will-not-track-dependencies-used-in-the-slot-invoke-the-slot-function-inside-the-render-function-instead-a-hrefcatalogue--a">解决 使用tsx语法 使用<code>slot</code>插槽报错 <code>[Vue warn]: Slot &quot;default&quot; invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#ts-动态声明字符串模板变量类型-a-hrefcatalogue--a">ts 动态声明字符串模板变量类型 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#样式设置了overflow-x-hidden导致了windowscrollto失效-a-hrefcatalogue--a">样式设置了<code>overflow-x: hidden;</code>导致了<code>window.scrollTo</code>失效 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#报错vue-warn-unhandled-error-during-execution-of-render-function-refref-undefined--a-hrefcatalogue--a">报错<code>[Vue warn]: Unhandled error during execution of render function ref=Ref&lt; undefined &gt;</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#css-modules-中如何使用-深入组件样式-a-hrefcatalogue--a"><code>css modules</code> 中如何使用 深入组件样式？ <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#在路由中使用-defineasynccomponent动态引入组件-a-hrefcatalogue--a">在路由中使用 <code>defineAsyncComponent</code>动态引入组件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#报错vue-warn-invalid-vnode-type-undefined-undefined-a-hrefcatalogue--a">报错<code>[Vue warn]: Invalid VNode type: undefined (undefined)</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#自定义组件-jsx-事件-a-hrefcatalogue--a">自定义组件 JSX 事件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#vite2-jsxtsx-写vue提示react-is-not-defined-a-hrefcatalogue--a">vite2 jsx/tsx 写vue提示：<code>React is not defined</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#-解决引入-module-类型报错-a-hrefcatalogue--a">🚑 解决引入 module 类型报错 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#pinia-遇坑-a-hrefcatalogue--a">pinia 遇坑 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#at-root-使用css预处理器写css时缩小嵌套层级-a-hrefcatalogue--a"><code>@at-root</code> 使用css预处理器写css时缩小嵌套层级 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#使用引入的组件时报错ts2604-jsx-element-type-xxx-does-not-have-any-construct-or-call-signatures-a-hrefcatalogue--a">使用引入的组件时报错<code>TS2604: JSX element type 'XXX' does not have any construct or call signatures.</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#setup中写return---jsxdom和在render-return-jsxdom选项中写-a-hrefcatalogue--a"><code>setup()</code>中写<code>return () =&gt; (JsxDOM)</code>和在<code>render() {return (JsxDOM)}</code>选项中写 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#ide-webstorm-警告-在未导入-react-的情况下使用-jsx-a-hrefcatalogue--a"><code>IDE</code> <code>WebStorm</code> 警告 在未导入 React 的情况下使用 JSX <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#引入无props的组件时报错-a-hrefcatalogue--a">引入无<code>props</code>的组件时，报错 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#在tsx文件中写点击事件绑定方法时button-onclickxxxbutton-报类型错误-a-hrefcatalogue--a">在<code>tsx</code>文件中写点击事件绑定方法时<code>&lt;Button onClick={xxx}&gt;...&lt;/Button&gt;</code> 报类型错误 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#项目根目录不支持驼峰式命名-a-hrefcatalogue--a">项目根目录不支持驼峰式命名 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#端口号3000被占用-a-hrefcatalogue--a">端口号<code>3000</code>被占用 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#误删了idea文件-a-hrefcatalogue--a">误删了<code>.idea</code>文件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
    <li><a href="#只用一种运行器-yarn--pnpm-a-hrefcatalogue--a">只用一种运行器 <code>yarn</code> | <code>pnpm</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h1 id="项目中遇到的问题">项目中遇到的问题</h1>
<hr>
<blockquote>
<p>大纲链接<!-- raw HTML omitted --> § <!-- raw HTML omitted --></p>
</blockquote>
<p>[toc]</p>
<hr>
<blockquote>
<p>推荐阅读 <a href="https://juejin.cn/post/7119455615840092173">Vite真香之路 问题记录</a></p>
</blockquote>
<h2 id="pnpm-add--g-pnpm安装路径提示错误-无法升级-the-location-of-the-currently-running-pnpm-differs-from-the-location-where-pnpm-will-be-installed-a-hrefcatalogue--a"><code>pnpm add -g pnpm</code>安装路径提示错误 无法升级 <code>The location of the currently running pnpm differs from the location where pnpm will be installed</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p>复现</p>
</blockquote>
<ul>
<li>运行 <code> pnpm add -g pnpm</code></li>
<li>会报如下错误：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">Nothing to stop. No server is running <span class="k">for</span> the store at C:<span class="se">\U</span>sers<span class="se">\X</span>XX<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\p</span>npm<span class="se">\s</span>tore<span class="se">\v</span><span class="m">3</span>
The location of the currently running pnpm differs from the location where pnpm will be installed
 Current pnpm location: C:<span class="se">\U</span>sers<span class="se">\X</span>XX<span class="se">\A</span>ppData<span class="se">\R</span>oaming<span class="se">\n</span>pm
 Target location: C:<span class="se">\U</span>sers<span class="se">\X</span>XX<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\p</span>npm
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>解决</p>
</blockquote>
<ul>
<li>使用<code>npm install -g pnpm</code></li>
</ul>
<blockquote>
<p>参考</p>
</blockquote>
<ul>
<li><a href="https://blog.csdn.net/qq_41614928/article/details/126734930">mac The location of the currently running pnpm differs from the location where pnpm will be installed</a></li>
<li><a href="https://blog.csdn.net/qq_42700109/article/details/124961435">安装pnpm</a></li>
<li><a href="https://pnpm.io/zh/">pnpm中文</a></li>
</ul>
<hr>
<h2 id="build遇到报错-the-service-was-stopped-write-epipe--a-hrefcatalogue--a"><code>build</code>遇到报错 <code>The service was stopped: write EPIPE</code>  <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>failed to load config from xxx\vite.config.ts error during build:</code></li>
<li><code>Error: The service was stopped: write EPIPE</code></li>
<li>重启服务即可 抽风，同端口号<code>3000</code>被占用
<ul>
<li>管理员模式 打开终端 运行 <code>net stop winnat &amp;&amp; net start winnat</code></li>
</ul>
</li>
</ul>
<h2 id="如何在生命周期中恰当地处理异步与异步传递数据">如何在生命周期中恰当地处理异步与异步传递数据</h2>
<ul>
<li><code>created</code></li>
<li><code>mounted</code></li>
<li>组件间传递数据</li>
</ul>
<hr>
<h2 id="登录注册-错误时也跳转-a-hrefcatalogue--a">登录注册 错误时也跳转 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>已解决 bug</li>
</ul>
<hr>
<h2 id="解决-使用tsx语法-使用slot插槽报错-vue-warn-slot-default-invoked-outside-of-the-render-function-this-will-not-track-dependencies-used-in-the-slot-invoke-the-slot-function-inside-the-render-function-instead-a-hrefcatalogue--a">解决 使用tsx语法 使用<code>slot</code>插槽报错 <code>[Vue warn]: Slot &quot;default&quot; invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>请求先后</li>
<li>先获取总的数据 前一个生命周期 <code>onBeforeMount</code></li>
</ul>
<blockquote>
<p>参考</p>
</blockquote>
<ul>
<li><a href="https://github.com/arco-design/arco-design-vue/issues/236">arco-design-vue issues Select组件不显示placeholder属性 #236 </a></li>
<li><a href="https://stackoverflow.com/questions/70523848/add-a-class-to-every-child-of-a-slot">Add a class to every child of a slot</a></li>
<li><a href="https://stackoverflow.com/questions/38148297/in-vue-js-can-a-component-detect-when-the-slot-content-changes">In Vue.js can a component detect when the slot content changes</a></li>
</ul>
<hr>
<h2 id="ts-动态声明字符串模板变量类型-a-hrefcatalogue--a">ts 动态声明字符串模板变量类型 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">type</span> <span class="nx">X</span> <span class="o">=</span> <span class="s1">&#39;/blog/:blogId&#39;</span> <span class="o">|</span> <span class="sb">`/blog/</span><span class="si">${</span><span class="kt">number</span><span class="si">}</span><span class="sb">`</span>

<span class="kr">const</span> <span class="nx">xx</span>: <span class="kt">X</span> <span class="o">=</span> <span class="s1">&#39;/blog/:blogId&#39;</span><span class="p">;</span> <span class="c1">// right
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">xx</span>: <span class="kt">X</span> <span class="o">=</span> <span class="s1">&#39;/blog/11&#39;</span><span class="p">;</span> <span class="c1">// right
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">xx</span>: <span class="kt">X</span> <span class="o">=</span> <span class="s1">&#39;/blog/blogId&#39;</span><span class="p">;</span> <span class="c1">// wrong
</span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="样式设置了overflow-x-hidden导致了windowscrollto失效-a-hrefcatalogue--a">样式设置了<code>overflow-x: hidden;</code>导致了<code>window.scrollTo</code>失效 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p><code>@/components/BlogBody.tsx</code></p>
</blockquote>
<ul>
<li>记录当前滚动位置 <code>const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;</code></li>
<li>记录初始/上一次滚动位置 <code>oldScrollTop.value = scrollTop;</code>，初始为<code>const oldScrollTop = ref(0);</code></li>
<li>记录对比当前和上一次滚动位置差值 <code>const scrollStep = scrollTop - oldScrollTop.value;</code></li>
<li><code>scrollStep</code> 为正 向下 隐藏导航栏；为负 向上 显示导航栏</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">onUnmounted</span><span class="p">,}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>

<span class="c1">// props
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">BlogBodyProps</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">isSHow</span>: <span class="kt">Boolean</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogBody&#39;</span><span class="p">,</span>
  <span class="nx">props</span>: <span class="kt">BlogBodyProps</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">emits</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;showHeaderFooter&#39;</span><span class="p">],</span>
  <span class="nx">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 获取 节点，非实时响应式
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">();</span>

    <span class="kr">const</span> <span class="nx">oldScrollTop</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// 按滚动方向自动显示/隐藏 回调
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">scrollingCB</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// 滚动条距文档顶部的距离（做兼容处理）
</span><span class="c1"></span>      <span class="c1">// 注意是对象 document.documentElement 的属性 scrollTop
</span><span class="c1"></span>      <span class="c1">// 监听 window.document 的元素 documentElement.scrollTop 属性值变化
</span><span class="c1"></span>      <span class="kr">const</span> <span class="nx">scrollTop</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
      <span class="c1">// 滚动条滚动的距离
</span><span class="c1"></span>      <span class="kr">const</span> <span class="nx">scrollStep</span> <span class="o">=</span> <span class="nx">scrollTop</span> <span class="o">-</span> <span class="nx">oldScrollTop</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="c1">// 更新——滚动前，滚动条距文档顶部的距离
</span><span class="c1"></span>      <span class="nx">oldScrollTop</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">scrollTop</span><span class="p">;</span>
      <span class="c1">// 关键 scrollStep 为正 向下 隐藏导航栏；
</span><span class="c1"></span>      <span class="c1">// 为负 向上 显示导航栏
</span><span class="c1"></span>      <span class="nx">scrollStep</span> <span class="o">&lt;</span> <span class="mi">0</span>
        <span class="o">?</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;showHeaderFooter&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
        <span class="o">:</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;showHeaderFooter&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">));</span>
    <span class="p">};</span>

    <span class="nx">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="nx">scrollingCB</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">onUnmounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="nx">scrollingCB</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">main</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">render() {</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">main</span> <span class="na">ref</span><span class="o">=</span><span class="p">{(</span><span class="nx">el</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">main</span> <span class="o">=</span> <span class="nx">el</span><span class="p">}&gt;</span>
        <span class="p">&lt;</span><span class="nt">router</span><span class="err">-</span><span class="na">view</span><span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

<span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li><a href="https://vuejs.org/api/built-in-special-attributes.html#ref">vue3 composition API ref</a></li>
</ul>
<hr>
<blockquote>
<p><code>@/components/Layout.tsx</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>@/styles/layout.module.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="k">@import</span> <span class="s1">&#39;../src/assets/style/variables&#39;</span><span class="p">;</span>

<span class="nc">.layout</span> <span class="p">{</span>
  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
  <span class="na">display</span><span class="o">:</span> <span class="ni">grid</span><span class="p">;</span>
  <span class="na">grid-template-areas</span><span class="o">:</span> <span class="s1">&#39;header header header&#39;</span>
                       <span class="s1">&#39;.      main  .&#39;</span>
                       <span class="s1">&#39;footer footer footer&#39;</span><span class="p">;</span>
  <span class="na">grid-template-columns</span><span class="o">:</span> <span class="mi">12</span><span class="kt">%</span> <span class="ni">auto</span> <span class="mi">12</span><span class="kt">%</span><span class="p">;</span>
  <span class="na">grid-template-rows</span><span class="o">:</span> <span class="ni">auto</span> <span class="mi">1</span><span class="kt">fr</span> <span class="ni">auto</span><span class="p">;</span>
  <span class="na">height</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
  <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
  <span class="c1">//overflow-x: hidden; // 会导致 document.documentElement.scrollTop 始终为 0 的 bug
</span><span class="c1"></span>
  <span class="nd">::-webkit-scrollbar</span> <span class="p">{</span>
    <span class="na">display</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="na">scroll-behavior</span><span class="o">:</span> <span class="ni">smooth</span><span class="p">;</span>
  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">vw</span><span class="p">;</span>

  <span class="nc">.blog-header</span> <span class="p">{</span><span class="nc">...</span><span class="p">}</span>

  <span class="nc">.blog-main</span> <span class="p">{</span><span class="nc">...</span><span class="p">}</span>

  <span class="nc">.blog-footer</span> <span class="p">{</span><span class="nc">...</span><span class="p">}</span>

<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>参考</p>
</blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/28050548/window-pageyoffset-is-always-0-with-overflow-x-hidden">stackoverflow window.pageYOffset is always 0 with overflow-x: hidden</a></li>
<li><a href="https://stackoverflow.com/questions/8635799/overflow-xhidden-still-can-scroll">stackoverflow overflow-x:hidden still can scroll</a></li>
<li><a href="https://localcoder.org/window-pageyoffset-is-always-0-with-overflow-x-hidden">window.pageYOffset is always 0 with overflow-x: hidden</a></li>
<li><a href="https://css-tricks.com/how-to-make-an-unobtrusive-scroll-to-top-button/">CSS Tricks How to Make an Unobtrusive Scroll-to-Top Button</a></li>
<li><a href="https://www.jianshu.com/p/01a56b3b9b73">CSS深入理解之overflow 笔记</a></li>
<li><a href="https://blog.csdn.net/qq_44146522/article/details/117297467">Vue实现某个元素监听滚动条失效问题（scrollTop一直等于0 ）</a></li>
<li><a href="https://cloud.tencent.com/developer/section/1071886">溢出 | overflow</a></li>
<li><a href="https://runebook.dev/zh-CN/docs/css/overflow">overflow Runebook.dev</a></li>
<li><a href="https://www.cnblogs.com/padding1015/p/9588721.html">css笔记 - 张鑫旭css课程笔记之 overflow 篇</a></li>
</ul>
<hr>
<hr>
<h2 id="报错vue-warn-unhandled-error-during-execution-of-render-function-refref-undefined--a-hrefcatalogue--a">报错<code>[Vue warn]: Unhandled error during execution of render function ref=Ref&lt; undefined &gt;</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>render()</code>函数中的数据在组件创建时，直接调用<code>beautifyDate()</code>时还未初始化，导致报错</li>
<li>解决方法：在调用异步方法<code>getBlogDetail()</code>内部，执行方法<code>beautifyDate()</code>，并赋值给已定义的响应式数据<code>createdAt.value</code></li>
<li>在<code>render()</code>函数中使用<code>this.createdAt</code>而不是直接调用<code>beautifyDate()</code></li>
</ul>
<hr>
<h2 id="css-modules-中如何使用-深入组件样式-a-hrefcatalogue--a"><code>css modules</code> 中如何使用 深入组件样式？ <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>想使用jsx写法编写组件的时候，无法使用scoped这个用法</li>
<li>因为jsx等同于一个js文件，里面可写不了template与style标签</li>
<li>tsx直接使用字符串<code>return &lt;div class=&quot;test&quot;&gt;</code>，会导致样式文件会挂载到全局的style标签上，且类名没有任何转译，这样就会容易造成样式污染</li>
<li>要覆盖子组件内部的元素样式</li>
</ul>
<blockquote>
<p><code>cover-ant.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="nt">input</span><span class="nc">.ant-input</span><span class="nd">:focus</span><span class="o">,</span>
<span class="nt">textarea</span><span class="nc">.ant-input</span><span class="nd">:focus</span><span class="o">,</span>
<span class="nt">input</span><span class="nc">.ant-input</span><span class="nd">:hover</span><span class="o">,</span>
<span class="nt">textarea</span><span class="nc">.ant-input</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">border-color</span><span class="o">:</span> <span class="nv">$theme-lighter-color</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">ul</span><span class="nc">.ant-pagination</span> <span class="p">{</span>
  <span class="o">&gt;</span> <span class="nt">li</span><span class="nc">.ant-pagination-item</span><span class="o">,</span>
  <span class="nt">li</span><span class="nc">.ant-pagination-prev</span><span class="o">,</span>
  <span class="nt">li</span><span class="nc">.ant-pagination-next</span> <span class="p">{</span>
    <span class="o">&gt;</span> <span class="nt">a</span><span class="nc">.ant-pagination-item-link</span> <span class="p">{</span>

      <span class="o">&gt;</span> <span class="nt">span</span><span class="nc">.anticon</span> <span class="p">{</span>
        <span class="na">transform</span><span class="o">:</span> <span class="nf">translateY</span><span class="p">(</span><span class="mi">55</span><span class="kt">%</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nt">a</span><span class="nd">:not</span><span class="o">(</span><span class="nc">.ant-pagination-item-link</span><span class="o">)</span> <span class="p">{</span>
      <span class="na">display</span><span class="o">:</span> <span class="ni">inline-block</span><span class="p">;</span>
      <span class="na">verticle-align</span><span class="o">:</span> <span class="o">-</span><span class="mf">.6</span><span class="kt">em</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="在路由中使用-defineasynccomponent动态引入组件-a-hrefcatalogue--a">在路由中使用 <code>defineAsyncComponent</code>动态引入组件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p>原来<code>@/router/index.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="cm">/* 不使用defineAsyncComponent 动态加载组件出现警告 component: () =&gt; import(&#39;@/pages/blog/index/BlogIndex&#39;)
</span><span class="cm">静态导入 */</span>
<span class="c1">// components
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">BlogIndex</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/blog/index/BlogIndex&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Login</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/login/Login&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Register</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/register/Register&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">CreateBlog</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/blog/create/CreateBlog&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">EditBlog</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/blog/edit/EditBlog&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">BlogDetail</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/blog/detail/BlogDetail&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">User</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/user/User&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">MyBlog</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/myBlog/MyBlog&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">About</span> <span class="kr">from</span> <span class="s1">&#39;@/pages/About&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">routes</span>: <span class="kt">RouteRecordRaw</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogIndex&#39;</span><span class="p">,</span>
    <span class="c1">// import(&#39;&#39;) 必须是静态字符串，不可动态拼接
</span><span class="c1"></span>    <span class="c1">// The above dynamic import cannot be analyzed by vite
</span><span class="c1"></span>    <span class="nx">component</span>: <span class="kt">defineAsyncComponent</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/index/BlogIndex&#39;</span><span class="p">)),</span> <span class="c1">// 注意这里如果是.vue文件必须要带上 文件后缀.vue
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/login&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Login&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">Login</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/register&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Register&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">Register</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/detail/:blogId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogDetail&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">BlogDetail</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/create&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;CreateBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">CreateBlog</span><span class="p">,</span>
    <span class="c1">// 只有经过身份验证的用户才能创建帖子
</span><span class="c1"></span>    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/edit/:blogId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;EditBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">EditBlog</span><span class="p">,</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/user/:userId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">User</span><span class="p">,</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/myblog&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;MyBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">MyBlog</span><span class="p">,</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;About&#39;</span><span class="p">,</span>
    <span class="c1">// route level code-splitting
</span><span class="c1"></span>    <span class="c1">// this generates a separate chunk (about.[hash].js) for this route
</span><span class="c1"></span>    <span class="c1">// which is lazy-loaded when the route is visited.
</span><span class="c1"></span>    <span class="nx">component</span>: <span class="kt">About</span>
  <span class="p">}</span>
<span class="p">];</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>import('xxx')</code> 必须是静态字符串，不可动态拼接</li>
<li>否则报错<code>The above dynamic import cannot be analyzed by vite</code></li>
</ul>
<blockquote>
<p>改为使用 <code>defineAsyncComponent</code> API</p>
</blockquote>
<ul>
<li>返回<code>promise</code>
<ul>
<li><code>defineAsyncComponent(() =&gt; {return new Promise((resolve, reject) =&gt; {...})})</code></li>
</ul>
</li>
<li>使用<code>import</code>函数作为返回值：
<ul>
<li><code>defineAsyncComponent(() =&gt; (import('./components/MyComponent.vue')))</code></li>
</ul>
</li>
<li><a href="https://vuejs.org/guide/components/async.html#async-components">vue3 Async Components</a></li>
</ul>
<blockquote>
<p><code>@/router/index.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="kr">const</span> <span class="nx">routes</span>: <span class="kt">RouteRecordRaw</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogIndex&#39;</span><span class="p">,</span>
    <span class="c1">// import(&#39;&#39;) 必须是静态字符串，不可动态拼接
</span><span class="c1"></span>    <span class="c1">// The above dynamic import cannot be analyzed by vite
</span><span class="c1"></span>    <span class="nx">component</span>: <span class="kt">defineAsyncComponent</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/index/BlogIndex&#39;</span><span class="p">)),</span> <span class="c1">// 注意这里如果是.vue文件必须要带上 文件后缀.vue
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">]</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>使用<code>defineAsyncComponent</code> 动态加载组件时，会出现警告</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[Vue Router warn]: Component &#34;default&#34; in record with path &#34;/&#34; is defined using &#34;defineAsyncComponent()&#34;. Write &#34;() =&gt; import(&#39;./MyPage.vue&#39;)&#34; instead of &#34;defineAsyncComponent(() =&gt; import(&#39;./MyPage.vue&#39;))&#34;.
</code></pre></td></tr></table>
</div>
</div><ul>
<li>代替原来的静态引入<code>import BlogIndex from '@/pages/blog/index/BlogIndex';</code></li>
<li>直接动态引入<code>() =&gt; import('./MyPage.vue'))</code></li>
</ul>
<blockquote>
<p><code>@/router/index.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">{</span><span class="nx">createRouter</span><span class="p">,</span> <span class="cm">/*createWebHistory*/</span> <span class="nx">createWebHashHistory</span><span class="p">,</span> <span class="nx">RouteRecordRaw</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue-router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">storeToRefs</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;pinia&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">useStore</span> <span class="kr">from</span> <span class="s1">&#39;@/store&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">useAuthStore</span> <span class="kr">from</span> <span class="s1">&#39;@/store/modules/auth&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">routes</span>: <span class="kt">RouteRecordRaw</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogIndex&#39;</span><span class="p">,</span>
    <span class="c1">// import(&#39;&#39;) 必须是静态字符串，不可动态拼接
</span><span class="c1"></span>    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/index/BlogIndex&#39;</span><span class="p">),</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/login&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Login&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/login/Login&#39;</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/register&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Register&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/register/Register&#39;</span><span class="p">),</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/detail/:blogId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogDetail&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/detail/BlogDetail&#39;</span><span class="p">),</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/create&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;CreateBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/create/CreateBlog&#39;</span><span class="p">),</span>
    <span class="c1">// 只有经过身份验证的用户才能创建帖子
</span><span class="c1"></span>    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/edit/:blogId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;EditBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/blog/edit/EditBlog&#39;</span><span class="p">),</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/user/:userId&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/user/User&#39;</span><span class="p">),</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/myblog&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;MyBlog&#39;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/myBlog/MyBlog&#39;</span><span class="p">),</span>
    <span class="nx">meta</span><span class="o">:</span> <span class="p">{</span><span class="nx">requiresAuth</span>: <span class="kt">true</span><span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/about&#39;</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;About&#39;</span><span class="p">,</span>
    <span class="c1">// route level code-splitting
</span><span class="c1"></span>    <span class="c1">// this generates a separate chunk (about.[hash].js) for this route
</span><span class="c1"></span>    <span class="c1">// which is lazy-loaded when the route is visited.
</span><span class="c1"></span>    <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;@/pages/About&#39;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
  <span class="nx">history</span>: <span class="kt">createWebHashHistory</span><span class="p">(),</span>
  <span class="nx">routes</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// 路由全局前置守卫
</span><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">((</span><span class="nx">to</span><span class="p">,</span> <span class="kr">from</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// 匹配路由元信息
</span><span class="c1"></span>  <span class="c1">// 判断是需要登录
</span><span class="c1"></span>  <span class="c1">// const {getIsLogin,} = storeToRefs(useAuthStore()); // 使用 store.checkLogin() 服务器验证 的登录状态 代替
</span><span class="c1"></span>
  <span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">useAuthStore</span><span class="p">();</span>
  <span class="cm">/*
</span><span class="cm">  * if(to.path === &#39;login&#39;) return next();
</span><span class="cm">  * if (to.path 受控页面或 未登录) return next(&#39;/login？&#39;);
</span><span class="cm">  * next()
</span><span class="cm">  * */</span>

  <span class="kr">const</span> <span class="nx">ifRequiresAuth</span>: <span class="kt">boolean</span> <span class="o">=</span> <span class="nx">to</span><span class="p">.</span><span class="nx">matched</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">record</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">record</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">requiresAuth</span><span class="p">;</span> <span class="p">});</span>

  <span class="c1">// URL 是否需要 身份验证
</span><span class="c1"></span>  <span class="nx">ifRequiresAuth</span>
    <span class="o">?</span> <span class="p">(</span><span class="c1">// 需要身份验证的 URL
</span><span class="c1"></span>      <span class="nx">store</span><span class="p">.</span><span class="nx">checkLogin</span><span class="p">()</span> <span class="c1">// 向服务器请求，获取当前登录状态
</span><span class="c1"></span>        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">isLogin</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="o">!</span><span class="nx">isLogin</span>
            <span class="o">?</span> <span class="nx">next</span><span class="p">({</span><span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="nx">query</span><span class="o">:</span> <span class="p">{</span><span class="nx">redirect</span>: <span class="kt">to.fullPath</span><span class="p">}})</span>
            <span class="o">:</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// 服务器响应验证已登录
</span><span class="c1"></span>        <span class="p">}))</span>
    <span class="o">:</span> <span class="nx">next</span><span class="p">();</span> <span class="c1">// 不需要身份验证的 URL;
</span><span class="c1"></span>  <span class="cm">/* 确保最后执行且只一次 next() */</span>

  <span class="c1">// 判断是否进入 注册 或 登录 的路由，先检查是否已登录
</span><span class="c1"></span>  <span class="cm">/*
</span><span class="cm">  ;[&#39;/register&#39;, &#39;/login&#39;].includes(to.path)
</span><span class="cm">    ? (console.log(&#39;向服务器发送请求，验证登录&#39;))
</span><span class="cm">    : (console.log(&#39;不做任何处理&#39;, isLogin));
</span><span class="cm">*/</span>

<span class="p">});</span>

<span class="c1">// 路由全局后置守卫
</span><span class="c1"></span><span class="nx">router</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">((</span><span class="cm">/* to, from, failure */</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// console.log(&#39;路由全局后置守卫&#39;, to, from);
</span><span class="c1"></span>
  <span class="c1">// 清除 记录的 router-view 中的 组件名
</span><span class="c1"></span>  <span class="kr">const</span> <span class="p">{</span><span class="nx">routerCompName</span><span class="p">,}</span> <span class="o">=</span> <span class="nx">storeToRefs</span><span class="p">(</span><span class="nx">useStore</span><span class="p">());</span>
  <span class="nx">routerCompName</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span><span class="p">;</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>参考与相关类似问题 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></p>
</blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/67850002/vue-warn-failed-to-resolve-component-when-tried-to-create-global-component">[Vue warn]: Failed to resolve component when tried to create global component stackoverflow</a></li>
<li><a href="https://stackoverflow.com/questions/68485237/dynamically-import-vue-component-based-on-url-params">Dynamically Import Vue Component Based On URL Params stackoverflow</a></li>
<li><a href="https://stackoverflow.com/questions/69645120/invalid-vnode-type-undefined-undefined-when-used-with-component-is-comp">Invalid VNode type: undefined (undefined) - when used with <!-- raw HTML omitted --></a></li>
<li><a href="https://stackoverflow.com/questions/58080549/vue-js-import-components-dynamically">Vue js import components dynamically</a></li>
<li><a href="https://forum.framework7.io/t/vue-warn-invalid-vnode-type-undefined-undefined/14556">Vue warn: Invalid VNode type: undefined (undefined)</a></li>
</ul>
<hr>
<h2 id="报错vue-warn-invalid-vnode-type-undefined-undefined-a-hrefcatalogue--a">报错<code>[Vue warn]: Invalid VNode type: undefined (undefined)</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>识别不出节点的类型</li>
<li>是由于我在JSX中写了不合法的注释节点<code>{{/*xxxxx*/}}</code></li>
</ul>
<h2 id="自定义组件-jsx-事件-a-hrefcatalogue--a">自定义组件 JSX 事件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p>使用自定义事件</p>
</blockquote>
<ul>
<li>要声明一个自定义事件：<code>onHandleSubmit</code></li>
<li>子组件
<ul>
<li>声明选项<code>emits: ['handleSubmit',],</code></li>
<li>在<code>setup</code>选项中传参<code>setup(props, ctx) {}</code>
<ul>
<li>定义 发布方法 <code>const clickHandler = () =&gt; {ctx.emit('handleSubmit');}</code></li>
<li>返回<code>return {clickHandler}</code></li>
</ul>
</li>
<li>在<code>render</code>方法中使用<code>render() {return &lt;button onClick={this.clickHandler}&gt;&lt;/button&gt;}</code></li>
</ul>
</li>
<li>父组件
<ul>
<li>在<code>setup</code>选项中
<ul>
<li>定义 处理逻辑的方法 <code>const clickHandler = () =&gt; {}</code></li>
</ul>
</li>
<li>在<code>render</code>方法中使用自定义事件 <code>&lt;UserSubmitBtnTip onHandleSubmit={this.clickHandler}/&gt;</code></li>
</ul>
</li>
</ul>
<hr>
<blockquote>
<p>判断键盘抬起时，键盘值</p>
</blockquote>
<ul>
<li>自定义组件中有<code>&lt;input/&gt;</code>，事件<code>keyup</code>不能绑定在自定义组件上，而是绑定在内部的的<code>&lt;input/&gt;</code>上</li>
<li>通过<code>props</code>传一个<code>keyUpHandler</code>到内部</li>
<li>无修饰符，只能使用<code>event: KeyboardEvent</code>中的<code>event.key</code>来判断，是否按下<code>Enter</code>键
<ul>
<li><code>[&quot;Enter&quot;].includes(event.key)</code></li>
</ul>
</li>
</ul>
<blockquote>
<p><code>UserInput.tsx</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">,}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">cssAuth</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/auth.module.scss&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Input</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;ant-design-vue&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">UserInputProps</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">title</span>: <span class="kt">String</span><span class="p">,</span>
  <span class="nx">inputType</span><span class="o">:</span> <span class="p">{</span><span class="kr">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="k">default</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span>
  <span class="nx">placeholder</span>: <span class="kt">String</span><span class="p">,</span>
  <span class="nx">errorText</span>: <span class="kt">String</span><span class="p">,</span>
  <span class="nx">keyUpHandler</span>: <span class="kt">Function</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;UserInput&#39;</span><span class="p">,</span>
  <span class="nx">props</span>: <span class="kt">UserInputProps</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">setup</span><span class="p">(</span><span class="cm">/*props, ctx*/</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">{};</span>
  <span class="p">},</span>
  <span class="nx">render() {</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}&gt;</span>
          <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="p">{</span><span class="nx">cssAuth</span><span class="p">.</span><span class="nx">password</span><span class="p">}&gt;</span>
            <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
          <span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">Input</span> <span class="na">type</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">inputType</span><span class="p">}</span>
                 <span class="na">placeholder</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">placeholder</span> <span class="o">??</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
                 <span class="na">id</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
                 <span class="na">class</span><span class="o">=</span><span class="p">{</span><span class="nx">cssAuth</span><span class="p">.</span><span class="nx">userInput</span><span class="p">}</span>
                 <span class="na">onKeyup</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">keyUpHandler</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">keyUpHandler</span><span class="p">();}}/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="p">{</span><span class="nx">cssAuth</span><span class="p">.</span><span class="nx">error</span><span class="p">}&gt;</span>
          <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">errorText</span><span class="p">}</span>
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

<span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Login.tsx</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">,</span> <span class="nx">ref</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">router</span> <span class="kr">from</span> <span class="s1">&#39;@/router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">useAuthStore</span> <span class="kr">from</span> <span class="s1">&#39;@/store/modules/auth&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">logString</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@/store/modules/auth/interface&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">cssAuth</span> <span class="kr">from</span> <span class="s1">&#39;@/styles/auth.module.scss&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">UserInput</span> <span class="kr">from</span> <span class="s1">&#39;@/components/user-authentication/UserInput&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">UserSubmitBtnTip</span> <span class="kr">from</span> <span class="s1">&#39;@/components/user-authentication/UserSubmitBtnTip&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Login&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">setup</span><span class="p">(</span><span class="cm">/*props, ctx*/</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">useAuthStore</span><span class="p">();</span>
    <span class="c1">// const router = useRouter();
</span><span class="c1"></span>
    <span class="kr">const</span> <span class="nx">username</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">password</span> <span class="o">=</span> <span class="nx">ref</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

    <span class="kr">const</span> <span class="nx">asyncLogin</span> <span class="o">=</span> <span class="p">(</span><span class="nx">logString</span>: <span class="kt">logString</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">store</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">logString</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kr">const</span> <span class="nx">onLogin</span> <span class="o">=</span> <span class="p">(</span><span class="nx">logString</span>: <span class="kt">logString</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">asyncLogin</span><span class="p">(</span><span class="nx">logString</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">});</span>
        <span class="p">});</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">username</span><span class="p">,</span>
      <span class="nx">password</span><span class="p">,</span>
      <span class="nx">asyncLogin</span><span class="p">,</span>
      <span class="nx">onLogin</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">render() {</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">section</span> <span class="na">class</span><span class="o">=</span><span class="p">{</span><span class="nx">cssAuth</span><span class="p">.</span><span class="nx">login</span><span class="p">}&gt;</span>
        <span class="p">&lt;</span><span class="nt">UserInput</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;用户名&#34;</span>
                   <span class="na">errorText</span><span class="o">=</span><span class="s">&#34;当前用户名已注册&#34;</span>
                   <span class="na">v</span><span class="err">-</span><span class="na">model</span><span class="err">:</span><span class="na">username</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="p">}/&gt;</span>

        <span class="p">&lt;</span><span class="nt">UserInput</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;密码&#34;</span>
                   <span class="na">inputType</span><span class="o">=</span><span class="s">&#34;password&#34;</span>
                   <span class="na">errorText</span><span class="o">=</span><span class="s">&#34;当前用户名或密码不匹配&#34;</span>
                   <span class="na">v</span><span class="err">-</span><span class="na">model</span><span class="err">:</span><span class="na">password</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">}</span>
                   <span class="na">keyUpHandler</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                     <span class="p">[</span><span class="s1">&#39;Enter&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onLogin</span><span class="p">({</span><span class="nx">username</span>: <span class="kt">this.username</span><span class="p">,</span> <span class="nx">password</span>: <span class="kt">this.password</span><span class="p">});</span>
                   <span class="p">}}/&gt;</span>

        <span class="p">&lt;</span><span class="nt">UserSubmitBtnTip</span> <span class="na">btnName</span><span class="o">=</span><span class="s">&#34;立即登录&#34;</span>
                          <span class="na">tipText</span><span class="o">=</span><span class="s">&#34;没有账号？&#34;</span>
                          <span class="na">linkTo</span><span class="o">=</span><span class="s">&#34;/register&#34;</span>
                          <span class="na">linkText</span><span class="o">=</span><span class="s">&#34;注册新用户&#34;</span>
                          <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="k">this</span><span class="p">.</span><span class="nx">onLogin</span><span class="p">({</span><span class="nx">username</span>: <span class="kt">this.username</span><span class="p">,</span> <span class="nx">password</span>: <span class="kt">this.password</span><span class="p">});</span>
                          <span class="p">}}/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

<span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>参考</p>
</blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/68905587/vue-js-conditional-keyup-enter-is-not-working">Vue JS - Conditional keyup.enter is not working stackoverflow</a></li>
<li><a href="https://facebook.github.io/jsx/">JSX Introduction by facebook</a></li>
<li><strong><a href="https://bypaulshen.com/posts/vue-3-jsx-typescript">Using Vue 3 with JSX and TypeScript </a></strong></li>
<li><a href="https://www.mrcrmn.dev/articles/lightweight-components-with-vue3-and-jsx/">Lightweight Components with Vue 3 and JSX</a></li>
<li><a href="https://programming.vip/docs/vue-3-props-emit-slot-render-jsx-and-createelement.html">Programming VIP Vue-3 props, $emit, slot, render, JSX and createElement</a></li>
<li><a href="https://vuejs.org/guide/essentials/component-basics.html#listening-to-events">Vue3 Listening to Events</a></li>
<li><a href="https://vuejs.org/guide/components/events.html#declaring-emitted-events">Vue3 Declaring Emitted Events</a></li>
<li><a href="https://vuejs.org/guide/components/events.html#emitting-and-listening-to-events">Emitting and Listening to Events</a></li>
<li><a href="https://stackoverflow.com/questions/57035301/how-to-emit-event-from-jsx-functional-component-in-vuejs">How to emit event from JSX functional component in Vuejs</a></li>
<li><a href="https://www.jiangweishan.com/article/vuejs20210715a3.html">在vue3中编写jsx的两种方式</a></li>
<li><a href="https://www.jb51.net/article/217465.htm">vue中正确使用jsx语法的姿势分享1</a></li>
<li><a href="https://zxbcw.cn/post/217465/">vue中正确使用jsx语法的姿势分享2</a></li>
<li><a href="https://juejin.cn/post/6984656399812788238">在vue中使用jsx的正确姿势3</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/168223071">vue使用typeScript+jsx报错问题</a></li>
</ul>
<blockquote>
<p>JSX不支持在<code>setup</code>方法中写<code>defineEmits</code></p>
</blockquote>
<ul>
<li>必须换成选项写法<code>emits: ['xxx', 'update:xxx']</code></li>
</ul>
<hr>
<h2 id="vite2-jsxtsx-写vue提示react-is-not-defined-a-hrefcatalogue--a">vite2 jsx/tsx 写vue提示：<code>React is not defined</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><a href="https://juejin.cn/post/6915366437028626445">vite2 jsx/tsx 写vue提示：React is not defined</a></li>
</ul>
<hr>
<h2 id="-解决引入-module-类型报错-a-hrefcatalogue--a">🚑 解决引入 module 类型报错 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p><a href="https://juejin.cn/post/7005450507531583525">Vuex4 typescript 中自动将modules的类型添加到state中</a></p>
</blockquote>
<ul>
<li><a href="https://blog.csdn.net/fanweilin0123/article/details/109903447">vuex4.0中使用typescript, vuex4.0中modules的ts使用，vue3 + vuex4.0 + typescript 使用详情</a></li>
<li><a href="https://juejin.cn/post/6979281412021026829">vuex4 中 typescript 的使用，以及 store 的一些坑</a></li>
<li><a href="https://juejin.cn/post/7026283096521572366">Vue状态管理：使用Pinia代替Vuex坑</a></li>
<li><a href="https://juejin.cn/post/7057443820115329055">抛弃 Vuex，使用 Pinia</a></li>
<li><a href="https://juejin.cn/post/6999886459343732772">赋予Vuex 4.x 更好的 TypeScript体验</a></li>
<li><a href="https://juejin.cn/post/7015033326914240543">vuex@4 + TypeScript</a></li>
<li><a href="https://juejin.cn/post/6981356417064108062">Vuex4 对 TypeScript 并不友好，所以我选择 Pinia</a></li>
<li><a href="https://juejin.cn/post/6933140396721569799">如何在TypeScript中使用Vuex</a></li>
</ul>
<h2 id="pinia-遇坑-a-hrefcatalogue--a">pinia 遇坑 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>报错 <code>Uncaught Error: [🍍]: getActivePinia was called with no active Pinia. Did you forget to install pinia?</code></li>
<li>在<code>router</code>中使用的例子，必须在钩子函数中声明<code>const  store = useStore()</code>，而不是在钩子外</li>
<li><a href="https://pinia.vuejs.org/core-concepts/outside-component-usage.html#single-page-applications">Pinia官网示例</a></li>
<li><a href="https://pinia.vuejs.org/core-concepts/outside-component-usage.html#using-a-store-outside-of-a-component">Pinia官网示例 Using a store outside of a component</a></li>
<li><a href="https://pinia.vuejs.org/ssr/#using-the-store-outside-of-setup">Pinia官网示例 Using the store outside of setup()</a></li>
<li><a href="https://github.com/vuejs/pinia/issues/666">github issue #666 I can&rsquo;t use pinia outside of component setup</a></li>
<li><a href="https://stackoverflow.com/a/70714477/16435155">stackoverflow Vue: Can&rsquo;t access Pinia Store in beforeEnter vue-router</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createRouter</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue-router&#39;</span>

<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
  <span class="c1">// ...
</span><span class="c1"></span><span class="p">})</span>

<span class="c1">// ❌ Depending on the order of imports this will fail
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">useStore</span><span class="p">()</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">((</span><span class="nx">to</span><span class="p">,</span> <span class="kr">from</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// we wanted to use the store here
</span><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">)</span> <span class="nx">next</span><span class="p">()</span>
  <span class="k">else</span> <span class="nx">next</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">// Good way below
</span><span class="c1"></span>
<span class="nx">router</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">((</span><span class="nx">to</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ✅ This will work because the router starts its navigation after
</span><span class="c1"></span>  <span class="c1">// the router is installed and pinia will be installed too
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">useStore</span><span class="p">()</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">requiresAuth</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">store</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;/login&#39;</span>
<span class="p">})</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="at-root-使用css预处理器写css时缩小嵌套层级-a-hrefcatalogue--a"><code>@at-root</code> 使用css预处理器写css时缩小嵌套层级 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<blockquote>
<p>嵌套过深</p>
</blockquote>
<ul>
<li>css是从右到左解析的，所以层数越多对于解析会越不利</li>
<li>后代选择器会增加样式权重，造成样式权重越来越高的恶性循环</li>
<li>滥用 less sass 的嵌套写法会让代码不易于阅读</li>
</ul>
<blockquote>
<p><strong>别让你的嵌套层级超过四层，不然就重构</strong></p>
</blockquote>
<ul>
<li>在Sass中还提供了一个<code>@at-root</code> 的功能，可以让你直接跳出去。这样也可以避免嵌套层级过深</li>
<li>命名方式上可以解决，如：BEM</li>
<li>提取公用逻辑</li>
</ul>
<blockquote>
<p><code>@at-root</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="c1">// 首先定义通用混入样式
</span><span class="c1"></span><span class="k">@mixin</span><span class="nf"> root</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">@at-root</span> <span class="nc">.</span><span class="si">#{</span><span class="nv">$name</span><span class="si">}</span> <span class="p">{</span>
        <span class="k">@content</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 随处使用
</span><span class="c1"></span><span class="k">@include</span><span class="nd"> root</span><span class="p">(</span><span class="n">video-player</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">@include</span><span class="nd"> root</span><span class="p">(</span><span class="n">video-player-core</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">@include</span><span class="nd"> root</span><span class="p">(</span><span class="n">video-player-bar</span><span class="p">)</span> <span class="p">{</span>

        <span class="nc">.e-volume</span><span class="p">{}</span>
        <span class="nc">.e-play</span><span class="p">{}</span>
        <span class="nc">.e-fullscreen</span><span class="p">{</span>

            <span class="k">@include</span><span class="nd"> root</span><span class="p">(</span><span class="n">fullscreen-xxx</span><span class="p">)</span> <span class="p">{</span>
                
                <span class="nc">.x-date</span><span class="p">{}</span>
                <span class="nc">.x-test</span><span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><a href="https://www.cnblogs.com/ibabyli/p/9871609.html">scss-@at-root</a></li>
<li><a href="https://blog.csdn.net/lznism666/article/details/108223416">scss中@at-root的使用 + BEM</a></li>
<li><a href="https://www.sass.hk/skill/sass40.html">Sass＠at-root</a></li>
<li><a href="https://www.sasscss.com/documentation/at-rules/at-root">@at-root</a></li>
<li><a href="https://sass-lang.cn/documentation/at-rules/at-root">sass @at-root</a></li>
</ul>
<blockquote>
<p>相似问题：<a href="https://segmentfault.com/q/1010000038979707">前端路由多层级嵌套太深且重复的问题</a></p>
</blockquote>
<hr>
<h2 id="使用引入的组件时报错ts2604-jsx-element-type-xxx-does-not-have-any-construct-or-call-signatures-a-hrefcatalogue--a">使用引入的组件时报错<code>TS2604: JSX element type 'XXX' does not have any construct or call signatures.</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>是因为组件未使用<code>defineComponent</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>改为以下示例，即可</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
 <span class="p">...</span>
<span class="p">});</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>网站搜索只能搜到react的相关内容</p>
</blockquote>
<p><a href="https://stackoverflow.com/questions/53449101/typescript-type-definition-ts2604-jsx-element-type-something-does-not-have-a">https://stackoverflow.com/questions/53449101/typescript-type-definition-ts2604-jsx-element-type-something-does-not-have-a</a> | javascript - Typescript type definition: TS2604: JSX element type &lsquo;something&rsquo; does not have any construct or call signatures - Stack Overflow
<a href="https://segmentfault.com/q/1010000040209283">https://segmentfault.com/q/1010000040209283</a> | 我想在.ts文件中使用JSX.Element对象，要怎么写。 - SegmentFault 思否
<a href="https://www.jianshu.com/p/ece127ffc996">https://www.jianshu.com/p/ece127ffc996</a> | （转载）使用TS报错：TS7026: JSX element implicitly has type ‘any’…处理总结 - 简书
<a href="https://stackoverflow.com/questions/46080760/error-ts2604-jsx-element-type-does-not-have-any-construct-or-call-signatu">https://stackoverflow.com/questions/46080760/error-ts2604-jsx-element-type-does-not-have-any-construct-or-call-signatu</a> | reactjs - Error TS2604: JSX element type &lsquo;&hellip;&rsquo; does not have any construct or call signatures - Stack Overflow
<a href="https://stackoverflow.com/questions/31815633/what-does-the-error-jsx-element-type-does-not-have-any-construct-or-call">https://stackoverflow.com/questions/31815633/what-does-the-error-jsx-element-type-does-not-have-any-construct-or-call</a> | reactjs - What does the error &ldquo;JSX element type &lsquo;&hellip;&rsquo; does not have any construct or call signatures&rdquo; mean? - Stack Overflow
<a href="https://stackoverflow.com/questions/54143658/typescript-ts2604-jsx-element-type-drawer-does-not-have-any-construct-or-call">https://stackoverflow.com/questions/54143658/typescript-ts2604-jsx-element-type-drawer-does-not-have-any-construct-or-call</a> | reactjs - Typescript TS2604: JSX element type &lsquo;Drawer&rsquo; does not have any construct or call signatures - Stack Overflow
<a href="https://stackoverflow.com/questions/53452966/typescript-3-jsx-element-type-component-does-not-have-any-construct-or-call-s">https://stackoverflow.com/questions/53452966/typescript-3-jsx-element-type-component-does-not-have-any-construct-or-call-s</a> | javascript - TypeScript 3: JSX element type &lsquo;Component&rsquo; does not have any construct or call signatures. [2604] - Stack Overflow
<a href="https://stackoverflow.com/questions/34971155/typescript-error-ts2604-how-to-fix">https://stackoverflow.com/questions/34971155/typescript-error-ts2604-how-to-fix</a> | reactjs - Typescript Error: TS2604 - How to fix? - Stack Overflow
<a href="https://github.com/Microsoft/TypeScript-React-Starter/issues/44">https://github.com/Microsoft/TypeScript-React-Starter/issues/44</a> | error TS2604: JSX element type &lsquo;Provider&rsquo; does not have any construct or call signatures. · Issue #44 · microsoft/TypeScript-React-Starter
<a href="https://www.imooc.com/wenda/detail/629578">https://www.imooc.com/wenda/detail/629578</a> | 用于从字符串创建 JSX 元素的正确 TypeScript 类型_慕课猿问</p>
<hr>
<h2 id="setup中写return---jsxdom和在render-return-jsxdom选项中写-a-hrefcatalogue--a"><code>setup()</code>中写<code>return () =&gt; (JsxDOM)</code>和在<code>render() {return (JsxDOM)}</code>选项中写 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>setup()</code>中会覆盖掉<code>render() {return (JsxDOM)}</code></li>
</ul>
<hr>
<h2 id="ide-webstorm-警告-在未导入-react-的情况下使用-jsx-a-hrefcatalogue--a"><code>IDE</code> <code>WebStorm</code> 警告 在未导入 React 的情况下使用 JSX <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><a href="https://www.coder.work/article/5922937">reactjs - 使用jsx不导入react</a></li>
<li>设置中关闭警告即可，React17+ 中无需再提示</li>
<li><a href="https://www.coder.work/article/5919933">reactjs - React JSX 无需导入 React 即可工作</a></li>
<li><a href="https://qa.1r1g.com/sf/ask/4517872831/">无需导入 React 即可使用 JSX</a></li>
<li><a href="https://www.codenong.com/42640636/">关于reactjs：使用JSX react / react-in-jsx-scope时，’React’必须在范围内？</a></li>
<li><a href="https://www.tangshuang.net/4810.html">不引入react的情况下使用JSX</a></li>
<li><a href="https://www.cnblogs.com/Wayou/p/14766109.html">React17 使用 JSX 的情况下无须再显式导入 React</a></li>
<li><a href="http://cn.voidcc.com/question/p-vjdgcncs-qm.html">在没有导入的情况下使用JSX在React中显示图像</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/372100027">React17 使用 JSX 的情况下无须再显式导入 React</a></li>
<li><a href="https://www.zoo.team/article/vue3-jsx">拥抱 Vue 3 系列之 JSX 语法</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37920151">在Vue中使用JSX的正确姿势</a></li>
</ul>
<hr>
<h2 id="引入无props的组件时报错-a-hrefcatalogue--a">引入无<code>props</code>的组件时，报错 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>.tsx</code>文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">render: () =&gt; {
...
    const BlogHeaderDOM = &lt;BlogHeader&gt;&lt;/BlogHeader&gt;
    const BlogFooterDOM = &lt;BlogFooter&gt;&lt;/BlogFooter&gt;
    ...
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>TS2322: Type '{}' is not assignable to type 'IntrinsicAttributes &amp; (Partial&lt;{ [x: number]: string; } | {}&gt; &amp; Omit&lt;(readonly string[] | Readonly&lt;ExtractPropTypes&lt;Readonly&lt;ComponentObjectPropsOptions&lt;Data&gt;&gt;&gt;&gt;) &amp; (VNodeProps &amp; ... 2 more ... &amp; Readonly&lt;...&gt;), never&gt;)'.   Type '{}' is not assignable to type 'IntrinsicAttributes &amp; Partial&lt;{}&gt; &amp; Omit&lt;(readonly string[] | Readonly&lt;ExtractPropTypes&lt;Readonly&lt;ComponentObjectPropsOptions&lt;Data&gt;&gt;&gt;&gt;) &amp; (VNodeProps &amp; ... 2 more ... &amp; Readonly&lt;...&gt;), never&gt;'.     Type '{}' is missing the following properties from type 'Omit&lt;(readonly string[] | Readonly&lt;ExtractPropTypes&lt;Readonly&lt;ComponentObjectPropsOptions&lt;Data&gt;&gt;&gt;&gt;) &amp; (VNodeProps &amp; AllowedComponentProps &amp; ComponentCustomProps &amp; Readonly&lt;...&gt;), never&gt;': concat, indexOf, lastIndexOf, slice, and 17 more. </code></li>
</ul>
<blockquote>
<p>解决方法</p>
</blockquote>
<ul>
<li>添加<code>props</code></li>
</ul>
<hr>
<h2 id="在tsx文件中写点击事件绑定方法时button-onclickxxxbutton-报类型错误-a-hrefcatalogue--a">在<code>tsx</code>文件中写点击事件绑定方法时<code>&lt;Button onClick={xxx}&gt;...&lt;/Button&gt;</code> 报类型错误 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>... is not assignable to type '(((event: MouseEvent) =&gt; void) &amp; ((...args: any[]) =&gt; any)) | undefined'.</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">message</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;ant-design-vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">,</span> <span class="nx">inject</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="s1">&#39;ant-design-vue/dist/antd.css&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogIndex&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">setup</span><span class="p">(</span><span class="cm">/*props, ctx*/</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">popMessage</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">&lt;</span><span class="nt">typeof</span> <span class="na">message</span><span class="p">&gt;(</span><span class="s1">&#39;$message&#39;</span><span class="p">);</span>
    <span class="c1">// noinspection JSXNamespaceValidation
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">    return () =&gt; (
</span><span class="cm">      &lt;Button onClick={()=&gt; {popMessage &amp;&amp; popMessage.error(&#39;这是一条错误消息&#39;, 2)}}&gt;博客首页&lt;/Button&gt;
</span><span class="cm">    );
</span><span class="cm">    */</span>
      <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">popMessage</span> <span class="o">&amp;&amp;</span> <span class="nx">popMessage</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;这是一条错误消息&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}&gt;</span><span class="err">博客首页</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
      <span class="p">)</span>
  <span class="p">},</span>
  <span class="cm">/*
</span><span class="cm">    render() {
</span><span class="cm">      // noinspection JSXNamespaceValidation
</span><span class="cm">      return (
</span><span class="cm">        &lt;&gt;
</span><span class="cm">          &lt;Button onClick={this.popMessage &amp;&amp; this.popMessage.error.bind(this, &#39;这是一条错误消息&#39;, 2)}&gt;博客首页&lt;/Button&gt;
</span><span class="cm">        &lt;/&gt;
</span><span class="cm">      );
</span><span class="cm">    }
</span><span class="cm">  */</span>

<span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>解决方法：<code>&lt;Button onClick={()=&gt; {popMessage &amp;&amp; popMessage.error('这是一条错误消息', 2)}}&gt;博客首页&lt;/Button&gt;</code></li>
<li>必须再套一层箭头函数 <code>Try just wrapping the event handler in a fat arrow function:</code></li>
<li><code>onClick={() =&gt; {addClient()}}</code></li>
<li>参考<a href="https://github.com/apollographql/react-apollo/issues/1841#issuecomment-377811526">github issue: Mutation and TypeScript: Error when using onClick attribute with already declared interface</a></li>
</ul>
<blockquote>
<p>错误的范例</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">message</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;ant-design-vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">defineComponent</span><span class="p">,</span> <span class="nx">inject</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="s1">&#39;ant-design-vue/dist/antd.css&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineComponent</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;BlogIndex&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">setup</span><span class="p">(</span><span class="cm">/*props, ctx*/</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">popMessage</span> <span class="o">=</span> <span class="nx">inject</span><span class="p">&lt;</span><span class="nt">typeof</span> <span class="na">message</span><span class="p">&gt;(</span><span class="s1">&#39;$message&#39;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">popMessageError</span> <span class="o">=</span> <span class="p">(</span><span class="nx">content</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">duration</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">fn</span><span class="o">?:</span> <span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">))</span><span class="o">:</span> <span class="k">void</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">popMessage</span> <span class="o">&amp;&amp;</span> <span class="nx">popMessage</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">popMessageError</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">render() {</span>
    <span class="c1">// noinspection JSXNamespaceValidation
</span><span class="c1"></span>    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;&gt;</span>
        <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">popMessageError</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;这是一条错误消息&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}&gt;</span>
          <span class="err">博客首页</span>
        <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
      <span class="p">&lt;/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

<span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><a href="https://github.com/youzan/vant/blob/dev/packages/vant/src/card/Card.tsx"><code>vant UI</code>的写法</a></p>
</blockquote>
<ul>
<li><code>&lt;a onClick={(event: MouseEvent) =&gt; emit('click-thumb', event)}&gt;...</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="p">...</span>
<span class="nx">render() {</span>
    <span class="c1">// noinspection JSXNamespaceValidation
</span><span class="c1"></span>    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;&gt;</span>
        <span class="p">&lt;</span><span class="nt">Button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{({</span><span class="cm">/*event: MouseEvent*/</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="c1">// this.popMessage &amp;&amp; this.popMessage.error.bind(this, &#39;这是一条错误消息&#39;, 2)
</span><span class="c1"></span>          <span class="k">this</span><span class="p">.</span><span class="nx">popMessage</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">popMessage</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;这是一条错误消息&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="p">}}&gt;</span>
          <span class="err">博客首页</span>
        <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
      <span class="p">&lt;/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="项目根目录不支持驼峰式命名-a-hrefcatalogue--a">项目根目录不支持驼峰式命名 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>使用短杠<code>-</code>连接</li>
</ul>
<h2 id="端口号3000被占用-a-hrefcatalogue--a">端口号<code>3000</code>被占用 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li>重启<code>win10</code>或<code>win11</code>的<code>winnat</code>服务</li>
<li>Open PowerShell as Admin.</li>
<li>stop winnat with command: <code>net stop winnat</code></li>
<li>start winnat again with command: <code>net start winnat</code></li>
<li><a href="https://github.com/vitejs/vite/issues/5801">Error when starting dev server permission denied 127.0.0.1:3000 vite issue</a></li>
</ul>
<blockquote>
<p><a href="https://juejin.cn/pin/7054104979631505416">Windows 杀死占用端口程序的脚本：</a></p>
</blockquote>
<ol>
<li>使用 <code>netstat -aon| findstr 3000</code> 找到对应进程</li>
<li>使用 <code>taskkill /F /PID 8888</code> 杀死对应进程</li>
</ol>
<hr>
<h2 id="误删了idea文件-a-hrefcatalogue--a">误删了<code>.idea</code>文件 <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>.idea</code>文件时<code>webStorm</code>项目的配置文件，删除会导致<code>IDE</code>识别文件目录，和布局错误</li>
<li>如果误删了<code>.idea</code>文件，可以点击文件菜单中的 <strong>修复IDE选项</strong>，根据事件日志中的提示，点选即可，重新加载项目目录</li>
</ul>
<hr>
<h2 id="只用一种运行器-yarn--pnpm-a-hrefcatalogue--a">只用一种运行器 <code>yarn</code> | <code>pnpm</code> <!-- raw HTML omitted --> ⇧ <!-- raw HTML omitted --></h2>
<ul>
<li><code>pnpm</code>为首选，一律使用<code>pnpm</code></li>
<li><code>yarn</code>，混用时，<code>yarn</code>依赖优先</li>
</ul>
<hr>
<ul>
<li><a href="https://juejin.cn/post/7054377889000587301?utm_source=gold_browser_extension">如何在vue项目打包后依然愉快的修改接口地址</a></li>
<li><a href="https://juejin.cn/post/7119455615840092173">Vite真香之路 问题记录</a></li>
</ul>
<hr>
<hr>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2022-06-07
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/frontend/">FrontEnd</a>
          <a href="http://xmasuhai.xyz/tags/project/">Project</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/project/share-blog/%E9%A1%B9%E7%9B%AE-%E5%A4%9A%E4%BA%BA%E5%85%B1%E4%BA%AB%E5%8D%9A%E5%AE%A22.-%E4%BD%BF%E7%94%A8vuex%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD%E5%8F%8Aauth%E6%A8%A1%E5%9D%97/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">【项目 多人共享博客】2. 使用vuex实现登录注册功能及&amp;auth模块</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/project/vueel3/%E9%A1%B9%E7%9B%AE-vue3-%E8%BD%AE%E5%AD%900.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">
            <span class="next-text nav-default">【项目 Vue3 轮子】0.0 项目中遇到的问题</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
