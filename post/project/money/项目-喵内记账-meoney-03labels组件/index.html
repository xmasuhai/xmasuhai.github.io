<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>【项目 喵内记账 Meoney 03】Labels组件 - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="【项目-喵内记账-meoney-03】Labels 组件 大纲链接§ [toc] 知识点 Surround with Emmet快捷键Ctrl Alt t 给每项添加标签li * n iconfont 小技巧，编辑" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.59.1" />


<link rel="canonical" href="http://xmasuhai.xyz/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-03labels%E7%BB%84%E4%BB%B6/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="【项目 喵内记账 Meoney 03】Labels组件" />
<meta property="og:description" content="【项目-喵内记账-meoney-03】Labels 组件 大纲链接§ [toc] 知识点 Surround with Emmet快捷键Ctrl Alt t 给每项添加标签li * n iconfont 小技巧，编辑" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-03labels%E7%BB%84%E4%BB%B6/" />
<meta property="article:published_time" content="2021-10-30T12:01:41+08:00" />
<meta property="article:modified_time" content="2022-09-03T10:26:25+08:00" />
<meta itemprop="name" content="【项目 喵内记账 Meoney 03】Labels组件">
<meta itemprop="description" content="【项目-喵内记账-meoney-03】Labels 组件 大纲链接§ [toc] 知识点 Surround with Emmet快捷键Ctrl Alt t 给每项添加标签li * n iconfont 小技巧，编辑">


<meta itemprop="datePublished" content="2021-10-30T12:01:41&#43;08:00" />
<meta itemprop="dateModified" content="2022-09-03T10:26:25&#43;08:00" />
<meta itemprop="wordCount" content="8609">



<meta itemprop="keywords" content="FrontEnd,Project,money," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【项目 喵内记账 Meoney 03】Labels组件"/>
<meta name="twitter:description" content="【项目-喵内记账-meoney-03】Labels 组件 大纲链接§ [toc] 知识点 Surround with Emmet快捷键Ctrl Alt t 给每项添加标签li * n iconfont 小技巧，编辑"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">【项目 喵内记账 Meoney 03】Labels组件</h1>
      
      <div class="post-meta">
        <time datetime="2021-10-30" class="post-time">
          2021-10-30
        </time>
        <div class="post-category">
            
          </div>
        <span class="more-meta"> 约 8609 字 </span>
          <span class="more-meta"> 预计阅读 18 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#项目-喵内记账-meoney-03-labels-组件">【项目-喵内记账-meoney-03】Labels 组件</a>
<ul>
<li><a href="#labels-vue-之-html"><code>Labels.vue</code> 之 <code>HTML</code></a></li>
<li><a href="#labels-vue-之-scss-样式"><code>Labels.vue</code> 之 SCSS 样式</a></li>
<li><a href="#新建标签功能">新建标签功能</a></li>
<li><a href="#编辑-删除标签功能">编辑/删除标签功能</a>
<ul>
<li><a href="#editlabel-vue-vue-router"><code>EditLabel.vue</code> &amp; <code>Vue Router</code></a></li>
<li><a href="#动态子路由">动态子路由</a></li>
</ul></li>
<li><a href="#如何封装通用组件">如何封装通用组件</a>
<ul>
<li><a href="#在-editlable-vue-里复用原本-notes-vue-中的-input-标签">在<code>EditLable.vue</code>里复用原本<code>Notes.vue</code>中的<code>&lt;input&gt;</code>标签</a></li>
<li><a href="#添加删除按钮前-可封装-button-vue-按钮组件">添加删除按钮前，可封装<code>Button.vue</code>按钮组件</a></li>
<li><a href="#相应地修改-lable-vue">相应地修改<code>Lable.vue</code></a></li>
<li><a href="#editlabel-vue-添加返回功能"><code>EditLabel.vue</code> 添加返回功能</a></li>
</ul></li>
<li><a href="#editlabel-vue-之-scss"><code>EditLabel.vue</code> 之 SCSS</a></li>
<li><a href="#editlabel-vue-功能实现"><code>EditLabel.vue</code> 功能实现</a></li>
<li><a href="#id-生成器"><code>id</code> 生成器</a></li>
<li><a href="#纠错">纠错</a>
<ul>
<li><a href="#formitem-vue-纠错"><code>FormItem.vue</code> 纠错</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h1 id="项目-喵内记账-meoney-03-labels-组件">【项目-喵内记账-meoney-03】Labels 组件</h1>

<blockquote>
<p>大纲链接<a id="catalogue" href="#catalogue" > § </a></p>
</blockquote>

<p>[toc]</p>

<hr />

<blockquote>
<p>知识点</p>
</blockquote>

<ul>
<li><code>Surround with Emmet</code>快捷键<code>Ctrl Alt t</code> 给每项添加标签<code>li * n</code></li>
<li><code>iconfont</code> 小技巧，编辑 <code>SVG</code></li>
<li><code>custom.d.ts</code> 怎么用</li>
<li><code>@click.native</code> 怎么用</li>
<li><code>Vue Router</code> 怎么用</li>
<li><code>props</code> 怎么用</li>
<li>每次完成一小节都要提交代码</li>
</ul>

<hr />

<h2 id="labels-vue-之-html"><code>Labels.vue</code> 之 <code>HTML</code></h2>

<ul>
<li>去<code>IconFont</code>下载一个右箭头图标，使用封装好的<code>&lt;Icon/&gt;</code>全局组件

<ul>
<li>查看 <a href="https://xmasuhai.xyz/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-01%E5%AF%BC%E8%88%AA%E6%A0%8F/#%E5%B0%81%E8%A3%85-iconvue-%E7%BB%84%E4%BB%B6-a-hrefcatalogue--a">封装 Icon 组件</a></li>
</ul></li>

<li><p>先写死大致的结构</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ol</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">衣</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">食</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">住</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">行</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">新建标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h2 id="labels-vue-之-scss-样式"><code>Labels.vue</code> 之 SCSS 样式</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="k">@import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="nc">.labels</span> <span class="p">{</span>
  <span class="nc">.tags</span> <span class="p">{</span>
    <span class="nt">background</span><span class="nd">:</span> <span class="nt">white</span><span class="p">;</span>
    <span class="nt">font-size</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
    <span class="nt">padding-left</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
    <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
      <span class="nt">min-height</span><span class="nd">:</span> <span class="nt">44px</span><span class="p">;</span>
      <span class="nt">display</span><span class="nd">:</span> <span class="nt">flex</span><span class="p">;</span>
      <span class="nt">align-items</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
      <span class="nt">justify-content</span><span class="nd">:</span> <span class="nt">space-between</span><span class="p">;</span>
      <span class="nt">border-bottom</span><span class="nd">:</span> <span class="nt">1px</span> <span class="nt">solid</span> <span class="nn">#e6e6e6</span><span class="p">;</span>
      <span class="o">&gt;</span> <span class="nt">span</span> <span class="p">{</span>
        <span class="c1">// text overflow mixins
</span><span class="c1"></span>        <span class="k">@include</span><span class="nd"> multiline-ellipsis</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">44</span><span class="kt">px</span><span class="o">,</span> <span class="mi">4</span><span class="kt">em</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="o">&gt;</span> <span class="nt">svg</span> <span class="p">{</span>
        <span class="nt">font-size</span><span class="nd">:</span> <span class="nt">24px</span><span class="p">;</span>
        <span class="nt">color</span><span class="nd">:</span> <span class="nn">#666</span><span class="p">;</span>
        <span class="nt">margin-right</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="nc">.createTag</span> <span class="p">{</span>
    <span class="nt">background</span><span class="nd">:</span> <span class="nn">#767676</span><span class="p">;</span>
    <span class="nt">color</span><span class="nd">:</span> <span class="nn">#fff</span><span class="p">;</span>
    <span class="nt">border-radius</span><span class="nd">:</span> <span class="nt">4px</span><span class="p">;</span>
    <span class="nt">height</span><span class="nd">:</span> <span class="nt">40px</span><span class="p">;</span>
    <span class="nt">padding</span><span class="nd">:</span> <span class="nt">0</span> <span class="nt">16px</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nt">-wrapper</span> <span class="p">{</span>
      <span class="nt">text-align</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
      <span class="nt">padding</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
      <span class="nt">margin-top</span><span class="nd">:44-16px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="cm">/*
</span><span class="cm">    .createTag-wrapper{
</span><span class="cm">      text-align: center;
</span><span class="cm">      padding: 16px;
</span><span class="cm">      margin-top:44-16px;
</span><span class="cm">      .createTag {
</span><span class="cm">        background: #767676;
</span><span class="cm">        color: #fff;
</span><span class="cm">        border-radius: 4px;
</span><span class="cm">        height: 40px;
</span><span class="cm">        padding: 0 16px;
</span><span class="cm">        &amp;-wrapper {
</span><span class="cm">        // 以下样式无效
</span><span class="cm">          text-align: center;
</span><span class="cm">          padding: 16px;
</span><span class="cm">          margin-top:44-16px;
</span><span class="cm">          }
</span><span class="cm">        }
</span><span class="cm">    }
</span><span class="cm">    */</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>&lt;button&gt;&lt;/button&gt;</code>为内联元素，居中，<code>text-align: center;</code>加到父元素上</li>
<li><code>padding</code>没有<code>margin</code>的上下合并问题，但会影响<code>background</code>的范围</li>
<li><code>SCSS</code> 可以在子类中写父类的样式 <code>.child { &amp;-father {...}}</code>，但如果子类已经写在父类的嵌套中，这种写法无效</li>
<li>使用最小高度限制每行的高度</li>
<li>显示字数最多3个，多余的用<code>...</code></li>
</ul>

<blockquote>
<p><code>global.scss</code>中写<code>@mixin multiline-ellipsis</code>单行超出文字省略样式</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="c1">// ...
</span><span class="c1">// mixins text overflow
</span><span class="c1"></span><span class="k">@mixin</span><span class="nf"> multiline-ellipsis</span><span class="p">(</span><span class="nv">$line</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span> <span class="nv">$line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.6</span><span class="kt">em</span><span class="o">,</span> <span class="nv">$max-width</span><span class="o">:</span> <span class="mi">5</span><span class="kt">em</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//white-space: nowrap;
</span><span class="c1"></span>  <span class="nt">word-break</span><span class="nd">:</span> <span class="nt">break-word</span><span class="p">;</span>
  <span class="nt">overflow</span><span class="nd">:</span> <span class="nt">hidden</span><span class="p">;</span>
  <span class="nt">text-overflow</span><span class="nd">:</span> <span class="nt">ellipsis</span><span class="p">;</span>
  <span class="nt">display</span><span class="nd">:</span> <span class="nt">-webkit-box</span><span class="p">;</span>
  <span class="nt">-webkit-line-clamp</span><span class="nd">:</span> <span class="err">$</span><span class="nt">line</span><span class="p">;</span>
  <span class="nt">-webkit-box-orient</span><span class="nd">:</span> <span class="nt">vertical</span><span class="p">;</span>
  <span class="nt">line-height</span><span class="nd">:</span> <span class="err">$</span><span class="nt">line-height</span><span class="p">;</span>
  <span class="nt">max-height</span><span class="nd">:</span> <span class="err">$</span><span class="nt">line-height</span> <span class="o">*</span> <span class="err">$</span><span class="nt">line</span><span class="p">;</span>
  <span class="nt">max-width</span><span class="nd">:</span> <span class="err">$</span><span class="nt">max-width</span><span class="p">;</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>reset.scss</code></p>
</blockquote>

<ul>
<li>由于多次用到<code>border: none;</code>，写到<code>reset.scss</code></li>
</ul>

<hr />

<h2 id="新建标签功能">新建标签功能</h2>

<ul>
<li>原来存储的标签是写死在数据中的<code>tags = ['衣', '食', '住', '行', '理财'];</code></li>
<li>需要另外的<code>Model</code>来存储添加的标签</li>
<li>新建<code>models</code>目录，存放所有<code>Model</code>相关数据：<code>recordListModel.ts</code>、<code>tagListModel.ts</code></li>
<li>两个<code>Model</code>文件结构几乎一样，可提取<code>Mixins</code></li>
</ul>

<blockquote>
<p><code>tagListModel.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;tagList&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">tagListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">clone</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">RecordItem</span> <span class="o">|</span> <span class="nx">RecordItem</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span> <span class="kr">as</span> <span class="nx">RecordItem</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">fetchData() {</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">RecordItem</span><span class="p">[];</span>
  <span class="p">},</span>
  <span class="nx">saveData</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">RecordItem</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">tagListModel</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>修改<code>Money.vue</code></p>
</blockquote>

<ul>
<li>引入 Model 数据 <code>import tagListModel from '@/models/tagListModel';</code></li>
<li>声明标签列表 <code>const tagList = tagListModel.fetchData();</code></li>

<li><p>替换原来写死的数据 <code>tags = tagList;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="c1">// ...
</span><span class="c1"></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">recordListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/recordListModel&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">recordList</span> <span class="o">=</span> <span class="nx">recordListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">tagList</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
<span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
<span class="p">}</span>
<span class="p">})</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
<span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagList</span><span class="p">;</span>
<span class="nx">record</span><span class="o">:</span> <span class="nx">RecordItem</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
<span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
<span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="nx">createdAt</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
<span class="p">};</span>

<span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">saveRecord</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">clonedRecord</span> <span class="o">=</span> <span class="nx">recordListModel</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">);</span>
<span class="nx">clonedRecord</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">clonedRecord</span><span class="p">);</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span>
<span class="nx">onRecordeChange</span><span class="p">()</span> <span class="p">{</span>
<span class="nx">recordListModel</span><span class="p">.</span><span class="nx">saveData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="err">// ...</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>同样地引入到<code>Lables.vue</code></p>
</blockquote>

<ul>
<li>先获取标签数据<code>tagListModel.fetchData();</code></li>

<li><p>内部数据引用<code>tagListModel.data</code>，不用去维护操作<code>tags</code>，所有数据让<code>Model</code>控制</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="c1">//...
</span><span class="c1"></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel.ts&#39;</span><span class="p">;</span>

<span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>

<span class="err">@</span><span class="nx">Component</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Labels</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
<span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

<span class="nx">createTag</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="s1">&#39;请输入标签名&#39;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">message</span> <span class="o">===</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;标签名重复了&#39;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">message</span> <span class="o">===</span> <span class="s1">&#39;success&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;添加成功&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>判断标签的内容是否存在</p></li>

<li><p>判断标签是否唯一</p></li>

<li><p>通过返回提示字符串来判断</p></li>

<li><p>TS 联合类型（字符串的子类型 枚举）可以通过具体的可能值来声明类型，来防止写错</p></li>
</ul>

<blockquote>
<p><code>tagListModel.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;tagList&#39;</span><span class="p">;</span>

<span class="nx">type</span> <span class="nx">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">data</span>: <span class="kt">string</span><span class="p">[];</span>
  <span class="nx">fetchData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kt">string</span><span class="p">[];</span>
  <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
  <span class="nx">saveData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">tagListModel</span>: <span class="kt">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">fetchData() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">saveData() {</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">create</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">saveData</span><span class="p">();</span>
    <span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">tagListModel</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>
<hr />

<h2 id="编辑-删除标签功能">编辑/删除标签功能</h2>

<ul>
<li>在另一个编辑标签页面中实现</li>
<li>实现点击<code>Label.vue</code>中的标签可跳转至标签编辑页面</li>
<li>新建路由<code>/labels/edit</code></li>
<li>新建<code>src/view/EditLabel.vue</code>组件</li>
</ul>

<blockquote>
<p><code>src/router/index.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">VueRouter</span><span class="p">,</span> <span class="p">{</span><span class="nx">RouteConfig</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Money</span> <span class="nx">from</span> <span class="s1">&#39;@/views/Money.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Labels</span> <span class="nx">from</span> <span class="s1">&#39;@/views/Labels.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Statistics</span> <span class="nx">from</span> <span class="s1">&#39;@/views/Statistics.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">NotFound</span> <span class="nx">from</span> <span class="s1">&#39;@/views/NotFound.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">EditLabel</span> <span class="nx">from</span> <span class="s1">&#39;@/views/EditLabel.vue&#39;</span><span class="p">;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueRouter</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">routes</span>: <span class="kt">Array</span><span class="o">&lt;</span><span class="nx">RouteConfig</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
    <span class="nx">redirect</span><span class="o">:</span> <span class="s1">&#39;/money&#39;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/money&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">Money</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/labels&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">Labels</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/statistics&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">Statistics</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/labels/edit&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">EditLabel</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">NotFound</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VueRouter</span><span class="p">({</span>
  <span class="nx">routes</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="editlabel-vue-vue-router"><code>EditLabel.vue</code> &amp; <code>Vue Router</code></h3>

<ul>
<li>每个循环渲染的标签需要一个<code>id</code>，通常是取自数据库中的，本地版将不重复的<code>name</code>当做<code>id</code></li>
<li>在<code>tagListModel.ts</code>中声明<code>Tag</code>类型，<code>data</code>变为<code>Tag[]</code>，<code>fetchData</code>获取<code>Tag[]</code></li>
</ul>

<blockquote>
<p><code>tagListModel.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;tagList&#39;</span><span class="p">;</span>
<span class="nx">type</span> <span class="nx">Tag</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">id</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">type</span> <span class="nx">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">data</span>: <span class="kt">Tag</span><span class="p">[];</span>
  <span class="nx">fetchData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Tag</span><span class="p">[];</span>
  <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
  <span class="nx">saveData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">tagListModel</span>: <span class="kt">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">fetchData() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">saveData() {</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">create</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this.data = [{id: &#39;1&#39;, name: &#39;1&#39;}, {id: &#39;2&#39;, name: &#39;2&#39;}]
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">names</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span> <span class="o">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">names</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">id</span>: <span class="kt">name</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">name</span><span class="p">});</span> <span class="c1">// 将不重复的数据推入，后期改为id生成器
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">saveData</span><span class="p">();</span>
    <span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">tagListModel</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>Lables.vue</code>中相应的模板数据<code>{{tag}}</code>和<code>:key</code>也改变</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;labels&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;tag in tags&#34; :key=&#34;tag.id&#34;&gt;
</span><span class="s">        &lt;span&gt;{{ tag.name }}&lt;/span&gt;
</span><span class="s">        &lt;Icon name=&#34;money_right&#34;/&gt;
</span><span class="s">      &lt;/li&gt;
</span><span class="s">    &lt;/ul&gt;
</span><span class="s">    &lt;div class=&#34;createTag-wrapper&#34;&gt;
</span><span class="s">      &lt;button class=&#34;createTag&#34; @click=&#34;createTag&#34;</span><span class="p">&gt;</span><span class="na">新建标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="na">...</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="动态子路由">动态子路由</h3>

<ul>
<li>点击<code>Label.vue</code>中的标签跳转至编辑页面</li>
<li>路由到<code>../labels/edit/1</code></li>
<li><code>'/labels/edit/:id'</code>中的<code>:id</code>表示占位</li>
<li><a href="https://router.vuejs.org/zh/guide/advanced/data-fetching.html#%E5%AF%BC%E8%88%AA%E5%AE%8C%E6%88%90%E5%90%8E%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><code>Vue-Router 数据获取</code>文档</a></li>
</ul>

<blockquote>
<p><code>src/router/index.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="p">...;</span>
<span class="kr">import</span> <span class="nx">EditLabel</span> <span class="nx">from</span> <span class="s1">&#39;@/views/EditLabel.vue&#39;</span><span class="p">;</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">VueRouter</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">routes</span>: <span class="kt">Array</span><span class="o">&lt;</span><span class="nx">RouteConfig</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">...</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/labels/edit/:id&#39;</span><span class="p">,</span>
    <span class="nx">component</span>: <span class="kt">EditLabel</span>
  <span class="p">},</span>
<span class="p">...</span>
<span class="p">];</span>

<span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VueRouter</span><span class="p">({</span>
  <span class="nx">routes</span>
<span class="p">});</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">router</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div>
<hr />

<blockquote>
<p><code>EditLable.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;edit&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span><span class="p">/&gt;</span>
      <span class="nx">编辑标签</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">EditLabel</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
    <span class="kr">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="c1">// const tag = tags.filter(t =&gt; t.id === id)[0];
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">t</span> <span class="p">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/404&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">edit</span> <span class="p">{</span>
  <span class="o">&gt;</span> <span class="nx">svg</span> <span class="p">{</span>
    <span class="nx">transform</span><span class="o">:</span> <span class="nx">rotate3d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="nx">deg</span><span class="p">);</span>
    <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">24</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">666</span><span class="p">;</span>
    <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>钩子<code>created(){}</code></li>
<li><code>this.$route</code>路由相关：可获取路由相关信息

<ul>
<li>是由库中<code>vue/types/vue.d.ts</code>中声明而来 <code>ctrl</code>+ 点击查看源文件</li>
<li>查看<code>console.log(this.$route.params)</code></li>
<li>浏览器地址栏输入<code>http://localhost:8080/#/labels/edit/1</code></li>
<li>控制台显示<code>{id: &quot;1&quot;}</code></li>
<li>将路由改为<code>path: '/labels/edit/:fuck',</code></li>
<li>控制台显示<code>{fuck: &quot;1&quot;}</code></li>
</ul></li>
<li>获取<code>id</code>（动态无需声明类型）<code>const id = this.$route.params.id;</code></li>
<li>获取标签数据

<ul>
<li>更新数据<code>tagListModel.fetchData();</code></li>
<li>获取<code>const tags = tagListModel.data;</code></li>
<li>获取<code>id</code>对应的标签<code>const tag = tags.filter(t =&gt; t.id === id)[0];</code></li>
<li>也可用<code>const tag = tags.find(t =&gt; t.id === id);</code>，但可能会遍历到稀疏数组的未定义值，效率没<code>filter</code>高-</li>
</ul></li>
<li><code>this.$router</code>路由器相关：进行路由的相关操作（转发、重定向等）

<ul>
<li>重定向<code>this.$router.push('/404');</code>不太好，回退时会重复重定向</li>
<li>改为<code>this.$router.replace('/404');</code></li>
</ul></li>
</ul>

<hr />

<h2 id="如何封装通用组件">如何封装通用组件</h2>

<ul>
<li>封装原本<code>Notes.vue</code>中的<code>&lt;input&gt;</code>标签</li>
<li>封装<code>Button.vue</code>按钮组件</li>
</ul>

<h3 id="在-editlable-vue-里复用原本-notes-vue-中的-input-标签">在<code>EditLable.vue</code>里复用原本<code>Notes.vue</code>中的<code>&lt;input&gt;</code>标签</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_notes&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
             <span class="na">v</span><span class="nt">-model</span><span class="err">=&#34;</span><span class="na">inputValue</span><span class="err">&#34;</span>
             <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入备注&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>封装为外部数据<code>@Prop()</code> 自动引入<code>import {Component, Prop, Watch} from 'vue-property-decorator';</code>

<ul>
<li>字段名 <code>@Prop({required: true}) fieldName!: string;</code> (必要，无初始值，类型为字符串)</li>
<li>模板中改为<code>&lt;span class=&quot;name&quot;&gt;{{this.fieldName}}&lt;/span&gt;</code></li>
<li>值由外部组件传入<code>&lt;Notes field-name=&quot;备注&quot; @update:value=&quot;onUpdateNotes&quot;/&gt;</code><br /></li>
<li><code>placeholder</code>占位符 <code>@Prop({default: ''}) placeholder?: string;</code>(非必要，可以无初始值，类型为字符串，可能为空值)</li>
<li>模板中改为 <code>&lt;input type=&quot;text&quot; v-model=&quot;inputValue&quot; :placeholder=&quot;this.placeholder&quot;/&gt;</code></li>
<li>值由外部组件传入 <code>&lt;Notes field-name=&quot;标签名&quot; placeholder=&quot;在这里输入标签名&quot;/&gt;</code></li>
</ul></li>
<li>由于<code>Notes.vue</code>组件的作用已经改变，需重命名为<code>FormItem.vue</code>

<ul>
<li>重构之重命名<code>FormItem.vue</code></li>
<li>重构之组件内部的类<code>export default class FormItem extends Vue {...}</code></li>
<li>注意原来引用<code>Notes.vue</code>的组件中<code>@Component({components: {Notes: FormItem} })</code>做了映射</li>
<li>手动全局搜索<code>Notes</code>，全部改为<code>FormItem</code></li>
</ul></li>
<li>注意到一个Bug: 在<code>Numpad</code>中输入完所有信息后点击 <code>OK</code> 未清空 备注信息</li>
</ul>

<hr />

<h3 id="添加删除按钮前-可封装-button-vue-按钮组件">添加删除按钮前，可封装<code>Button.vue</code>按钮组件</h3>

<ul>
<li>创建<code>src/components/Button.vue</code></li>
<li>点击事件失效：目前绑定事件在<code>&lt;Button&gt;</code>上，用户点击的是<code>&lt;button&gt;</code>

<ul>
<li>需要传递点击事件，点击<code>&lt;button&gt;</code>时触发<code>&lt;Button&gt;</code>上的事件</li>
<li><code>Button.vue</code>中的<code>&lt;button&gt;</code>标签传递触发事件到外部<code>@click=&quot;$emit('click', $event)&quot;</code></li>
<li>当<code>&lt;button&gt;</code>被点击时，事件传递至<code>&lt;Button&gt;</code></li>
</ul></li>
</ul>

<blockquote>
<p><code>src/components/Button.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;button&#34;</span>
          <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;$emit(&#39;click&#39;, $event)&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Button</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>

<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">button</span> <span class="p">{</span>
  <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="mi">767676</span><span class="p">;</span>
  <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
  <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
  <span class="o">&amp;-</span><span class="nx">wrapper</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
    <span class="nx">padding</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">44</span><span class="o">-</span><span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>处理<code>&lt;button&gt;</code>其他事件

<ul>
<li>怎么用自定义组件模拟一个真实<code>&lt;button&gt;</code></li>
<li>可以不用一个一个地暴露事件出去</li>
<li>在父组件上使用<code>.native</code>修饰符 <code>&lt;Button class=&quot;createTag&quot; @click.native=&quot;createTag&quot;&gt;新建标签&lt;/Button&gt;</code></li>
<li>可省略以上子组件内传递原生事件的过程: <code>@click=&quot;$emit('click', $event)&quot;</code></li>
</ul></li>
</ul>

<h3 id="相应地修改-lable-vue">相应地修改<code>Lable.vue</code></h3>

<ul>
<li>原来的<code>&lt;button class=&quot;createTag&quot; @click=&quot;createTag&quot;&gt;新建标签&lt;/button&gt;</code>改为<code>&lt;Button class=&quot;createTag&quot; @click=&quot;createTag&quot;&gt;新建标签&lt;/Button&gt;</code>

<ul>
<li>注意<code>webStorm</code>的代码提示与自动引入<code>import Button from '@/components/Button.vue';</code></li>
<li>自动引入装饰器<code>@Component({ components: {Button} })</code></li>
<li>首先删除小写的字符<code>button</code>，在删除的地方输入<code>Button</code>，按<code>Tab</code>自动补全</li>
</ul></li>

<li><p>删除原来<code>&lt;button&gt;</code>的样式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;labels&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;tag in tags&#34; :key=&#34;tag.id&#34;&gt;
</span><span class="s">    &lt;router-link class=&#34;tag&#34; :to=&#34;`/labels/edit/${tag.id}`&#34;&gt;
</span><span class="s">      &lt;span class=&#34;tag-text&#34;&gt;{{ tag.name }}&lt;/span&gt;
</span><span class="s">      &lt;Icon class=&#34;tag-icon&#34; name=&#34;money_right&#34;/&gt;
</span><span class="s">    &lt;/router-link&gt;
</span><span class="s">  &lt;/li&gt;
</span><span class="s">&lt;/ul&gt;
</span><span class="s">&lt;div class=&#34;createTag-wrapper&#34;&gt;
</span><span class="s">  &lt;Button @click.native=&#34;createTag&#34;&gt;新建标签&lt;/Button&gt;
</span><span class="s">&lt;/div&gt;
</span><span class="s">&lt;/Layout&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="na">tagListModel</span> <span class="na">from</span> <span class="err">&#39;@/</span><span class="na">models</span><span class="err">/</span><span class="na">tagListModel.ts</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="na">Button</span> <span class="na">from</span> <span class="err">&#39;@/</span><span class="na">components</span><span class="err">/</span><span class="na">Button.vue</span><span class="err">&#39;;</span>

<span class="na">tagListModel.fetchData</span><span class="err">();</span>
<span class="err">@</span><span class="na">Component</span><span class="err">(</span><span class="p">{</span>
<span class="na">components</span><span class="o">:</span> <span class="p">{</span><span class="na">Button</span><span class="p">}</span>
<span class="p">}</span><span class="err">)</span>

<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Labels</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
<span class="na">tags </span><span class="o">=</span> <span class="na">tagListModel.data</span><span class="err">;</span> <span class="err">//</span> <span class="err">[</span><span class="p">{</span><span class="na">id</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">1</span><span class="err">&#39;,</span> <span class="na">name</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">1</span><span class="err">&#39;</span><span class="p">}</span><span class="err">,</span> <span class="p">{</span><span class="na">id</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">2</span><span class="err">&#39;,</span> <span class="na">name</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">2</span><span class="err">&#39;</span><span class="p">}</span><span class="err">]</span>

<span class="na">createTag</span><span class="err">()</span> <span class="p">{</span>
<span class="na">const</span> <span class="na">name </span><span class="o">=</span> <span class="na">window.prompt</span><span class="err">(&#39;</span><span class="na">请输入标签名</span><span class="err">&#39;);</span>
<span class="na">if</span> <span class="err">(</span><span class="na">name</span><span class="err">)</span> <span class="p">{</span>
  <span class="na">const</span> <span class="na">message </span><span class="o">=</span> <span class="na">tagListModel.create</span><span class="err">(</span><span class="na">name</span><span class="err">);</span>
  <span class="na">if</span> <span class="err">(</span><span class="na">message </span><span class="o">=</span><span class="err">==</span> <span class="err">&#39;</span><span class="na">duplicated</span><span class="err">&#39;)</span> <span class="p">{</span>
    <span class="na">window.alert</span><span class="err">(&#39;</span><span class="na">标签名重复了</span><span class="err">&#39;);</span>
  <span class="p">}</span> <span class="na">else</span> <span class="na">if</span> <span class="err">(</span><span class="na">message </span><span class="o">=</span><span class="err">==</span> <span class="err">&#39;</span><span class="na">success</span><span class="err">&#39;)</span> <span class="p">{</span>
    <span class="na">window.alert</span><span class="err">(&#39;</span><span class="na">添加成功</span><span class="err">&#39;);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">labels</span> <span class="p">{</span>
<span class="p">.</span><span class="nx">tags</span> <span class="p">{</span>
<span class="nx">background</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
<span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
<span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="nx">li</span> <span class="p">{</span>
  <span class="o">&gt;</span> <span class="p">.</span><span class="nx">tag</span> <span class="p">{</span>
    <span class="nx">min</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">44</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
    <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
    <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="o">:</span> <span class="nx">space</span><span class="o">-</span><span class="nx">between</span><span class="p">;</span>
    <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">e6e6e6</span><span class="p">;</span>
    <span class="o">&gt;</span> <span class="nx">span</span> <span class="p">{</span>
      <span class="c1">// text overflow mixins
</span><span class="c1"></span>      <span class="err">@</span><span class="nx">include</span> <span class="nx">multiline</span><span class="o">-</span><span class="nx">ellipsis</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">44</span><span class="nx">px</span><span class="p">,</span> <span class="mi">4</span><span class="nx">em</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="o">&gt;</span> <span class="nx">svg</span> <span class="p">{</span>
      <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">24</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">666</span><span class="p">;</span>
      <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h3 id="editlabel-vue-添加返回功能"><code>EditLabel.vue</code> 添加返回功能</h3>

<ul>
<li><a href="https://router.vuejs.org/zh/api/#router-back"><code>this.$router.back()</code></a></li>
<li>相同原理，点击事件失效：目前绑定事件在<code>&lt;Icon/&gt;</code>上，用户点击的是<code>&lt;svg&gt;</code>

<ul>
<li>需要传递点击事件，点击<code>&lt;svg&gt;</code>时触发组件<code>&lt;Icon/&gt;</code>上的事件</li>
<li><code>Icon.vue</code>中的<code>&lt;svg&gt;</code>标签传递触发事件到外部<code>@click=&quot;$emit('click', $event)&quot;</code></li>
<li>当<code>&lt;svg&gt;</code>被点击时，事件传递至组件<code>&lt;Icon/&gt;</code></li>
</ul></li>

<li><p>处理<code>&lt;svg&gt;</code>其他事件</p>

<ul>
<li>可以不用一个一个地暴露不同类型的事件出去</li>
<li>在父组件上使用<code>.native</code>修饰符 <code>&lt;Icon @click.native=&quot;goBack&quot;/&gt;</code></li>

<li><p>可省略以上子组件内传递原生事件的过程: <code>@click=&quot;$emit('click', $event)&quot;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;headerBar&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-icon&#34;</span>
    <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span>
    <span class="nt">@clcik.native</span><span class="s">=&#34;goBack&#34;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">编辑标签</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">FormItem</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-item&#34;</span>
      <span class="na">field</span><span class="nt">-name</span><span class="err">=&#34;</span><span class="na">标签名</span><span class="err">&#34;</span>           
      <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入标签名&#34;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;button-wrapper&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Button</span><span class="p">&gt;</span><span class="nx">删除标签</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel.ts&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">FormItem</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/FormItem.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Button.vue&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
<span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">FormItem</span><span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">EditLabel</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
<span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="c1">// const tag = tags.filter(t =&gt; t.id === id)[0];
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">t</span> <span class="p">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/404&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="nx">goBack</span><span class="p">()</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="err">// ...</span></code></pre></td></tr></table>
</div>
</div></li>
</ul></li>
</ul>

<hr />

<h2 id="editlabel-vue-之-scss"><code>EditLabel.vue</code> 之 SCSS</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="nc">.headerBar</span> <span class="p">{</span>
  <span class="nt">text-align</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
  <span class="nt">font-size</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
  <span class="nt">padding</span><span class="nd">:</span> <span class="nt">12px</span> <span class="nt">16px</span><span class="p">;</span>
  <span class="nt">background</span><span class="nd">:</span> <span class="nn">#fff</span><span class="p">;</span>
  <span class="nt">display</span><span class="nd">:</span> <span class="nt">flex</span><span class="p">;</span>
  <span class="nt">align-items</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
  <span class="nt">justify-content</span><span class="nd">:</span> <span class="nt">space-between</span><span class="p">;</span>
  <span class="o">&gt;</span> <span class="nc">.left-icon</span> <span class="p">{</span>
    <span class="nt">transform</span><span class="nd">:</span> <span class="nt">rotate3d</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span> <span class="nt">1</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">180deg</span><span class="o">)</span><span class="p">;</span>
    <span class="nt">color</span><span class="nd">:</span> <span class="nn">#666</span><span class="p">;</span>
    <span class="nt">font-size</span><span class="nd">:</span> <span class="nt">24px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="o">&gt;</span> <span class="nc">.title</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="k">&amp;</span><span class="nd">::after</span> <span class="p">{</span>
    <span class="nt">content</span><span class="nd">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nt">display</span><span class="nd">:</span> <span class="nt">inline</span><span class="p">;</span>
    <span class="nt">width</span><span class="nd">:</span> <span class="nt">24px</span><span class="p">;</span>
    <span class="nt">height</span><span class="nd">:</span> <span class="nt">24px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="nc">.form-item</span> <span class="p">{</span>
  <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">8px</span><span class="p">;</span>
  <span class="nt">background</span><span class="nd">:</span> <span class="nn">#fff</span><span class="p">;</span>
  <span class="nt">-webkit-box-shadow</span><span class="nd">:</span> <span class="nt">0</span> <span class="nt">1px</span> <span class="nt">1px</span> <span class="nt">0</span> <span class="nn">#BCBBC1</span><span class="p">;</span>
  <span class="nt">-moz-box-shadow</span><span class="nd">:</span> <span class="nt">0</span> <span class="nt">1px</span> <span class="nt">1px</span> <span class="nt">0</span> <span class="nn">#BCBBC1</span><span class="p">;</span>
  <span class="nt">box-shadow</span><span class="nd">:</span> <span class="nt">0</span> <span class="nt">1px</span> <span class="nt">1px</span> <span class="nt">0</span> <span class="nn">#BCBBC1</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nc">.button-wrapper</span> <span class="p">{</span>
  <span class="nt">text-align</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
  <span class="nt">padding</span><span class="nd">:</span> <span class="nt">16px</span><span class="p">;</span>
  <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">44-16px</span><span class="p">;</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>之后需要抽取顶部栏组件<code>headerBar</code></li>
<li>布局： 让图标绝对定位，让标题居中</li>
<li>顶部栏高度用<code>line-height</code>撑开，并不好</li>
<li>图标绝对定位，难以居中</li>
<li>改用<code>flex</code>，加<code>border: 1px solid red;</code>确认位置</li>
</ul>

<hr />

<h2 id="editlabel-vue-功能实现"><code>EditLabel.vue</code> 功能实现</h2>

<ul>
<li>实现编辑标签的功能

<ul>
<li>可以点击查看标签具体内容的页面，包括标签名</li>
<li>可以修改标签名</li>
<li>可以删除标签</li>
</ul></li>
</ul>

<blockquote>
<p>修改<code>FormItem.vue</code></p>
</blockquote>

<ul>
<li>从外部获取数据<code>inputValue</code>，此时会提示<code>Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders...</code></li>
<li><code>v-model</code> <strong>改了外部数据</strong></li>
<li><code>v-model=&quot;inputValue&quot;</code>等价于<code>:value=&quot;inputValue&quot; @input=&quot;inputValue = $event.target.value&quot;</code>(在<code>input</code>标签内) 对此时的外部数据进行直接操作是不合法的</li>
<li>改为监听自定义事件<code>oninputValueChanged($event.target.value)</code>，发布修改的信息给父组件，通知父组件修改数据</li>
<li>用户在修改<code>inputValue</code>时，子组件不会直接对<code>inputValue</code>进行变更，而是将<code>inputValue</code>的值通过自定义方法传递出去，通知给父组件</li>
<li><code>oninputValueChanged(newValue: string) { this.$emit('update:InputValue', newValue); }</code>

<ul>
<li>注意事件名统一：</li>
<li>子组件<code>this.$emit('update:inputValue', newValue);</code></li>
<li>父组件监听<code>@update:inputValue=&quot;updateTag&quot;</code></li>
</ul></li>
</ul>

<blockquote>
<p><code>FormItem.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-wrapper&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-item&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;{{</span> <span class="k">this</span><span class="p">.</span><span class="nx">fieldName</span> <span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
             <span class="nt">@input</span><span class="s">=&#34;oninputValueChanged($event.target.value)&#34;</span>
             <span class="nt">:value</span><span class="s">=&#34;inputValue&#34;</span>
             <span class="nt">:placeholder</span><span class="s">=&#34;this.placeholder&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">FormItem</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Prop</span><span class="p">({</span><span class="k">default</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">})</span> <span class="nx">inputValue</span><span class="o">!:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="err">@</span><span class="nx">Prop</span><span class="p">({</span><span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span> <span class="nx">fieldName</span><span class="o">!:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="err">@</span><span class="nx">Prop</span><span class="p">({</span><span class="k">default</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">})</span> <span class="nx">placeholder</span><span class="o">?:</span> <span class="nx">string</span><span class="p">;</span>

  <span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;inputValue&#39;</span><span class="p">)</span>
  <span class="nx">oninputValueChanged</span><span class="p">(</span><span class="nx">newValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:InputValue&#39;</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">form</span><span class="o">-</span><span class="nx">wrapper</span> <span class="p">{</span>
  <span class="nx">background</span><span class="o">:</span> <span class="nx">transparent</span><span class="p">;</span>
  <span class="p">.</span><span class="nx">form</span><span class="o">-</span><span class="nx">item</span> <span class="p">{</span>
    <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
    <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
    <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
    <span class="p">.</span><span class="nx">name</span> <span class="p">{</span>
      <span class="nx">padding</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nx">input</span> <span class="p">{</span>
      <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">flex</span><span class="o">-</span><span class="nx">grow</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">background</span><span class="o">:</span> <span class="nx">transparent</span><span class="p">;</span>
      <span class="nx">padding</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<hr />

<blockquote>
<p><code>EditLabel.vue</code></p>
</blockquote>

<ul>
<li>取到标签的数据，赋值给内部数据<code>tag</code></li>
<li>先声明数据类型<code>inputValue?: {id: string, name: string} = undefined;</code></li>
<li>标签创建完成时的钩子<code>created(){...}</code>，从本地数据库中得到的数据赋值给<code>tag</code>

<ul>
<li>获取页面<code>url</code>中的<code>id</code>，通过<code>id</code>在所有标签中找到对应的<code>tag</code>，将<code>tag</code>赋值给<code>inputvalue</code></li>
</ul></li>

<li><p>得到<code>tag</code>后，在模板中展示<code>:value=&quot;tag.name&quot;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;headerBar&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-icon&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span> <span class="nt">@click.native</span><span class="s">=&#34;goBack&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">编辑标签</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">FormItem</span> <span class="nt">:inputValue</span><span class="s">=&#34;tag.name&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-item&#34;</span> <span class="na">field</span><span class="nt">-name</span><span class="err">=&#34;</span><span class="na">标签名</span><span class="err">&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入标签名&#34;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;button-wrapper&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Button</span><span class="p">&gt;</span><span class="nx">删除标签</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel.ts&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">FormItem</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/FormItem.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Button.vue&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
<span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">FormItem</span><span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">EditLabel</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
<span class="nx">tag</span><span class="o">?:</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span> <span class="p">}</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

<span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="c1">// const tag = tags.filter(t =&gt; t.id === id)[0];
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">t</span> <span class="p">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tag</span> <span class="o">=</span> <span class="nx">tag</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/404&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<blockquote>
<p>用户在<code>EditLabel.vue</code>的输入框中修改标签名 <code>updateTag()</code></p>
</blockquote>

<ul>
<li>监听<code>@update:inputValue</code>事件

<ul>
<li><code>@update:inputValue=&quot;update&quot;</code></li>
</ul></li>
<li>值由<code>FormItem.vue</code>中<code>@input=&quot;oninputValueChanged($event.target.value)</code>的<code>this.$emit('update:inputValue', newValue);</code> 而传来，类型为字符串</li>

<li><p>传给方法<code>update(name: string) {...}</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;headerBar&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-icon&#34;</span>
        <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span>
        <span class="nt">@click.native</span><span class="s">=&#34;goBack&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">编辑标签</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">FormItem</span> <span class="nt">:inputValue</span><span class="s">=&#34;tag.name&#34;</span>
          <span class="nt">@update:inputValue</span><span class="s">=&#34;updateTag&#34;</span>
          <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-item&#34;</span>
          <span class="na">field</span><span class="nt">-name</span><span class="err">=&#34;</span><span class="na">标签名</span><span class="err">&#34;</span>
          <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入标签名&#34;</span><span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;button-wrapper&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Button</span><span class="p">&gt;</span><span class="nx">删除标签</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel.ts&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">FormItem</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/FormItem.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Button.vue&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
<span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">FormItem</span><span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">EditLabel</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
<span class="nx">tag</span><span class="o">?:</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span> <span class="p">}</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

<span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
<span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="c1">// const tag = tags.filter(t =&gt; t.id === id)[0];
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">t</span> <span class="p">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tag</span> <span class="o">=</span> <span class="nx">tag</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/404&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="nx">updateTag</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>查看<code>updateTag()</code>方法打印出的参数</p></li>

<li><p>重命名为<code>update()</code>方法</p></li>
</ul>

<hr />

<blockquote>
<p><code>tagListModel.ts</code>添加方法</p>
</blockquote>

<ul>
<li>更新数据 <code>updateData(id, name) {...}</code></li>
<li>删除数据 <code>removeData(id: string) {...}</code></li>
</ul>

<blockquote>
<p>将修改的<code>name</code>保存到本地数据<code>tag.name</code></p>
</blockquote>

<ul>
<li>在<code>tagListModel.ts</code>中添加<code>update(id: string, name: string) {...}</code>方法</li>

<li><p>在<code>tagListModel.ts</code>中添加<code>removeData(id: string) {...}</code>方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;tagList&#39;</span><span class="p">;</span>
<span class="nx">type</span> <span class="nx">Tag</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">id</span>: <span class="kt">string</span><span class="p">;</span>
<span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">type</span> <span class="nx">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">data</span>: <span class="kt">Tag</span><span class="p">[];</span>
<span class="nx">fetchData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Tag</span><span class="p">[];</span>
<span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
<span class="nx">saveData</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="nx">updateData</span><span class="o">:</span> <span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;not found&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
<span class="nx">removeData</span><span class="o">:</span> <span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// return this.data | &#39;success&#39; | &#39;duplicated&#39; | &#39;not found&#39;
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">tagListModel</span>: <span class="kt">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>
<span class="nx">fetchData() {</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="p">},</span>
<span class="nx">create</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// this.data = [{id: &#39;1&#39;, name: &#39;1&#39;}, {id: &#39;2&#39;, name: &#39;2&#39;}]
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">names</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span> <span class="o">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">names</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span> <span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">id</span>: <span class="kt">name</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">name</span><span class="p">});</span>
<span class="k">this</span><span class="p">.</span><span class="nx">saveData</span><span class="p">();</span>
<span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
<span class="p">},</span>
<span class="nx">saveData() {</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
<span class="p">},</span>
<span class="nx">updateData</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">idList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">idList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">nameList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nameList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">tag</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">tag</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">saveData</span><span class="p">();</span>
    <span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;not found&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">},</span>
<span class="nx">removeData</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">saveData</span><span class="p">();</span>
<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">};</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">tagListModel</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p><code>EditLabel.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;headerBar&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-icon&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;money_right&#34;</span> <span class="nt">@click.native</span><span class="s">=&#34;goBack&#34;</span><span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">编辑标签</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">FormItem</span> <span class="nt">:inputValue</span><span class="s">=&#34;tag.name&#34;</span>
              <span class="nt">@update:inputValue</span><span class="s">=&#34;update&#34;</span>
              <span class="na">class</span><span class="o">=</span><span class="s">&#34;form-item&#34;</span> <span class="na">field</span><span class="nt">-name</span><span class="err">=&#34;</span><span class="na">标签名</span><span class="err">&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入标签名&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;button-wrapper&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">Button</span> <span class="nt">@click</span><span class="s">=&#34;remove&#34;</span><span class="p">&gt;</span><span class="na">删除标签</span><span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">tagListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/models/tagListModel.ts&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">FormItem</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/FormItem.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Button</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Button.vue&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">FormItem</span><span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">EditLabel</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tag</span><span class="o">?:</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">string</span> <span class="p">}</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">tagList</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">tags</span> <span class="o">=</span> <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="c1">// const tag = tags.filter(t =&gt; t.id === id)[0];
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">t</span> <span class="p">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">tag</span> <span class="o">=</span> <span class="nx">tag</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/404&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">update</span><span class="p">(</span><span class="nx">name</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tag</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">remove</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tag</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="sb">`成功删除标签：</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">tag</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
      <span class="nx">tagListModel</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">goBack</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>之后改成：加入编辑按钮，用户输入提示后才可编辑</li>
</ul>

<blockquote>
<p>bug: 在改<code>name</code>时，对应修改<code>id</code>为<code>name</code>但可能会生成两个相同的<code>id</code></p>
</blockquote>

<ul>
<li>需要一个 <code>ID</code> 生成器</li>
<li>引入数据库后就可以不用</li>
</ul>

<hr />

<h2 id="id-生成器"><code>id</code> 生成器</h2>

<blockquote>
<p>id 的原则</p>
</blockquote>

<ul>
<li>id 用来定位数据</li>
<li>一旦给了 id，就不要修改</li>
<li>id 不能重复</li>
<li>id 自增需要注意爆栈问题，JS不能显示超过17位数字<code>12345678912345678 + 1</code>，精度不够</li>
<li>当标签为空时，id 可清零重新计算</li>
<li>使用了闭包的原理</li>
</ul>

<blockquote>
<p>添加自定义库<code>src/lib/idCreator.ts</code></p>
</blockquote>

<ul>
<li><p>读取/存入 <code>localStorage</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">let</span> <span class="nx">id</span>: <span class="kt">number</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;_idMax&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">createId() {</span>
<span class="nx">id</span><span class="o">++</span><span class="p">;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;_idMax&#39;</span><span class="p">,</span> <span class="nx">id</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="k">return</span> <span class="nx">id</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">createId</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>在创建标签时引入 <code>tagListModel.ts</code> <code>createId()</code></p>
</blockquote>

<ul>
<li><p>重构重命名了方法<code>fetch</code> <code>uodate</code> <code>remove</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">import</span> <span class="nx">createId</span> <span class="nx">from</span> <span class="s1">&#39;@/lib/createId&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;tagList&#39;</span><span class="p">;</span>
<span class="nx">type</span> <span class="nx">Tag</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">id</span>: <span class="kt">string</span><span class="p">;</span>
<span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">type</span> <span class="nx">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">data</span>: <span class="kt">Tag</span><span class="p">[];</span>
<span class="nx">fetch</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Tag</span><span class="p">[];</span>
<span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
<span class="nx">save</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
<span class="nx">update</span><span class="o">:</span> <span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s1">&#39;success&#39;</span> <span class="o">|</span> <span class="s1">&#39;not found&#39;</span> <span class="o">|</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
<span class="nx">remove</span><span class="o">:</span> <span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// return this.data | &#39;success&#39; | &#39;duplicated&#39; | &#39;not found&#39;
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">tagListModel</span>: <span class="kt">TagListModel</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">data</span><span class="o">:</span> <span class="p">[],</span>
<span class="nx">save() {</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
<span class="p">},</span>
<span class="nx">fetch() {</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="p">},</span>
<span class="nx">create</span><span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// this.data = [{id: &#39;1&#39;, name: &#39;1&#39;}, {id: &#39;2&#39;, name: &#39;2&#39;}]
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">names</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span> <span class="o">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">names</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">createId</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">name</span> <span class="p">});</span>
<span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
<span class="p">},</span>
<span class="nx">update</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="kr">const</span> <span class="nx">idList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">idList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">nameList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">nameList</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;duplicated&#39;</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">tag</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">tag</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
    <span class="k">return</span> <span class="s1">&#39;success&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;not found&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">},</span>
<span class="nx">remove</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
<span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">();</span>
<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">};</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">tagListModel</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h2 id="纠错">纠错</h2>

<h3 id="formitem-vue-纠错"><code>FormItem.vue</code> 纠错</h3>

<ul>
<li><code>FormItem.vue</code> 对于输入的<code>inputValue</code> 不必使用 <code>@Watch('inputValue')</code>，这一行可以删掉</li>
<li><code>input</code> 的值一旦被用户变化，就会触发自定义事件 <code>@update:inputValue</code> ，所以就没必要再加一个 <code>watch</code> 了</li>
<li>加 <code>watch</code> 会触发两遍</li>
<li><code>Vue</code> 的 <code>template</code> 里没必要写 <code>this.</code></li>
</ul>

<blockquote>
<p>还有许多功能性的bug，需引入全局状态</p>
</blockquote>

<ul>
<li>标签组件和记账组件不共享标签数据

<ul>
<li>在记账组件中新增标签的数据不会同步到标签组件中</li>
<li>切换标签组件和记账组件时，新增标签的数据丢失</li>
</ul></li>
<li>用户手动清空<code>FormItem.vue</code>时，返回报错</li>
</ul>

<hr />

<hr />

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2022-09-03
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/frontend/">FrontEnd</a>
          <a href="http://xmasuhai.xyz/tags/project/">Project</a>
          <a href="http://xmasuhai.xyz/tags/money/">money</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-02money%E7%BB%84%E4%BB%B6/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">【项目 喵内记账 Meoney 02】Money组件</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-01%E5%AF%BC%E8%88%AA%E6%A0%8F/">
            <span class="next-text nav-default">【项目 喵内记账 Meoney 01】导航栏</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2026
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
