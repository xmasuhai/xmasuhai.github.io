<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>【项目 喵内记账 Meoney 02】Money组件 - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="【项目-喵内记账-meoney-02】Money.vue 组件 大纲链接§ [toc] Figama UI 预览图 整体思路 代码超过150行就需要考虑模块化分割 HTML按结构" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.91.2" />


<link rel="canonical" href="http://xmasuhai.xyz/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-02money%E7%BB%84%E4%BB%B6/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="【项目 喵内记账 Meoney 02】Money组件" />
<meta property="og:description" content="【项目-喵内记账-meoney-02】Money.vue 组件 大纲链接§ [toc] Figama UI 预览图 整体思路 代码超过150行就需要考虑模块化分割 HTML按结构" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-02money%E7%BB%84%E4%BB%B6/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-11-06T11:58:32+08:00" />
<meta property="article:modified_time" content="2022-03-29T23:35:42+08:00" />

<meta itemprop="name" content="【项目 喵内记账 Meoney 02】Money组件">
<meta itemprop="description" content="【项目-喵内记账-meoney-02】Money.vue 组件 大纲链接§ [toc] Figama UI 预览图 整体思路 代码超过150行就需要考虑模块化分割 HTML按结构"><meta itemprop="datePublished" content="2021-11-06T11:58:32+08:00" />
<meta itemprop="dateModified" content="2022-03-29T23:35:42+08:00" />
<meta itemprop="wordCount" content="19354">
<meta itemprop="keywords" content="FrontEnd,Project,money," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【项目 喵内记账 Meoney 02】Money组件"/>
<meta name="twitter:description" content="【项目-喵内记账-meoney-02】Money.vue 组件 大纲链接§ [toc] Figama UI 预览图 整体思路 代码超过150行就需要考虑模块化分割 HTML按结构"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          <div class="mobile-menu-parent">
            <span class="mobile-submenu-open"></span>
            <a href="http://xmasuhai.xyz/">
              docs
            </a>
          </div>
          <ul class="mobile-submenu-list">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          <a class="menu-item-link menu-parent" href="http://xmasuhai.xyz/">docs</a>
          <ul class="submenu">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">【项目 喵内记账 Meoney 02】Money组件</h1>
      
      <div class="post-meta">
        <time datetime="2021-11-06" class="post-time">
          2021-11-06
        </time>
        <div class="post-category">
            <a href="http://xmasuhai.xyz/categories/frontend/"> FrontEnd </a>
            <a href="http://xmasuhai.xyz/categories/project/"> Project </a>
            
          </div>
        <span class="more-meta"> 约 19354 字 </span>
          <span class="more-meta"> 预计阅读 39 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#整体思路">整体思路</a></li>
    <li><a href="#html初步结构">HTML初步结构</a></li>
    <li><a href="#css-思路">CSS 思路</a>
      <ul>
        <li><a href="#css-reset">CSS reset</a></li>
        <li><a href="#全局样式字体行高">全局样式（字体、行高）</a></li>
        <li><a href="#变量">变量</a></li>
        <li><a href="#局部样式">局部样式</a></li>
      </ul>
    </li>
    <li><a href="#模块化">模块化</a>
      <ul>
        <li><a href="#分割提取money中的组件">分割提取<code>Money</code>中的组件</a></li>
      </ul>
    </li>
    <li><a href="#使用typescript写types组件">使用<code>TypeScript</code>写<code>Types</code>组件</a>
      <ul>
        <li><a href="#用types组件的-js-对比-ts-写法">用<code>Types</code>组件的 JS 对比 TS 写法</a></li>
        <li><a href="#typesvue-ts-写法-第一个-ts-vue组件"><code>Types.vue</code> <code>TS</code> 写法 第一个 <code>TS Vue</code>组件</a></li>
        <li><a href="#使用-装饰器vue-property-decorator-prop-目的">使用 <strong>装饰器[<code>vue-property-decorator</code>]</strong> <code>@Prop</code> 目的</a></li>
        <li><a href="#使用typescript">使用TypeScript</a></li>
      </ul>
    </li>
    <li><a href="#抽出封装numpadvue组件">抽出封装<code>NumPad.vue</code>组件</a></li>
    <li><a href="#抽出封装notesvue组件">抽出封装<code>Notes.vue</code>组件</a>
      <ul>
        <li><a href="#v-model简写"><code>v-model</code>简写：</a></li>
      </ul>
    </li>
    <li><a href="#抽出封装tagsvue组件">抽出封装<code>Tags.vue</code>组件</a></li>
    <li><a href="#收集四个组件的-value">收集四个组件的 value</a></li>
    <li><a href="#sync-四个组件的-value"><code>.sync</code> 四个组件的 value</a></li>
    <li><a href="#windowlocalstorage存储四个组件的-value"><code>window.localStorage</code>存储四个组件的 value</a></li>
    <li><a href="#数据迁移是什么数据库版本">*数据迁移是什么（数据库版本）</a></li>
    <li><a href="#mvc-封装model-封装数据库本地存储有关的操作"><code>MVC</code> 封装<code>Model</code> 封装数据（库/本地存储）有关的操作</a></li>
    <li><a href="#一些bug修正与代码重构">一些bug修正与代码重构</a>
      <ul>
        <li><a href="#使用事件代理">使用事件代理</a></li>
        <li><a href="#成功-按条件-给不同的事件类型click--touchstart-动态绑定-一个-按条件选出的事件">成功 按条件 给不同的事件类型(click | touchstart) 动态绑定 一个 按条件选出的事件</a></li>
        <li><a href="#实现仿win10计算器和日历的探照灯效果">实现仿win10计算器和日历的探照灯效果</a></li>
        <li><a href="#使用sync">使用<code>.sync</code></a></li>
        <li><a href="#单一功能原则">单一功能原则</a></li>
      </ul>
    </li>
    <li><a href="#代码httpsgithubcomfrankfangmorney-live-localstorage小结"><a href="https://github.com/FrankFang/morney-live-localstorage">代码</a>小结</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h1 id="项目-喵内记账-meoney-02moneyvue-组件">【项目-喵内记账-meoney-02】Money.vue 组件</h1>
<blockquote>
<p>大纲链接<!-- raw HTML omitted --> § <!-- raw HTML omitted --></p>
</blockquote>
<p>[toc]</p>
<hr>
<blockquote>
<p><code>Figama UI</code></p>
</blockquote>
<ul>
<li><a href="https://www.figma.com/file/tmhv8PGGhSlcgkGrKYGgeL/%E7%8C%AB%E5%86%85%E8%AE%B0%E8%B4%A6-%E6%9C%AC%E5%9C%B0%E7%89%88-Copy?node-id=0%3A1">预览图</a></li>
</ul>
<hr>
<h2 id="整体思路">整体思路</h2>
<blockquote>
<p>代码超过150行就需要考虑模块化分割</p>
</blockquote>
<ul>
<li>HTML按结构逻辑：整体从上到下，局部从外到里依次写出</li>
<li>将HTML按结构或功能分为若干个组件</li>
<li>将SCSS分为<code>reset</code>、全局、变量、局部</li>
<li>TypeScript模块化</li>
</ul>
<blockquote>
<p>目前文件结构</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">src
 ┣ assets
 ┃ ┣ icons
 ┃ ┃ ┣ account.svg
 ┃ ┃ ┣ bills.svg
 ┃ ┃ ┗ statistics.svg
 ┃ ┣ style
 ┃ ┃ ┣ global.scss
 ┃ ┃ ┗ reset.scss
 ┃ ┗ logo.png
 ┣ components
 ┃ ┣ Icon.vue
 ┃ ┣ Layout.vue
 ┃ ┗ Nav.vue
 ┣ router
 ┃ ┗ index.ts
 ┣ store
 ┃ ┗ index.ts
 ┣ views
 ┃ ┣ Labels.vue
 ┃ ┣ Money.vue
 ┃ ┣ NotFound.vue
 ┃ ┗ Statistics.vue
 ┣ App.vue
 ┣ main.ts
 ┣ registerServiceWorker.ts
 ┣ shims-tsx.d.ts
 ┗ shims-vue.d.ts
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>App.vue</code>中只展示<code>router-view</code></li>
<li>所有完整展示页面放在<code>src/views</code>路径下</li>
<li>所有功能的组件放在<code>src/components</code>路径下</li>
<li>全局样式和初始化样式放入<code>src/assets/style</code>路径下</li>
<li>从<code>router</code>读取不同<code>router-view</code>，默认展示页面<code>Money.vue</code>，在 <code>Nav.vue</code> 展示路由选项</li>
<li><code>Money</code>大致结构为<code>div.layout-wrapper</code>中包含
<ul>
<li>内容展示页<code>div.content</code></li>
<li>导航标签页<code>Nav</code></li>
<li>其他展示页面结构相同</li>
</ul>
</li>
<li>分别提取出<code>Layout.vue</code>、<code>Nav.vue</code>组件
<ul>
<li><code>Layout.vue</code>: <code>div.wrapper</code>(<code>div.content</code> + <code>Nav</code>)
<ul>
<li>不同页面中的<code>div.content</code>用匿名插槽<code>&lt;slot/&gt;</code></li>
<li><code>div.content</code>(<code>Money</code> | <code>Labels</code> | <code>Statistics</code>)</li>
</ul>
</li>
<li><code>Nav.vue</code>: <code>&lt;nav&gt;&lt;/nav&gt;</code>(若干个<code>&lt;router-link/&gt;</code>)</li>
</ul>
</li>
<li><code>router-view</code>&gt;<code>Layout</code>&gt;<code>div.content_</code>(<code>Money</code> | <code>Labels</code> | <code>Statistics</code>) + <code>Nav</code></li>
</ul>
<hr>
<h2 id="html初步结构">HTML初步结构</h2>
<ul>
<li>先整体 后细化&ndash;类似递归</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">衣</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">食</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">住</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">行</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;new&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">新增标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入备注&#34;</span><span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;types&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;selected&#34;</span><span class="p">&gt;</span><span class="nx">支出</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">收入</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;numpad&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;output&#34;</span><span class="p">&gt;</span><span class="mi">100</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">2</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">3</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">删除</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">4</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">5</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">6</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">清空</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">7</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">8</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">9</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ok&#34;</span><span class="p">&gt;</span><span class="nx">OK</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;zero&#34;</span><span class="p">&gt;</span><span class="mi">0</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;.&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Money&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="css-思路">CSS 思路</h2>
<ul>
<li><code>reset.scss</code></li>
<li>全局</li>
<li>变量</li>
<li>局部</li>
<li><code>mixins.scss</code></li>
</ul>
<h3 id="css-reset">CSS reset</h3>
<ul>
<li>重置样式设置的组件中不可用<code>scope</code>，不仅仅影响当前组件，需要影响整个页面</li>
<li>去除选中状态的<code>:focus {outline: none;} </code></li>
</ul>
<blockquote>
<p><code>reset.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="o">*</span> <span class="p">{</span>
  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
  <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">;</span>
  <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">a</span> <span class="p">{</span>
  <span class="k">color</span><span class="p">:</span> <span class="kc">inherit</span><span class="p">;</span>
  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">ul</span><span class="o">,</span>
<span class="nt">ol</span> <span class="p">{</span>
  <span class="k">list-style</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="o">,</span>
<span class="nt">input</span> <span class="p">{</span>
  <span class="k">border</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">font</span><span class="p">:</span> <span class="kc">inherit</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">:</span><span class="nd">focus</span> <span class="p">{</span>
  <span class="k">outline</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span><span class="o">,</span>
<span class="nt">h2</span><span class="o">,</span>
<span class="nt">h3</span><span class="o">,</span>
<span class="nt">h4</span><span class="o">,</span>
<span class="nt">h5</span><span class="o">,</span>
<span class="nt">h6</span> <span class="p">{</span>
  <span class="k">font-weight</span><span class="p">:</span> <span class="kc">normal</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="全局样式字体行高">全局样式（字体、行高）</h3>
<blockquote>
<p>字体 <code>fonts.css</code> 搜索 <code>&quot;fonts.css&quot; 中文</code></p>
</blockquote>
<ul>
<li>黑体-横竖等宽，宋体-横细竖粗</li>
<li><a href="https://zenozeng.github.io/fonts.css/"><code>Fonts.css</code> &ndash; 跨平台中文字体解决方案</a></li>
<li>使用黑体字系列的最佳实践</li>
<li><a href="https://github.com/zenozeng/fonts.css/">GitHub fonts.css</a></li>
<li><a href="https://cloud.tencent.com/developer/chapter/11177">腾讯云 字体 | Fonts</a></li>
</ul>
<blockquote>
<p><code>global.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="nv">$font-hei</span><span class="o">:</span>  <span class="o">-</span><span class="n">apple-system</span><span class="o">,</span> <span class="s2">&#34;Smartisan CNS&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Sans&#34;</span><span class="o">,</span> <span class="s2">&#34;Helvetica Neue&#34;</span><span class="o">,</span> <span class="n">Helvetica</span><span class="o">,</span> <span class="s2">&#34;Nimbus Sans L&#34;</span><span class="o">,</span> <span class="n">Arial</span><span class="o">,</span> <span class="s2">&#34;Liberation Sans&#34;</span><span class="o">,</span> <span class="s2">&#34;PingFang SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Hiragino Sans GB&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Sans CJK SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Sans SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Sans CN&#34;</span><span class="o">,</span> <span class="s2">&#34;Microsoft YaHei&#34;</span><span class="o">,</span> <span class="s2">&#34;Wenquanyi Micro Hei&#34;</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Zen Hei&#34;</span><span class="o">,</span> <span class="s2">&#34;ST Heiti&#34;</span><span class="o">,</span> <span class="n">SimHei</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Zen Hei Sharp&#34;</span><span class="o">,</span> <span class="ni">sans-serif</span><span class="p">;</span>
<span class="nv">$font-kai</span><span class="o">:</span> <span class="n">Baskerville</span><span class="o">,</span> <span class="n">Georgia</span><span class="o">,</span> <span class="s2">&#34;Liberation Serif&#34;</span><span class="o">,</span> <span class="s2">&#34;Kaiti SC&#34;</span><span class="o">,</span> <span class="n">STKaiti</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai CN&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai HK&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai TW&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai TW MBE&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL KaitiM GB&#34;</span><span class="o">,</span> <span class="n">KaiTi</span><span class="o">,</span> <span class="n">KaiTi_GB2312</span><span class="o">,</span> <span class="n">DFKai-SB</span><span class="o">,</span> <span class="s2">&#34;TW\-Kai&#34;</span><span class="o">,</span> <span class="ni">serif</span><span class="p">;</span>
<span class="nv">$font-song</span><span class="o">:</span> <span class="n">Georgia</span><span class="o">,</span> <span class="s2">&#34;Nimbus Roman No9 L&#34;</span><span class="o">,</span> <span class="s2">&#34;Songti SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Serif CJK SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Serif SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Serif CN&#34;</span><span class="o">,</span> <span class="n">STSong</span><span class="o">,</span> <span class="s2">&#34;AR PL New Sung&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL SungtiL GB&#34;</span><span class="o">,</span> <span class="n">NSimSun</span><span class="o">,</span> <span class="n">SimSun</span><span class="o">,</span> <span class="s2">&#34;TW\-Sung&#34;</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Bitmap Song&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing CN&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing HK&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing TW&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing TW MBE&#34;</span><span class="o">,</span> <span class="n">PMingLiU</span><span class="o">,</span> <span class="n">MingLiU</span><span class="o">,</span> <span class="ni">serif</span><span class="p">;</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>App.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hr</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">router-view</span><span class="p">&gt;</span><span class="o">&lt;</span><span class="err">/router-view&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
  <span class="p">},</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;App&#34;</span><span class="p">,</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/reset.scss&#34;</span><span class="p">;</span>
<span class="nx">body</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="err">#</span><span class="nx">app</span> <span class="p">{</span>
  <span class="o">-</span><span class="nx">webkit</span><span class="o">-</span><span class="nx">font</span><span class="o">-</span><span class="nx">smoothing</span><span class="o">:</span> <span class="nx">antialiased</span><span class="p">;</span>
  <span class="o">-</span><span class="nx">moz</span><span class="o">-</span><span class="nx">osx</span><span class="o">-</span><span class="nx">font</span><span class="o">-</span><span class="nx">smoothing</span><span class="o">:</span> <span class="nx">grayscale</span><span class="p">;</span>
  <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mf">1.5</span><span class="p">;</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">family</span><span class="o">:</span> <span class="nx">$font</span><span class="o">-</span><span class="nx">hei</span><span class="p">;</span>
  <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">2</span><span class="nx">c3e50</span><span class="p">;</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>柔和的黑色<code>#333</code></li>
<li>按照组件来隔离样式，如果将样式写在<code>body</code>上，团队间注意可能会互相影响的样式</li>
<li>选择将总体样式写在<code>#app</code>上</li>
<li><code>font-size: 16px;</code>明确设置总体字体大小，局部可覆盖演示</li>
</ul>
<hr>
<h3 id="变量">变量</h3>
<ul>
<li>所有变量放到<code>global.scss</code></li>
<li>字体以<code>$font-</code>开头</li>
<li>颜色以<code>$color-</code>开头</li>
</ul>
<blockquote>
<p><code>global.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="nv">$font-hei</span><span class="o">:</span>  <span class="o">-</span><span class="n">apple-system</span><span class="o">,</span> <span class="s2">&#34;Smartisan CNS&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Sans&#34;</span><span class="o">,</span> <span class="s2">&#34;Helvetica Neue&#34;</span><span class="o">,</span> <span class="n">Helvetica</span><span class="o">,</span> <span class="s2">&#34;Nimbus Sans L&#34;</span><span class="o">,</span> <span class="n">Arial</span><span class="o">,</span> <span class="s2">&#34;Liberation Sans&#34;</span><span class="o">,</span> <span class="s2">&#34;PingFang SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Hiragino Sans GB&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Sans CJK SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Sans SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Sans CN&#34;</span><span class="o">,</span> <span class="s2">&#34;Microsoft YaHei&#34;</span><span class="o">,</span> <span class="s2">&#34;Wenquanyi Micro Hei&#34;</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Zen Hei&#34;</span><span class="o">,</span> <span class="s2">&#34;ST Heiti&#34;</span><span class="o">,</span> <span class="n">SimHei</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Zen Hei Sharp&#34;</span><span class="o">,</span> <span class="ni">sans-serif</span><span class="p">;</span>
<span class="nv">$font-kai</span><span class="o">:</span> <span class="n">Baskerville</span><span class="o">,</span> <span class="n">Georgia</span><span class="o">,</span> <span class="s2">&#34;Liberation Serif&#34;</span><span class="o">,</span> <span class="s2">&#34;Kaiti SC&#34;</span><span class="o">,</span> <span class="n">STKaiti</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai CN&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai HK&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai TW&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UKai TW MBE&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL KaitiM GB&#34;</span><span class="o">,</span> <span class="n">KaiTi</span><span class="o">,</span> <span class="n">KaiTi_GB2312</span><span class="o">,</span> <span class="n">DFKai-SB</span><span class="o">,</span> <span class="s2">&#34;TW\-Kai&#34;</span><span class="o">,</span> <span class="ni">serif</span><span class="p">;</span>
<span class="nv">$font-song</span><span class="o">:</span> <span class="n">Georgia</span><span class="o">,</span> <span class="s2">&#34;Nimbus Roman No9 L&#34;</span><span class="o">,</span> <span class="s2">&#34;Songti SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Noto Serif CJK SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Serif SC&#34;</span><span class="o">,</span> <span class="s2">&#34;Source Han Serif CN&#34;</span><span class="o">,</span> <span class="n">STSong</span><span class="o">,</span> <span class="s2">&#34;AR PL New Sung&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL SungtiL GB&#34;</span><span class="o">,</span> <span class="n">NSimSun</span><span class="o">,</span> <span class="n">SimSun</span><span class="o">,</span> <span class="s2">&#34;TW\-Sung&#34;</span><span class="o">,</span> <span class="s2">&#34;WenQuanYi Bitmap Song&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing CN&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing HK&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing TW&#34;</span><span class="o">,</span> <span class="s2">&#34;AR PL UMing TW MBE&#34;</span><span class="o">,</span> <span class="n">PMingLiU</span><span class="o">,</span> <span class="n">MingLiU</span><span class="o">,</span> <span class="ni">serif</span><span class="p">;</span>

<span class="nv">$color-highlight</span><span class="o">:</span> <span class="no">orangered</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>global.scss</code>中除了SCSS变量、函数和<code>Mixin</code>以外不要放任何其他样式</li>
<li><code>global.scss</code>是被各个模块多次引用的，每引用一次，就多复制一次</li>
<li>变量会最终被编译器删掉，文件也不存在</li>
</ul>
<hr>
<h3 id="局部样式">局部样式</h3>
<ul>
<li>预先写好CSS结构</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">衣</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">食</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">住</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">行</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;new&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">新增标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;types&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;selected&#34;</span><span class="p">&gt;</span><span class="nx">支出</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">收入</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;numpad&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;output&#34;</span><span class="p">&gt;</span><span class="mi">100</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">2</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">3</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">删除</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">4</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">5</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">6</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">清空</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">7</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">8</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">9</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">OK</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="mi">0</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;.&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Money&#39;</span><span class="p">,</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>

<span class="p">.</span><span class="nx">tags</span> <span class="p">{</span>
  <span class="o">&gt;</span> <span class="p">.</span><span class="nx">current</span> <span class="p">{</span>
    <span class="o">&gt;</span> <span class="nx">li</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="o">&gt;</span> <span class="p">.</span><span class="k">new</span> <span class="p">{</span>
    <span class="nx">button</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">.</span><span class="nx">notes</span> <span class="p">{</span>
  <span class="p">.</span><span class="nx">name</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="nx">input</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">.</span><span class="nx">types</span> <span class="p">{</span>
  <span class="o">&gt;</span> <span class="nx">li</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nx">selected</span> <span class="p">{</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">.</span><span class="nx">numpad</span> <span class="p">{</span>
  <span class="p">.</span><span class="nx">output</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">.</span><span class="nx">buttons</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p><code>div.tags</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="cm">/*
</span><span class="cm">&lt;div class=&#34;tags&#34;&gt;
</span><span class="cm">  &lt;ul class=&#34;current&#34;&gt;
</span><span class="cm">    &lt;li&gt;衣&lt;/li&gt;
</span><span class="cm">    &lt;li&gt;食&lt;/li&gt;
</span><span class="cm">    &lt;li&gt;住&lt;/li&gt;
</span><span class="cm">    &lt;li&gt;行&lt;/li&gt;
</span><span class="cm">  &lt;/ul&gt;
</span><span class="cm">  &lt;div class=&#34;new&#34;&gt;
</span><span class="cm">    &lt;button&gt;新增标签&lt;/button&gt;
</span><span class="cm">  &lt;/div&gt;
</span><span class="cm">&lt;/div&gt;
</span><span class="cm">*/</span>

<span class="nc">.tags</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding</span><span class="o">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
  <span class="o">&gt;</span> <span class="nc">.current</span> <span class="p">{</span>
    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
    <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
      <span class="nv">$h</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
      <span class="na">background</span><span class="o">:</span> <span class="mh">#d9d9d9</span><span class="p">;</span>
      <span class="na">height</span><span class="o">:</span> <span class="nv">$h</span><span class="p">;</span>
      <span class="na">line-height</span><span class="o">:</span> <span class="nv">$h</span><span class="p">;</span>
      <span class="na">border-radius</span><span class="o">:</span> <span class="p">(</span><span class="nv">$h</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
      <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
      <span class="na">margin-right</span><span class="o">:</span> <span class="mi">12</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="o">&gt;</span> <span class="nc">.new</span> <span class="p">{</span>
    <span class="na">padding-top</span><span class="o">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="nt">button</span> <span class="p">{</span>
      <span class="na">background</span><span class="o">:</span> <span class="ni">transparent</span><span class="p">;</span>
      <span class="na">border</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
      <span class="na">border-bottom</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="ni">solid</span><span class="p">;</span>
      <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
      <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>border-radius: 50%;</code> 默认是指宽度的50%，而需要的效果是高度的50%</li>
<li>设置高度<code>height: 24px;</code></li>
<li>设置<code>border-radius: (24px/2);</code>，注意写法<code>(24/2)px</code>是错误的</li>
<li>提取变量<code>$h: 24px;</code>，使用<code>height: $h; border-radius: ($h/2);</code></li>
<li>使用<code>padding: 0 16px;</code>而不是宽度开控制盒子整体尺寸</li>
<li>使用<code>margin-right: 4px;</code>，不使用<code>margin-left</code>，左边空隙在外面容器上加样式</li>
<li>覆盖掉全局样式<code>font-size: 14px;</code></li>
<li>字体默认不继承父元素，不继承<code>body</code>上设置的字体，必须在<code>reset.scss</code>中重置 <code>button, input { font: inherit;}</code></li>
<li>字体未设置垂直居中，调大高度可以发现目前并不居中
<ul>
<li>用<code>flex</code>布局</li>
<li>确保只有一行文字时，可用行高<code>line-height</code>和元素高<code>height</code>一样</li>
</ul>
</li>
<li>“新增按钮”样式 <code> button {background: transparent;border: none;border-bottom: 1px solid;color: #999;}</code>
<ul>
<li>注意细节，下划线长于文字 添加<code>padding: 0 3px;</code></li>
</ul>
</li>
</ul>
<hr>
<blockquote>
<p><code>label.notes</code></p>
</blockquote>
<ul>
<li>左右结构</li>
<li>将<code>label</code>标签的<code>display</code>属性从<code>inline</code>改为<code>block</code>，否则不显示背景色</li>
<li><code>display: flex;</code>和垂直居中<code>align-items: center;</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="cm">/*
</span><span class="cm">&lt;div&gt;
</span><span class="cm">  &lt;label class=&#34;notes&#34;&gt;
</span><span class="cm">    &lt;span class=&#34;name&#34;&gt;备注&lt;/span&gt;
</span><span class="cm">    &lt;input type=&#34;text&#34;/&gt;
</span><span class="cm">  &lt;/label&gt;
</span><span class="cm">&lt;/div&gt;
</span><span class="cm">*/</span>

<span class="nc">.notes</span> <span class="p">{</span>
  <span class="na">background</span><span class="o">:</span> <span class="mh">#f5f5f5</span><span class="p">;</span>
  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
  <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-left</span><span class="o">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
  <span class="nc">.name</span> <span class="p">{</span>
    <span class="na">padding-right</span><span class="o">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nt">input</span> <span class="p">{</span>
    <span class="na">height</span><span class="o">:</span> <span class="mi">73</span><span class="kt">px</span><span class="p">;</span>
    <span class="na">flex-grow</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="na">background</span><span class="o">:</span> <span class="ni">transparent</span><span class="p">;</span>
    <span class="na">border</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
    <span class="na">padding-right</span><span class="o">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p><code>ul.types</code></p>
</blockquote>
<ul>
<li>左右结构</li>
<li>容器不用确定的宽度<code>&gt; li {width: 50%;}</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="cm">/*
</span><span class="cm">&lt;div&gt;
</span><span class="cm">  &lt;ul class=&#34;types&#34;&gt;
</span><span class="cm">    &lt;li class=&#34;selected&#34;&gt;支出&lt;/li&gt;
</span><span class="cm">    &lt;li&gt;收入&lt;/li&gt;
</span><span class="cm">  &lt;/ul&gt;
</span><span class="cm">&lt;/div&gt;
</span><span class="cm">*/</span>

<span class="nc">.types</span> <span class="p">{</span>
  <span class="na">background</span><span class="o">:</span> <span class="mh">#c4c4c4</span><span class="p">;</span>
  <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
  <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="na">font-size</span><span class="o">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
    <span class="na">width</span><span class="o">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="na">height</span><span class="o">:</span> <span class="mi">64</span><span class="kt">px</span><span class="p">;</span>
    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
    <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
    <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nc">.selected</span> <span class="p">{</span>
      <span class="na">background</span><span class="o">:</span> <span class="mh">#c4c4c4</span><span class="p">;</span>
      <span class="k">&amp;</span><span class="nd">::after</span> <span class="p">{</span>
        <span class="na">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
        <span class="na">display</span><span class="o">:</span> <span class="ni">block</span><span class="p">;</span>
        <span class="na">position</span><span class="o">:</span> <span class="ni">absolute</span><span class="p">;</span>
        <span class="na">bottom</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
        <span class="na">height</span><span class="o">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
        <span class="na">background</span><span class="o">:</span> <span class="mh">#333</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>用<code>height: 64px; display: flex; justify-content: center; align-items: center;</code> 代替 <code>line-height: 64px;</code></li>
<li>注意添加<code>&amp;.selected {border-bottom: 4px solid;}</code>时会多一点高度，而处于未选中状态时，底部边框高度消失，切换时造成文字抖动，所以不能用会影响文字所占空间的<code>border</code>
<ul>
<li>附加的元素可用伪元素<code>&amp;.selected::after {}</code></li>
</ul>
</li>
</ul>
<hr>
<blockquote>
<p><code>div.numpad</code></p>
</blockquote>
<ul>
<li>输出结果栏用等宽字体<code>font-family: Consolas, monospace</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="cm">/*
</span><span class="cm">&lt;div class=&#34;numpad&#34;&gt;
</span><span class="cm">  &lt;div class=&#34;output&#34;&gt;100&lt;/div&gt;
</span><span class="cm">  &lt;div class=&#34;buttons&#34;&gt;
</span><span class="cm">    &lt;button&gt;1&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;2&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;3&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;删除&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;4&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;5&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;6&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;清空&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;7&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;8&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;9&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;OK&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;0&lt;/button&gt;
</span><span class="cm">    &lt;button&gt;.&lt;/button&gt;
</span><span class="cm">  &lt;/div&gt;
</span><span class="cm">&lt;/div&gt;
</span><span class="cm">*/</span>

<span class="nc">.numpad</span> <span class="p">{</span>
  <span class="nc">.output</span> <span class="p">{</span>
    <span class="k">@extend</span> <span class="o">%</span><span class="nc">innerShadow</span><span class="p">;</span>
    <span class="na">font-size</span><span class="o">:</span> <span class="mi">36</span><span class="kt">px</span><span class="p">;</span>
    <span class="na">font-family</span><span class="o">:</span> <span class="n">Consolas</span><span class="o">,</span> <span class="ni">monospace</span><span class="p">;</span>
    <span class="na">padding</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="na">text-align</span><span class="o">:</span> <span class="ni">right</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nc">.buttons</span> <span class="p">{</span>
    <span class="k">@extend</span> <span class="o">%</span><span class="nc">clearFix</span><span class="p">;</span>
    <span class="o">&gt;</span> <span class="nt">button</span> <span class="p">{</span>
      <span class="na">width</span><span class="o">:</span> <span class="mi">25</span><span class="kt">%</span><span class="p">;</span>
      <span class="na">height</span><span class="o">:</span> <span class="mi">64</span><span class="kt">px</span><span class="p">;</span>
      <span class="na">float</span><span class="o">:</span> <span class="ni">left</span><span class="p">;</span>
      <span class="na">background</span><span class="o">:</span> <span class="ni">transparent</span><span class="p">;</span>
      <span class="na">border</span><span class="o">:</span> <span class="ni">none</span><span class="p">;</span>
      <span class="k">&amp;</span><span class="nc">.ok</span> <span class="p">{</span>
        <span class="na">height</span><span class="o">:</span> <span class="p">(</span><span class="mi">64</span><span class="kt">px</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
        <span class="na">float</span><span class="o">:</span> <span class="ni">right</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="k">&amp;</span><span class="nc">.zero</span> <span class="p">{</span>
        <span class="na">width</span><span class="o">:</span> <span class="mi">25</span> <span class="o">*</span> <span class="mi">2</span><span class="kt">%</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="nv">$bg</span><span class="o">:</span> <span class="mh">#f2f2f2</span><span class="p">;</span>
      <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nv">$bg</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">,</span>
      <span class="o">&amp;:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">,</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">,</span>
      <span class="o">&amp;:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">2</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">,</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">,</span>
      <span class="o">&amp;:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">3</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">,</span>
      <span class="na">&amp;</span><span class="o">:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">,</span>
      <span class="o">&amp;:</span><span class="nf">nth-child</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">4</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">14</span><span class="o">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">5</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">12</span><span class="o">)</span> <span class="p">{</span>
        <span class="na">background</span><span class="o">:</span> <span class="nf">darken</span><span class="p">(</span><span class="nv">$bg</span><span class="o">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">6</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>数字键盘用<code>float</code>布局时注意清除浮动
<ul>
<li>float</li>
</ul>
</li>
<li>提取清除浮动的共用样式 placeholder 到 <code>global.scss</code>
<ul>
<li><code>%clearFix { &amp;::after { content: ''; display: block; clear: both; } }</code></li>
<li>在父元素上引用<code>@extend %clearFix;</code></li>
<li>相当于将所有拥有此placeholder的选择器名都复制过去，并用逗号分隔，替换掉原先<code>%clearFix</code>的位置</li>
</ul>
</li>
<li>提取外阴影公共样式<code>%outShadow {box-shadow: inset 0 -5px 5px -5px fade_out(black, 0.6), inset 0 5px 5px -5px fade_out(black, 0.5);}</code></li>
<li>float布局 V.S. 网格结构</li>
</ul>
<hr>
<blockquote>
<p>提取变量到<code>global.scss</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="nv">$font-hei</span><span class="o">:...</span><span class="p">;</span>
<span class="nv">$color-highlight</span><span class="o">:</span> <span class="no">orangered</span><span class="p">;</span>
<span class="nv">$color-shadow</span><span class="o">:</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="mf">.25</span><span class="p">);</span>
<span class="c1">// placeholder
</span><span class="c1"></span><span class="o">%</span><span class="nc">clearFix</span> <span class="p">{</span>
  <span class="k">&amp;</span><span class="nd">::after</span> <span class="p">{</span>
    <span class="na">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="na">display</span><span class="o">:</span> <span class="ni">block</span><span class="p">;</span>
    <span class="na">clear</span><span class="o">:</span> <span class="ni">both</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="o">%</span><span class="nc">outerShadow</span> <span class="p">{</span>
  <span class="na">box-shadow</span><span class="o">:</span> <span class="ni">inset</span> <span class="mi">0</span> <span class="mi">0</span><span class="kt">px</span> <span class="mi">3</span><span class="kt">px</span> <span class="nv">$color-shadow</span><span class="p">;</span>
  <span class="p">}</span>
<span class="o">%</span><span class="nc">innerShadow</span> <span class="p">{</span>
  <span class="na">box-shadow</span><span class="o">:</span> <span class="ni">inset</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">3</span><span class="kt">px</span> <span class="mi">3</span><span class="kt">px</span> <span class="o">-</span><span class="mi">3</span><span class="kt">px</span> <span class="nv">$color-shadow</span><span class="o">,</span>
  <span class="ni">inset</span> <span class="mi">0</span> <span class="mi">3</span><span class="kt">px</span> <span class="mi">3</span><span class="kt">px</span> <span class="o">-</span><span class="mi">3</span><span class="kt">px</span> <span class="nv">$color-shadow</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>为了布局<code>Money</code>内部模块，改进<code>Layout.vue</code></p>
</blockquote>
<ul>
<li>需求：根据不同的展示页面，<code>div.layout-wrapper</code>&gt;<code>div.content</code>使用不同的样式</li>
<li>如果在<code>Money.vue</code>中<code>Layout</code>标签上加样式属性<code>class=&quot;xxx&quot;</code></li>
<li>因为使用了<code>Layout.vue</code>组件，实际会加到<code>Layout.vue</code>的根标签<code>div.layout-wrapper</code>上
<ul>
<li>但预期应该是样式加在更里面一层的<code>div.content</code>上，从而控制<code>Money.vue</code>内部四个模块的布局样式（<code>.tags</code>、<code>.notes</code>、<code>.types</code>、<code>.numpad</code>），而<code>Nav</code>组件不受影响</li>
<li>结构：<code>Layout</code>&gt;<code>div.layout-wrapper</code>&gt;<code>div.content_</code>(<code>Money</code> | <code>Labels</code> | <code>Statistics</code>)+<code>Nav</code></li>
</ul>
</li>
<li>方法： <strong>使用外部数据 动态绑定到内部具体某个标签样式属性上</strong>
<ul>
<li>在<code>Layout.vue</code>组件中引入外部数据<code>props: ['classPrefix']</code></li>
<li><a href="https://cn.vuejs.org/v2/guide/class-and-style.html#%E7%BB%91%E5%AE%9A-HTML-Class">绑定动态样式</a>，标签中可以同时出现<code>class</code>和绑定的<code>:class</code>属性，会自动合并</li>
<li>由<code>Layout.vue</code>外部<code>Money</code>组件传来的数据<code>&lt;Layout class-prefix=&quot;layout&quot;&gt;...&lt;/div&gt;</code>得到<code>props: ['classPrefix']</code>（<code>Vue</code>会自动处理标签和js中的大小写，自动识别对应的驼峰和连字符写法，HTML标签中的属性名不可有大写的字符）</li>
</ul>
</li>
<li>但<code>Money.vue</code>组件的<code>&lt;style scoped&gt;</code>是由有范围的，加在原来样式标签里会因为作用域而无效，有<code>scoped</code>属性的样式，只能在当前组件中有效，在<code>Layout.vue</code>组件中无效</li>
<li>再添加一个没有<code>scoped</code>属性的样式标签：<code>Vue</code>的单文件组件中可以有多个样式标签</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">...</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">layout</span><span class="o">-</span><span class="nx">content</span> <span class="p">{</span>
  <span class="nx">border</span><span class="o">:</span> <span class="mi">3</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">green</span><span class="p">;</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="o">:</span> <span class="nx">column</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">tags</span> <span class="p">{}</span>
<span class="p">.</span><span class="nx">notes</span> <span class="p">{}</span>
<span class="p">.</span><span class="nx">types</span> <span class="p">{}</span>
<span class="p">.</span><span class="nx">numpad</span> <span class="p">{}</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>文档中必须写清楚</li>
<li>参考<code>ant-design</code> UI库的做法，通过前缀，传不同外部数据，来区分
<ul>
<li><code>props: ['classPrefix']</code></li>
</ul>
</li>
</ul>
<blockquote>
<p><code>Layout.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;layout-wrapper&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;classPrefix &amp;&amp; `${classPrefix}-wrapper`&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;classPrefix &amp;&amp; `${classPrefix}-content`&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">slot</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Nav</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Layout&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;classPrefix&#39;</span><span class="p">],</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">layout</span><span class="o">-</span><span class="nx">wrapper</span> <span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="o">:</span> <span class="nx">column</span><span class="p">;</span>
  <span class="nx">height</span><span class="o">:</span> <span class="mi">100</span><span class="nx">vh</span><span class="p">;</span>
  <span class="p">.</span><span class="nx">content</span> <span class="p">{</span>
    <span class="nx">flex</span><span class="o">-</span><span class="nx">grow</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">overflow</span><span class="o">:</span> <span class="nx">auto</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>注意 <code>:class=&quot;classPrefix &amp;&amp; `${classPrefix}-wrapper`&quot;</code> ，双引号里的是JS表达式</li>
<li>用反引号语法作为插值，写入外部数据 <code>${classPrefix}</code></li>
<li><code>Layout.vue</code>从<code>Money.vue</code>中标签<code>&lt;Layout class-prefix=&quot;layout&quot;&gt;</code>接受数据<code>class-prefix</code></li>
<li>动态绑定为 <code>\`${classPrefix}-wrapper\`</code> 进行拼接</li>
<li>这样秩序按照前缀就可拼接应用到更多其他样式中</li>
<li>组件外接受<code>classPrefix</code>说明组件内有供外部控制的 CSS class，但不是一个个传，只需传一个前缀，对应活干多个元素上的 class</li>
<li>vue deep 防止样式互相覆盖</li>
</ul>
<hr>
<h2 id="模块化">模块化</h2>
<blockquote>
<p>vue组件输入补全提示，必须先输入 <code>&lt;</code>， 而直接打组件名不会出不全提示</p>
</blockquote>
<h3 id="分割提取money中的组件">分割提取<code>Money</code>中的组件</h3>
<blockquote>
<p>可使用 <code>webStorm</code> 自动提取，自动补全引用路径，但会丢失样式，以及提取的目录只能是当前目录，需要手动移动</p>
</blockquote>
<ul>
<li>保证每个模块代码不超过150行，通用封装组件，避免屎山</li>
<li>避免同名可建目录，<code>webStorm</code> 自动重构引入路径</li>
<li>分割提取<code>Money.vue</code> 为四个子组件：<code>Tags.vue</code>、<code>Notes.vue</code>、<code>Types.vue</code>、<code>Numpad.vue</code></li>
<li>注意组件的引入路径和样式的依赖</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Money&#39;</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span><span class="p">},</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">layout</span><span class="o">-</span><span class="nx">content</span> <span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="o">:</span> <span class="nx">column</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="使用typescript写types组件">使用<code>TypeScript</code>写<code>Types</code>组件</h2>
<ul>
<li>用来分辨支出还是收入，从而展示不同UI</li>
</ul>
<h3 id="用types组件的-js-对比-ts-写法">用<code>Types</code>组件的 JS 对比 TS 写法</h3>
<blockquote>
<p><code>Types.vue</code> JS 写法</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_types&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;types&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;-&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;-&#39;)&#34;</span><span class="p">&gt;</span><span class="na">支出</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;+&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;+&#39;)&#34;</span><span class="p">&gt;</span><span class="na">收入</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Types&#39;</span><span class="p">,</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;xxx&#39;</span><span class="p">],</span>
  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">xxx</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span> <span class="c1">// &#39;-&#39; 表示支出， &#39;+&#39;表示收入
</span><span class="c1"></span>    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">selectType</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// type 中能是 “-” 或 “+”，否则报错
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;-&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;type is unknown&#39;</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">types</span> <span class="p">{...}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Money.vue</code> 未用到装饰器的<code>TS</code>写法</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="na">xxx</span><span class="o">=</span><span class="s">&#34;Hi&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Money&#39;</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span><span class="p">},</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Vue 处理绑定值为 <code>undefined</code> 自动去除 三目运算符返回的<code>false</code>值，变为空值:
<ul>
<li><code>&lt;li :class=&quot; type === '-' ? 'selected' : '' &quot;&gt;支出&lt;/li&gt;</code></li>
</ul>
</li>
<li>点击时，触发函数并传参 <code>selectType('-')</code></li>
<li>注意绑定的样式<code>'selected'</code>是字符串类型 <code>&lt;li :class=&quot;type === '-' &amp;&amp; 'selected'&quot; @click=&quot;selectType('-')&quot;&gt;支出&lt;/li&gt;</code></li>
<li><code>Types</code>组件得到外部数据 <code>&quot;Hi&quot;</code></li>
</ul>
<hr>
<h3 id="typesvue-ts-写法-第一个-ts-vue组件"><code>Types.vue</code> <code>TS</code> 写法 第一个 <code>TS Vue</code>组件</h3>
<blockquote>
<p><code>vue/cli</code>初始化时已使用<code>TS</code>配置</p>
</blockquote>
<blockquote>
<p>安装 装饰器 <code>vue-property-decorator</code> 库使用ts装饰器写法</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">yarn add vue-property-decorator
</code></pre></td></tr></table>
</div>
</div><hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_types&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;types&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;-&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;-&#39;)&#34;</span><span class="p">&gt;</span><span class="na">支出</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;+&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;+&#39;)&#34;</span><span class="p">&gt;</span><span class="na">收入</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Types</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="c1">// initial data
</span><span class="c1"></span>  <span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> <span class="c1">// &#39;-&#39; 表示支出， &#39;+&#39;表示收入
</span><span class="c1"></span>  <span class="c1">// method
</span><span class="c1"></span>  <span class="nx">selectType</span><span class="p">(</span><span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// type 中能是 “-” 或 “+”，否则报错
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;-&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;type is unknown&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>TypeScript</code> 只支持在 Vue 的<code>&lt;script&gt;</code> 标签里，<code>&lt;template&gt;</code>标签里只支持JS</li>
<li><code>TypeScript</code> 使用前先导入引用 <code>import Vue from 'vue';</code></li>
<li><code>TypeScript</code> 语句末尾加分号</li>
<li><code>TS Vue</code>组件不用构造选项，构造选项没有类型</li>
<li><code>TS Vue</code>组件使用 <code>class</code> 代替: <code>export default class Types extends Vue {}</code></li>
<li><code>TypeScript</code> 引入装饰器来自动处理<code>export default class</code>里的 <strong>成员变量</strong> 和 <strong>方法声明</strong>
<ul>
<li>解析为<code>initial data</code> <code>method</code> <code>computed</code> <code>prop</code> <code>lifecycle hook</code>等数据</li>
<li><code>import {Component} from 'vue-property-decorator';@Component;...</code></li>
<li><code>TypeScript</code> 赋值语句自动变为实例的内部数据<code>data</code></li>
<li>参数<code>type</code>默认是<code>any</code>类型的，但 TS配置 不允许<code>any</code>类型的</li>
<li>必须声明类型： <code>selectType(type: string) {...}</code></li>
</ul>
</li>
<li>使用装饰器<a href="https://github.com/kaorun343/vue-property-decorator"><code>vue-property-decorator</code>库</a></li>
<li>代替 <a href="https://class-component.vuejs.org/">Vue Class Component 官方的库 <code>vue-class-component</code></a></li>
<li><a href="https://juejin.cn/post/6844903741456384014"><code>vue-property-decorator</code>使用指南</a></li>
<li><a href="https://cn.vuejs.org/v2/guide/typescript.html#%E5%9F%BA%E4%BA%8E%E7%B1%BB%E7%9A%84-Vue-%E7%BB%84%E4%BB%B6/">vue 官方的装饰器库 <code>vue-class-component</code> 的装饰器<code>@Component</code></a></li>
<li><a href="https://github.com/vuejs/vue-class-component/tree/d54490bf603bfbff6dd50f967ba8bacbb76b2c5a">CRM旧版文档</a></li>
</ul>
<h3 id="使用-装饰器vue-property-decorator-prop-目的">使用 <strong>装饰器[<code>vue-property-decorator</code>]</strong> <code>@Prop</code> 目的</h3>
<blockquote>
<p>目的</p>
</blockquote>
<ul>
<li>单一原则</li>
<li>关注点分离</li>
<li>装饰器使代码逻辑 <strong>高内聚</strong></li>
<li>Vue 使代码逻辑低耦合</li>
</ul>
<blockquote>
<p>实践</p>
</blockquote>
<ul>
<li>参照文档添加<code>@Prop(Number) readonly propA: number | undefined;</code>
<ul>
<li>指定类型为 Number 只读</li>
<li>属性名为 propA</li>
<li>默认取值必须是 <code>number | undefined</code></li>
<li>此时传来的外部数据必须是数字类型，否则会报错</li>
<li><code>| undefined</code>为编译时的检查： <code>this.xxx.yyy</code>直接出现红下划线，意味着在运行代码前接报错</li>
<li>即 TS 可以提前告知代码错误</li>
<li>（需添加判断<code>if(this.xxx === undefined){console.log('没有xxx')}else{console.log(this.xxx.yyy)}</code>消除红线代码警告）</li>
<li>还会继续检查是否存在<code>yyy</code>，改成<code>this.xxx.toString()</code>才可通过检查</li>
</ul>
</li>
<li><code>Alt + Enter</code>添加引入<code>import {Component, Prop} from 'vue-property-decorator';</code></li>
<li>装饰器可以极大程度简化Vue组件中各种状态的声明</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:xxx</span><span class="s">=&#34;123&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Money&#39;</span><span class="p">,</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span><span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span><span class="p">},</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Types.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_types&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;types&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;-&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;-&#39;)&#34;</span><span class="p">&gt;</span><span class="na">支出</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;type === &#39;+&#39; &amp;&amp; &#39;selected&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;selectType(&#39;+&#39;)&#34;</span><span class="p">&gt;</span><span class="na">收入</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Types</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="c1">// initial data
</span><span class="c1"></span>  <span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span><span class="p">;</span> <span class="c1">// &#39;-&#39; 表示支出， &#39;+&#39;表示收入
</span><span class="c1"></span>
  <span class="c1">// 使用非官方 vue-property-decorator 的装饰器 @Props
</span><span class="c1"></span>  <span class="c1">// Prop 告诉 Vue xxx 不是 data 而是 prop
</span><span class="c1"></span>  <span class="c1">// Number 告诉 Vue xxx 运行时是个 Number
</span><span class="c1"></span>  <span class="c1">// number | undefined 告诉 TS xxx 编译时的类型
</span><span class="c1"></span>  <span class="err">@</span><span class="nx">Prop</span><span class="p">(</span><span class="nb">Number</span><span class="p">)</span> <span class="nx">readonly</span> <span class="nx">xxx</span><span class="o">:</span> <span class="nx">number</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>

  <span class="c1">// method
</span><span class="c1"></span>  <span class="nx">selectType</span><span class="p">(</span><span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// type 只能是 “-” 或 “+”，否则报错
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;-&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;type is unknown&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">xxx</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">types</span> <span class="p">{}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>@Prop(Number) xxx: number | undefined;</code></li>
<li><code>Number</code>是指运行时的类型</li>
<li><code>number | undefined</code>是指编译时的类型</li>
<li>TS 增加了类型声明</li>
</ul>
<hr>
<h3 id="使用typescript">使用TypeScript</h3>
<ul>
<li>命令行中查看TS最新版本<code>npm info typescript version</code></li>
<li><code>package.json</code>中可以改版本，之后<code>yarn install</code>自动卸载重装</li>
<li>手动重启<code>webStorm</code></li>
</ul>
<blockquote>
<p>TypeScript 的好处</p>
</blockquote>
<ol>
<li>类型提示：更智能的提示</li>
<li>编译时报错：还没运行代码就知道自己写错了 无法编译成 JS</li>
<li>类型检查：无法<code>.</code>点出错误的属性</li>
</ol>
<ul>
<li><a href="https://github.com/FrankFang/morney-live-money-2/tree/master/src">目前的提交代码</a></li>
</ul>
<blockquote>
<p>写 Vue 组件的三种方式（<code>*.vue</code> 单文件组件）</p>
</blockquote>
<p>1.用 JS 对象 <code> export default { data, props, methods, created, ...}</code></p>
<p>2.用 TS 类 <code>&lt;script lang=&quot;ts&quot;&gt;</code> 默认使用<code>class XXX</code> *推荐</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kd">@Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">XXX</span> <span class="kr">extends</span> <span class="nx">Vue</span><span class="p">{</span>
  <span class="nx">xxx</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;hi&#39;</span><span class="p">;</span>
  <span class="kd">@Prop</span><span class="p">(</span><span class="nb">Number</span><span class="p">)</span> <span class="nx">xxx</span>: <span class="kt">number</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>3.用 <code>JS 类 &lt;script lang=&quot;js&quot;&gt;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">XXX</span> <span class="kr">extends</span> <span class="nx">Vue</span><span class="p">{</span>
  <span class="nx">xxx</span> <span class="o">=</span> <span class="s1">&#39;hi&#39;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>TypeScript 的本质</p>
</blockquote>
<ul>
<li><code>JS: Type</code></li>
<li>TypeScript 通过编译器 编译为 JavaScript，再给浏览器</li>
<li>编译时 V.S. 运行时</li>
<li>编译时 如果有编译错误 终端 Error 导致编译失败 浏览器不自动刷新 不更新 JS</li>
<li>运行时 如果错误 浏览器控制台 Error</li>
<li>使用编译器<code>TSCompiler</code>检查，删掉类型就是 可以在浏览器运行的JS</li>
<li>为了开发的流畅，就算TS编译报错，也能跳过错误，继续编译JS不停止，除非设置<code>tsconfig.json</code> 添加 <code>{&quot;compilerOptions&quot;: { &quot;noEmitOnError&quot;: ..., ...} ...}</code></li>
</ul>
<hr>
<h2 id="抽出封装numpadvue组件">抽出封装<code>NumPad.vue</code>组件</h2>
<blockquote>
<p>功能需求</p>
</blockquote>
<ul>
<li>点击<code>0~9</code>的数字，在<code>div.output</code>显示相应的数字（其实是字符串）</li>
<li>点击<code>.</code>，添加小数点</li>
<li>点击<code>清空</code>，<code>div.output</code>显示<code>0</code></li>
<li><em>点击<code>OK</code>，确认标签名，添加相应的标签</em> (后续功能实现)</li>
</ul>
<blockquote>
<p>注意点</p>
</blockquote>
<ul>
<li>先输入<code>0</code>，再输入<code>.</code>，<code>0.</code>两个字符都会显示在<code>div.output</code>中</li>
<li>通常用字符串显示完整数字<code>0.130</code></li>
<li>一开始未设置默认高度，<code>div.output</code>塌陷</li>
<li>必须给默认值，高度撑起文档流，使用<code>'0'</code> （空格或<code>$nbsp;</code>都不行）</li>
<li>如果设置<code>min-height</code>，添加计算样式的高度，可能会造成页面的闪烁</li>
<li>从<code>Numpad</code>中输入的不是数字，是字符串，包含小数点<code>.</code>的字符</li>
<li><code>Vue.js</code>的模板<code>template</code>中不使用TS语法，无法做类型检查，只支持JS</li>
<li>方法中不传参，绑定到事件上，<code>Vue.js</code>会自动传参，这个参数就是和此事件相关的所有信息
<ul>
<li>通常取名<code>event</code>或<code>e</code></li>
<li>方法<code>inputContent(event) { event.target.textContent }</code></li>
<li><code>event.target.textContent</code>可以获取到当前元素里的内容，即写入的文本节点的字符串</li>
<li>TS 对 参数<code>event</code>进行类型检查，声明对象所属的类
<ul>
<li>没有所谓的点击事件类，只有鼠标事件类、键盘事件类和UI事件，用户事件等 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent">MDN 鼠标事件</a></li>
<li><code>click</code>属于 <code>MouseEvent</code>类，是<code>DOM</code>内置的类型</li>
</ul>
</li>
<li>声明方法参数的类型 <code>inputContent(event: MouseEvent) {console.log(event.target.textContent);}</code></li>
<li><code>event.target</code>错误提示可能为空值<code>null</code>，需要添加判断语句</li>
<li><code>event.target.textContent</code>也可能为空值，比如图片元素就没有文字内容</li>
<li>使用 TS 断言 可以强制指定为按捏元素的类型 <code>(event.target as HTMLButtonElement)</code> 来代替判断语句</li>
<li><code>Vue2.0</code>和 TS 的结合得不太好</li>
</ul>
</li>
</ul>
<blockquote>
<p>实现</p>
</blockquote>
<ul>
<li>需要一个data保存输出字符串 <code>output: string = '' </code>
<ul>
<li>TS 中变量有默认值，就不用声明变量的类型，可简化为<code>output = '' </code></li>
</ul>
</li>
<li>插值<code>{{output}}</code></li>
<li>点击事件<code>&lt;button @click=&quot;output += 1&quot;&gt;1&lt;/button&gt;</code></li>
<li>抽象出方法<code>inputContent(content: string) {}</code></li>
<li>改写事件方法 <code>&lt;button @click=&quot;inputContent(&quot;1&quot;)&quot;&gt;1&lt;/button&gt;</code>，注意类型是字符串</li>
<li>重复太多 改写事件为使用获取目标元素的文本内容 <code>inputContent(event: MouseEvent) {const button = (event.target as HTMLButtonElement);}}</code></li>
<li>不传参<code>&lt;button @click=&quot;inputContent&quot;&gt;1&lt;/button&gt;</code></li>
<li>点击事件方法有默认参数<code>event</code>时执行不需加括号</li>
</ul>
<blockquote>
<p><code>Bug</code></p>
</blockquote>
<ul>
<li>点击两次<code>'0'</code>，重复出现<code>'0'</code>
<ul>
<li>小数点前，当前存在的值为以<code>'0'</code>开头，点击多次<code>'0'</code>，不重复出现<code>'0'</code></li>
<li>分别输入<code>'01'</code>自动消<code>'0'</code>，变为<code>'1'</code></li>
<li>小数点后，可以多次出现<code>'0'</code></li>
</ul>
</li>
<li>点击两次小数点<code>'.'</code>，重复出现<code>'.'</code>
<ul>
<li>正确的为点击一次<code>'.'</code>，出现<code>'.'</code>，再次点击<code>'.'</code>，不出现<code>'.'</code></li>
</ul>
</li>
<li>默认<code>'0'</code>存在，直接输入<code>'.'</code>，显示<code>''0.</code></li>
<li>显示的数字长短限制</li>
</ul>
<blockquote>
<p>条件判断解决Bug</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">inputContent</span><span class="p">(</span><span class="nx">event</span>: <span class="kt">MouseEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="kr">as</span> <span class="nx">HTMLButtonElement</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">textContent</span> <span class="kr">as</span> <span class="kt">string</span><span class="p">;</span>
    <span class="c1">// 显示的数字长短限制
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
    <span class="c1">// &#39;0&#39;开头的逻辑
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;0123456789&#39;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// &#39;.&#39;的逻辑
</span><span class="c1"></span>        <span class="c1">// 按数字位数 拼接 字符串
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// &#39;.&#39;重复判断
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">input</span> <span class="o">===</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>预想值必为字符串<code>const input = button.textContent as string;</code>，排除空值的情况
<ul>
<li>语法简化为<code>const input = button.textContent!</code> ，但通不过 <code>TSlint</code>检查，所以不常用</li>
</ul>
</li>
<li>合并逻辑 输入 <code>0</code> | 输入其他数字 <code>1~9</code></li>
<li>以任何数字(0~9 一位)开头输入都替换显示的数字<code>this.output = input;</code></li>
</ul>
<blockquote>
<p>删除逻辑</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">removeContent() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>清空逻辑</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">clearContent() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>确认添加标签逻辑</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="nx">confirmContent() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
    <span class="c1">// confirm save to Tags
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Bug2</code></p>
</blockquote>
<ul>
<li>移动端输入300ms延迟，不顺畅
<ul>
<li><code>&lt;button @click=&quot;inputContent&quot;&gt;1&lt;/button&gt;</code> 改为 <code>&lt;button @touchstart=&quot;inputContent&quot;&gt;1&lt;/button&gt;</code></li>
</ul>
</li>
<li>每个按钮重复绑定事件</li>
<li>限制小数到 人民币 分的单位</li>
</ul>
<blockquote>
<p><code>Numpad.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;numpad&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;output&#34;</span><span class="p">&gt;{{</span> <span class="nx">output</span> <span class="o">||</span> <span class="s1">&#39;0&#39;</span> <span class="p">}}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">1</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">2</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">3</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;removeContent&#34;</span><span class="p">&gt;</span><span class="na">删除</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">4</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">5</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">6</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;clearContent&#34;</span><span class="p">&gt;</span><span class="na">清空</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">7</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">8</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">9</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;confirmContent&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ok&#34;</span><span class="p">&gt;</span><span class="nx">OK</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;zero&#34;</span><span class="p">&gt;</span><span class="mi">0</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">@touchstart</span><span class="s">=&#34;inputContent&#34;</span><span class="p">&gt;</span><span class="na">.</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Numpad</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>

  <span class="nx">inputContent</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="nx">MouseEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="nx">as</span> <span class="nx">HTMLButtonElement</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">textContent</span> <span class="nx">as</span> <span class="nx">string</span><span class="p">;</span>
    <span class="c1">// 显示的数字长短限制
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span><span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;别做白日梦啦&#34;</span><span class="p">);</span><span class="k">return</span><span class="p">;}</span>
    <span class="c1">// &#39;0&#39;开头的逻辑
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;0123456789&#39;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// &#39;.&#39;的逻辑
</span><span class="c1"></span>        <span class="c1">// 按数字位数 拼接 字符串
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// &#39;.&#39;开头的逻辑
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// &#39;.&#39;重复判断
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span> <span class="o">===</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
      <span class="c1">// &#39;.&#39;限制小数位 2位
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">dotIndex</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">removeContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">clearContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">confirmContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
    <span class="c1">// confirm save to Tags
</span><span class="c1"></span>  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">numpad</span> <span class="p">{}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="抽出封装notesvue组件">抽出封装<code>Notes.vue</code>组件</h2>
<blockquote>
<p><code>notes</code> 模块 - <code>v-model</code></p>
</blockquote>
<ul>
<li>备注功能，输入框，提交输入信息</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_notes&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">:value</span><span class="s">=&#34;inputValue&#34;</span>
             <span class="nt">@input</span><span class="s">=&#34;onInput&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;在这里输入备注&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Notes</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">inputValue</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

  <span class="nx">onInput</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="nx">InputEvent</span> <span class="o">|</span> <span class="nx">KeyboardEvent</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// value = $event.target.value
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="nx">as</span> <span class="nx">HTMLInputElement</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">inputValue</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>绑定<code>input</code>标签的<code>:value</code>值</li>
<li>监听<code>input</code>标签的<code>@change</code>事件</li>
<li>给<code>@change</code>事件 原生HTML自带标签拿到 事件目标值 <code>@change=&quot;value = $event.target.value&quot;</code>，<code>@change</code>只有光标移入才会触发，改为<code>@input</code>事件更合适</li>
<li>提取为自定义事件<code>@input=&quot;onInput&quot;</code> 写自定义方法<code>onInput(event: KeyboardEvent) {...}</code></li>
</ul>
<hr>
<h3 id="v-model简写"><code>v-model</code>简写：</h3>
<ul>
<li>绑定数据<code>:value=&quot;xxx&quot;</code></li>
<li>原生输入事件<code>@input=&quot;xxx = $event.target.value&quot;</code> 获取事件对象的目标值</li>
<li>以上两句可以直接简写为<code>v-model=&quot;xxx&quot;</code>，无需写<code>method</code></li>
<li><code>xxx</code>一般命名为<code>value</code></li>
</ul>
<blockquote>
<p><code>Notes.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_notes&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
             <span class="nt">v-model</span><span class="s">=&#34;inputValue&#34;
</span><span class="s">             placeholder=&#34;在这里输入备注&#34;/&gt;
</span><span class="s">    &lt;/label&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>

<span class="err">@</span><span class="na">Component</span>
<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Notes</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
  <span class="na">inputValue </span><span class="o">=</span> <span class="s">&#39;&#39;</span><span class="err">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="na">...</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="抽出封装tagsvue组件">抽出封装<code>Tags.vue</code>组件</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;...&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;new&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">新增标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Tags</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Prop</span><span class="p">(</span><span class="nb">Array</span><span class="p">)</span> <span class="nx">dataSource</span><span class="o">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>TS 声明 字符串数组 <code>tags: string[] = []</code> 成员只能是字符串的数组</li>
<li>标签是外部数据传来的 <code>@Prop(Array) tags: string[] = [];</code>
<ul>
<li>必须加括号 <code>@Prop() tags: string[];</code></li>
</ul>
</li>
<li><code>@Prop(Array) tags: string[] | undefined = [];</code> 由于是外部数据，不赋默认值 <code>@Prop(Array) tags: string[] | undefined;</code></li>
</ul>
<blockquote>
<p>外部父组件 <code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source</span><span class="s">=&#34;tags&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span><span class="p">{</span>
  <span class="nx">tags</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span><span class="s1">&#39;食&#39;</span><span class="p">,</span><span class="s1">&#39;住&#39;</span><span class="p">,</span><span class="s1">&#39;行&#39;</span><span class="p">];</span>
<span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>重写<code>Tags.vue</code>组件的<code>template</code> 遍历<code>&lt;li&gt;</code></p>
</blockquote>
<ul>
<li><code>&lt;li v-for=&quot;tag in dataSource&quot; :key=&quot;tag&quot;&gt;{{ tag }}&lt;/li&gt;</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;tag in dataSource&#34; </span><span class="nt">:key</span><span class="s">=&#34;tag&#34;</span><span class="p">&gt;{{</span><span class="na">tag</span><span class="p">}}&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;new&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span><span class="nx">新增标签</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Tags</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Prop</span><span class="p">(</span><span class="nb">Array</span><span class="p">)</span> <span class="nx">dataSource</span><span class="o">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>添加选中的逻辑和选中样式 <code>Tags.vue</code></p>
</blockquote>
<ul>
<li>点击选中的逻辑<code>&lt;li v-for=&quot;tag in dataSource&quot; :key=&quot;tag&quot; @click=&quot;select(tag)&quot;&gt;{{ tag }}&lt;/li&gt;</code></li>
<li>点击选中的方法<code>select(tag: string) {this.selectedTags.push(tag);}</code></li>
<li>绑定选中时的样式
<ul>
<li>使用对象的形式： <code>:class=&quot;{selected: true | false}&quot;</code></li>
<li><code>true </code>表示起效，<code>false</code> 表示无效 填写JS表达式来判断</li>
<li>选中逻辑  <code>:class=&quot;{selected: selectedTags.indexOf(tag)&gt;=0}&quot;</code> 选中的标签数据是否包含当前标签</li>
</ul>
</li>
<li>给选中的标签加样式<code>&amp;.selected {...}</code> 如果点击选中，则添加样式</li>
<li><code>selecte</code>选中的逻辑改为切换的逻辑<code>toggle</code>，通过点击切换，是否添加 选中的样式</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;tag in dataSource&#34;
</span><span class="s">          :key=&#34;tag&#34;
</span><span class="s">          @click=&#34;toggle(tag)&#34;
</span><span class="s">          :class=&#34;{selected: selectedTags.indexOf(tag)&gt;=0 }&#34;&gt;{{ tag }}
</span><span class="s">      &lt;/li&gt;
</span><span class="s">    &lt;/ul&gt;
</span><span class="s">    &lt;div class=&#34;new&#34;&gt;
</span><span class="s">      &lt;button&gt;新增标签&lt;/button&gt;
</span><span class="s">    &lt;/div&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="err">,</span> <span class="na">Prop</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>

<span class="err">@</span><span class="na">Component</span>
<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Tags</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
  <span class="err">@</span><span class="na">Prop</span><span class="err">(</span><span class="na">Array</span><span class="err">)</span> <span class="na">dataSource</span><span class="o">:</span> <span class="na">string</span><span class="err">[]</span> <span class="err">|</span> <span class="na">undefined</span><span class="err">;</span>
  <span class="na">selectedTags</span><span class="o">:</span> <span class="na">string</span><span class="err">[]</span> <span class="err">=</span> <span class="err">[];</span>

  <span class="na">toggle</span><span class="err">(</span><span class="na">tag</span><span class="o">:</span> <span class="na">string</span><span class="err">)</span> <span class="p">{</span>
    <span class="na">const</span> <span class="na">index </span><span class="o">=</span> <span class="na">this.selectedTags.indexOf</span><span class="err">(</span><span class="na">tag</span><span class="err">);</span>
    <span class="na">if</span> <span class="err">(</span><span class="na">index</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">tags</span> <span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="o">:</span> <span class="nx">column</span><span class="o">-</span><span class="nx">reverse</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">grow</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
  <span class="o">&gt;</span> <span class="p">.</span><span class="nx">current</span> <span class="p">{</span>
    <span class="nx">order</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
    <span class="nx">flex</span><span class="o">-</span><span class="nx">wrap</span><span class="o">:</span> <span class="nx">wrap</span><span class="p">;</span>
    <span class="o">&gt;</span> <span class="nx">li</span> <span class="p">{</span>
      <span class="nx">$h</span><span class="o">:</span> <span class="mi">24</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">$bg</span><span class="o">:</span> <span class="err">#</span><span class="nx">d9d9d9</span><span class="p">;</span>
      <span class="nx">background</span><span class="o">:</span> <span class="nx">$bg</span><span class="p">;</span>
      <span class="nx">height</span><span class="o">:</span> <span class="nx">$h</span><span class="p">;</span>
      <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="nx">$h</span><span class="p">;</span>
      <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="p">(</span><span class="nx">$h</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
      <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">12</span><span class="nx">px</span><span class="p">;</span>
      <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
      <span class="o">&amp;</span><span class="p">.</span><span class="nx">selected</span> <span class="p">{</span>
        <span class="nx">background</span><span class="o">:</span> <span class="nx">darken</span><span class="p">(</span><span class="nx">$bg</span><span class="p">,</span> <span class="mi">50</span><span class="o">%</span><span class="p">);</span>
        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="o">&gt;</span> <span class="p">.</span><span class="k">new</span> <span class="p">{</span>
    <span class="nx">padding</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
    <span class="nx">button</span> <span class="p">{</span>
      <span class="nx">background</span><span class="o">:</span> <span class="nx">transparent</span><span class="p">;</span>
      <span class="nx">border</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
      <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span><span class="p">;</span>
      <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">999</span><span class="p">;</span>
      <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>新增标签的逻辑</p>
</blockquote>
<ul>
<li>点击 新增标签 按钮 绑定点击事件 <code>&lt;button @click=&quot;createTag&quot;&gt;新增标签&lt;/button&gt;</code></li>
<li>创建标签的方法 <code>createTag(){...}</code></li>
<li>创建标签后 不能直接操作外部数据
<ul>
<li>通过发布一个自定义事件来通知外部改变数据</li>
<li>TS 在声明外部数据时 添加 <code>readonly</code> 属性</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tags&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;current&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">v-for</span><span class="s">=&#34;tag in dataSource&#34;
</span><span class="s">          :key=&#34;tag&#34;
</span><span class="s">          @click=&#34;toggle(tag)&#34;
</span><span class="s">          :class=&#34;{selected: selectedTags.indexOf(tag)&gt;=0 }&#34;&gt;{{ tag }}
</span><span class="s">      &lt;/li&gt;
</span><span class="s">    &lt;/ul&gt;
</span><span class="s">    &lt;div class=&#34;new&#34;&gt;
</span><span class="s">      &lt;button @click=&#34;createTag&#34;&gt;新增标签&lt;/button&gt;
</span><span class="s">    &lt;/div&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="err">,</span> <span class="na">Prop</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>

<span class="err">@</span><span class="na">Component</span>
<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Tags</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
  <span class="err">@</span><span class="na">Prop</span><span class="err">(</span><span class="na">Array</span><span class="err">)</span> <span class="na">readonly</span> <span class="na">dataSource</span><span class="o">:</span> <span class="na">string</span><span class="err">[]</span> <span class="err">|</span> <span class="na">undefined</span><span class="err">;</span>
  <span class="na">selectedTags</span><span class="o">:</span> <span class="na">string</span><span class="err">[]</span> <span class="err">=</span> <span class="err">[];</span>

  <span class="na">toggle</span><span class="err">(</span><span class="na">tag</span><span class="o">:</span> <span class="na">string</span><span class="err">)</span> <span class="p">{</span>
    <span class="na">const</span> <span class="na">index </span><span class="o">=</span> <span class="na">this.selectedTags.indexOf</span><span class="err">(</span><span class="na">tag</span><span class="err">);</span>
    <span class="na">if</span> <span class="err">(</span><span class="na">index</span> <span class="p">&gt;</span><span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">createTag</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="s1">&#39;请输入标签名&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:dataSource&#39;</span><span class="p">,</span> <span class="p">[...</span><span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">,</span> <span class="nx">name</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>通知父组件更改数据 <code>this.$emit('update:dataSource', [...this.dataSource, name]);</code></li>
<li><code>&lt;Tags :data-source=&quot;tags&quot; @update:dataSource=&quot;tags = $event&quot;/&gt;</code></li>
<li><code>.sync</code>语法糖简写 <code>&lt;Tags :data-source.sync=&quot;tags&quot;/&gt;</code></li>
</ul>
<blockquote>
<p><code>.sync</code>修饰符 <code>Money.vue</code></p>
</blockquote>
<ul>
<li>子组件触发 <code>this.$emit('undate:dataXxx', [...args])</code></li>
<li>在父组件中对应标签绑定的属性上添加<code>.sync</code>修饰符 就得到子组件传来的数据<code>[...args]</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span><span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span><span class="s1">&#39;食&#39;</span><span class="p">,</span><span class="s1">&#39;住&#39;</span><span class="p">,</span><span class="s1">&#39;行&#39;</span><span class="p">,</span><span class="s1">&#39;理财&#39;</span><span class="p">];</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>TS 的 prop 类型错误</p>
</blockquote>
<ul>
<li>留了一个坑，不写 <code>@Props(这里的类型)</code>，只写冒号后面的类型，<code>@Prop() xxx!: boolean; </code></li>
<li>这种偷懒的写法会在很后面造成一个 bug。应该写成 <code>@Prop(Boolean) xxx!: boolean; </code></li>
<li>原因:
<ul>
<li>左边的 <code>Boolean</code> 是跟 <code>Vue</code> 说 <code>xxx</code> 的类型是 <code>Boolean</code>（运行时类型）</li>
<li>如果不写左边的 <code>Boolean</code>，那么 <code>Vue</code> 就不知道 <code>xxx</code> 的类型是什么了，默认就把 <code>xxx</code> 当作字符串了</li>
<li>因此，当你给 <code>xxx</code> 传值时，<code>Vue</code> 会将其自动转换成字符串。而与我们的预期「<code>xxx</code> 是 <code>boolean</code>」不相符，这就是 <code>bug</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="收集四个组件的-value">收集四个组件的 value</h2>
<blockquote>
<p>收集最新选中的标签</p>
</blockquote>
<ul>
<li>触发<code>toggle(){...}</code>时，发布数据给父组件<code>Money</code>的<code>&lt;Tags/&gt;</code>标签 <code>this.$emit('update:selectedTags', this.selectedTags);</code></li>
</ul>
<blockquote>
<p><code>Tags.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="nx">toggle</span><span class="p">(</span><span class="nx">tag</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:selectedTags&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectedTags</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">...</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">selectedTags</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>同样地，分别收集标签的备注信息、类型信息、数额信息（按<code>ok</code>时） <code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateType&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateAmount&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">selectedTags</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValues</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">notesValues</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">onUpdateType</span><span class="p">(</span><span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">onUpdateAmount</span><span class="p">(</span><span class="nx">amount</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">amount</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>Notes.vue</code>为数据<code>inputValue</code>添加监视属性<code>watch</code> 使用 TS <code>@Watch</code>装饰器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;div_notes&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notes&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;name&#34;</span><span class="p">&gt;</span><span class="nx">备注</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span>
             <span class="nt">v-model</span><span class="s">=&#34;inputValue&#34;
</span><span class="s">             placeholder=&#34;在这里输入备注&#34;/&gt;
</span><span class="s">    &lt;/label&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="err">,</span> <span class="na">Watch</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>

<span class="err">@</span><span class="na">Component</span>
<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Notes</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
  <span class="na">inputValue </span><span class="o">=</span> <span class="s">&#39;&#39;</span><span class="err">;</span>

  <span class="err">@</span><span class="na">Watch</span><span class="err">(&#39;</span><span class="na">inputValue</span><span class="err">&#39;)</span>
  <span class="na">oninputValueChanged</span><span class="err">(</span><span class="na">newValue</span><span class="o">:</span> <span class="na">string</span><span class="err">,</span> <span class="na">oldValue</span><span class="o">:</span> <span class="na">string</span><span class="err">)</span> <span class="p">{</span>
    <span class="na">this.</span><span class="err">$</span><span class="na">emit</span><span class="err">(&#39;</span><span class="na">update</span><span class="o">:</span><span class="na">value</span><span class="err">&#39;,</span> <span class="na">newValue</span><span class="err">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="na">...</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li><code> oldValue: string</code> 没用到，可删</li>
</ul>
<blockquote>
<p><code>Types.vue</code>在<code>selectType()</code>触发时 <code>this.$emit('update:value'', value)</code>?</p>
</blockquote>
<ul>
<li>为避免数据没有变化时重复触发<code>selectType()</code>，使用 TS <code>@Watch</code>装饰器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">...</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="p">...</span>
  <span class="c1">// watch
</span><span class="c1"></span><span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span>
<span class="nx">onTypeChanged</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:value&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>this.$emit('update:value', value);</code>
<ul>
<li>注意不带<code>'@update:value'</code></li>
<li>勿写成<code>this.$emit('@update:value', value);</code></li>
</ul>
</li>
</ul>
<blockquote>
<p><code>Numpad.vue</code>在<code>confirmContent()</code>触发时 <code>this.$emit('update:value'', this.output)</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">...</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>
<span class="nx">confirmContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// confirm save to Tags
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span>
    <span class="c1">// recover
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Money.vue</code>监听四个组件的变化，并收集传值放到<code>Record</code>类的数据<code>record</code>中</p>
</blockquote>
<ul>
<li>TS 声明数据类型</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span>: <span class="kt">string</span><span class="p">[];</span>
    <span class="nx">notes</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="kr">type</span><span class="o">:</span> <span class="kt">string</span><span class="p">;</span>
    <span class="nx">amount</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>再声明数据（复杂类型）并赋初始值<code>record: Record = {tags: [], notes: '', type: '-', amount: 0}</code></li>
<li>触发对应方法时改变数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateType&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateAmount&#34;</span><span class="p">/&gt;</span>
    <span class="p">{{</span><span class="nx">record</span><span class="p">}}</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="nx">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[];</span>
  <span class="nx">notes</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">amount</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">};</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateType</span><span class="p">(</span><span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateAmount</span><span class="p">(</span><span class="nx">amount</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">amount</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">amount</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>父组件统一传默认值给子组件</p>
</blockquote>
<ul>
<li>子组件的默认数据靠父组件传值而来，而在子组件自己内部赋的默认值是不可靠的。(有可能变更需求时忘记改)</li>
<li><code>Type.vue</code> 组件中的数据<code>type</code>应该是由父组件传入
<ul>
<li>无需声明 data <code>type = '-'; // '-' 表示支出， '+'表示收入</code></li>
<li>无需监视 <code>@Watch('type')</code></li>
</ul>
</li>
<li><code>&lt;Types :value=&quot;record.type&quot; @update:value=&quot;onUpdateType&quot;/&gt;</code>
<ul>
<li>简化<code>&lt;Types :value.sync=&quot;record.type&quot;/&gt;</code></li>
</ul>
</li>
<li>其它组件也做同样操作</li>
</ul>
<blockquote>
<p><code>Numpad.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="kd">@Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Numpad</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="kd">@Prop</span><span class="p">()</span> <span class="kr">readonly</span> <span class="nx">value</span><span class="o">!:</span> <span class="kt">number</span><span class="p">;</span>
  <span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>

  <span class="nx">inputContent</span><span class="p">(</span><span class="nx">event</span>: <span class="kt">MouseEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="kr">as</span> <span class="nx">HTMLButtonElement</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">textContent</span> <span class="kr">as</span> <span class="kt">string</span><span class="p">;</span>
    <span class="c1">// 显示的数字长短限制
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;别做白日梦啦&#39;</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// &#39;0&#39;开头的逻辑
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;0123456789&#39;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// &#39;.&#39;的逻辑
</span><span class="c1"></span>        <span class="c1">// 按数字位数 拼接 字符串
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// &#39;.&#39;开头的逻辑
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">dotIndex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">dotIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// &#39;.&#39;重复判断
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span> <span class="o">===</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
      <span class="c1">// &#39;.&#39;限制小数位 2位
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">dotIndex</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">removeContent() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">clearContent() {</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">confirmContent() {</span>
    <span class="c1">// confirm save to Tags
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span>
    <span class="c1">// recover
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Types.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="kr">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="kd">@Component</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Types</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="kd">@Prop</span><span class="p">()</span> <span class="kr">readonly</span> <span class="kr">type</span><span class="o">!:</span> <span class="kt">string</span><span class="p">;</span>

  <span class="c1">// method
</span><span class="c1"></span>  <span class="nx">selectType</span><span class="p">(</span><span class="kr">type</span><span class="o">:</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="kr">type</span> <span class="o">!==</span> <span class="s1">&#39;-&#39;</span> <span class="o">&amp;&amp;</span> <span class="kr">type</span> <span class="o">!==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;type is unknown&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:type&#39;</span><span class="p">,</span> <span class="kr">type</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="sync-四个组件的-value"><code>.sync</code> 四个组件的 value</h2>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:type.sync</span><span class="s">=&#34;record.type&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">:value.sync</span><span class="s">=&#34;record.amount&#34;</span><span class="p">/&gt;</span>
    <span class="p">{{</span><span class="nx">record</span><span class="p">}}</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="nx">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[];</span>
  <span class="nx">notes</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">amount</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">};</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="windowlocalstorage存储四个组件的-value"><code>window.localStorage</code>存储四个组件的 value</h2>
<ul>
<li>需要将收集的 <code>record</code> 保存到本地</li>
</ul>
<blockquote>
<p><code>Numpad.vue</code>添加按下 ok 发布提交数据事件的逻辑</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="nx">confirmContent() {</span>
    <span class="c1">// confirm save to Tags
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:value&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span>
    <span class="c1">// recover
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<ul>
<li>监听提交事件<code>&lt;Numpad :value.sync=&quot;record.amount&quot; @submit=&quot;saveRecord&quot;/&gt;</code></li>
<li>保存记录方法<code>saveRecord(){ this.recordList.push(this.record);}</code>
<ul>
<li>注意保存数据的操作逻辑统一放到监听数据变化的<code>@Watch</code>上</li>
<li>避免多处出现保存数据的操作</li>
<li>好处是只要发现监听的数据变化了，自动触发<code>@Watch</code>的方法</li>
</ul>
</li>
<li>用<code>@Watch('recordList')</code>监听<code>recordList</code>变化<code>onRecordeChange() {localStorage.setItem('recordList', JSON.stringify(this.recordList))}</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:type.sync</span><span class="s">=&#34;record.type&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">:value.sync</span><span class="s">=&#34;record.amount&#34;</span> <span class="nt">@submit</span><span class="s">=&#34;saveRecord&#34;</span><span class="p">/&gt;</span>
    <span class="p">{{</span> <span class="nx">record</span> <span class="p">}}</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="nx">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[];</span>
  <span class="nx">notes</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">amount</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">};</span>
  <span class="nx">recordList</span><span class="o">:</span> <span class="nx">Record</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">saveRecord</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span>
  <span class="nx">onRecordeChange</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>数据引用的Bug</p>
</blockquote>
<ul>
<li>生成多条数据后，查看<code>Application</code>里保存的<code>localStorage</code>中保存的数据都一样</li>
<li>保存记录<code>saveRecord(){ this.recordList.push(this.record);}</code>推入数组的是一个内存的地址引用</li>
<li>需要深拷贝数据 <code>JSON.parse(JSON.stringify())</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="p">...</span>
<span class="nx">saveRecord() {</span>
    <span class="kr">const</span> <span class="nx">clonedRecord</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">));</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">clonedRecord</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>读取<code>localStorage</code></p>
</blockquote>
<ul>
<li>默认的<code>recordList</code>从 <code>window.localStorage.getItem('recordList')</code>中读取</li>
<li>注意<code>recordList</code>的类型是<code>Record[]</code> 复杂数组</li>
<li><code>window.localStorage.getItem('recordList')</code>读取的数据是以字符串形式保存的</li>
<li>反序列化<code>JSON.parse()</code></li>
<li>TS 提示 <code>window.localStorage.getItem('recordList')</code>有可能取到的值是<code>null</code></li>
<li><code>window.localStorage.getItem('xxx')</code>获取一个没有<code>setItem</code>的<code>key</code>就会得到<code>null</code></li>
<li>解决方法是赋一个空的字符串数组<code>recordList: Record[] = JSON.parse(window.localStorage.getItem('recordList') ?? '[]');</code></li>
<li><code>recordList: Record[] = JSON.parse(window.localStorage.getItem('recordList') || '[]');</code></li>
</ul>
<hr>
<blockquote>
<p>保存数据时再加一个时间戳<code>createdAt: new Date(2020,0,0)</code></p>
</blockquote>
<ul>
<li>TS 声明类型时除了写基本数据类型外，还可以写内置的对象（类/构造函数）</li>
<li><code>type Record = { tags: string[]; notes: string; type: string; amount: number; createdAt: Date | undefined; }</code></li>
<li><code>type Record = { tags: string[]; notes: string; type: string; amount: number; createdAt?: Date; }</code></li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:type.sync</span><span class="s">=&#34;record.type&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">:value.sync</span><span class="s">=&#34;record.amount&#34;</span> <span class="nt">@submit</span><span class="s">=&#34;saveRecord&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>

<span class="nx">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[];</span>
  <span class="nx">notes</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nx">amount</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nx">createdAt</span><span class="o">?:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">createdAt</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
  <span class="p">};</span>
  <span class="nx">recordList</span><span class="o">:</span> <span class="nx">Record</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">saveRecord</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">clonedRecord</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">));</span>
    <span class="nx">clonedRecord</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">clonedRecord</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span>
  <span class="nx">onRecordeChange</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>之前的<code>localStorage</code>中未保存时间戳，新加的数据带有时间戳</p>
</blockquote>
<h2 id="数据迁移是什么数据库版本">*数据迁移是什么（数据库版本）</h2>
<ul>
<li>在<code>localStorage</code>中添加数据库版本</li>
<li><code>window.localStorage.setItem('version', '0.0.1');</code></li>
<li>数据迁移：数据库升级 补充或消除原先的数据</li>
<li>数据迁移复用，一次只做一个版本的迁移；跨版本只需一次一次地升级</li>
<li>预先规划好数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// local data version
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">version</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">)</span> <span class="o">??</span> <span class="mi">0</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">recordList</span><span class="o">:</span> <span class="nx">Record</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">);</span>
<span class="c1">// 数据库升级 数据迁移
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="nx">version</span> <span class="o">===</span> <span class="s1">&#39;0.0.1&#39;</span> <span class="cm">/* 字符串默认比较字典序 */</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">recordList</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">record</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">record</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="c1">// 保存数据
</span><span class="c1"></span>  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">recordList</span><span class="p">));</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0.2&#39;</span><span class="p">);</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="mvc-封装model-封装数据库本地存储有关的操作"><code>MVC</code> 封装<code>Model</code> 封装数据（库/本地存储）有关的操作</h2>
<ul>
<li>获取数据<code>fetchData() {...}</code></li>
<li>保存数据<code>saveData() {...}</code></li>
<li>导出<code>export default model</code></li>
<li>引用<code>import model from '@/model.js'</code>到<code>Money.vue</code></li>
</ul>
<blockquote>
<p><code>model.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;recordList&#39;</span>
<span class="kr">const</span> <span class="nx">model</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">fetchData</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">saveData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// export default model
</span><span class="c1"></span><span class="kr">export</span> <span class="p">{</span><span class="nx">model</span><span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><code>Money.vue</code>引入<code>model.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="p">...</span>
<span class="kr">const</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@/model.js&#39;</span><span class="p">).</span><span class="nx">model</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
<span class="p">...</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>TS 中不能用<code>import</code>直接引入 JS 的模块 比如<code>import model from '@/model.js';</code></li>
<li>使用<code>require('xxx').default</code>语法引入<code>model.js</code>默认导出的<code>export default model</code>：<code>const model = require('@/model.js').model;</code></li>
<li>或者在<code>model.js</code>中<code>export {model}</code>
<ul>
<li>在<code>Money.vue</code>中<code>require('xxx').model</code></li>
</ul>
</li>
<li>或用解构<code>const {model} = require('@/model.js').model</code>
<ul>
<li>在<code>Money.vue</code>中<code>require('xxx')</code></li>
</ul>
</li>
<li>缺点是导入的JS模块是没有任何类型信息的</li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:type.sync</span><span class="s">=&#34;record.type&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">:value.sync</span><span class="s">=&#34;record.amount&#34;</span> <span class="nt">@submit</span><span class="s">=&#34;saveRecord&#34;</span><span class="p">/&gt;</span>
    <span class="p">{{</span> <span class="nx">recordList</span> <span class="p">}}</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="c1">// import model from &#39;@/model.js&#39;; // TS 中不能用`import`直接引入 JS 的模块
</span><span class="c1">// const model = require(&#39;@/model.js&#39;).model;
</span><span class="c1"></span><span class="kr">const</span> <span class="p">{</span><span class="nx">model</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@/model.js&#39;</span><span class="p">);</span>

<span class="c1">// 局部声明
</span><span class="c1"></span><span class="nx">type</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[];</span> <span class="nx">notes</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">string</span><span class="p">;</span> <span class="nx">amount</span><span class="o">:</span> <span class="nx">number</span><span class="p">;</span> <span class="nx">createdAt</span><span class="o">?:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span> <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">createdAt</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
  <span class="p">};</span>
  
  <span class="c1">// recordList: Record[] = JSON.parse(window.localStorage.getItem(&#39;recordList&#39;) ?? &#39;[]&#39;);
</span><span class="c1"></span>  <span class="nx">recordList</span><span class="o">:</span> <span class="nx">Record</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">saveRecord</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">clonedRecord</span><span class="o">:</span> <span class="nx">Record</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">));</span>
    <span class="nx">clonedRecord</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">clonedRecord</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span>
  <span class="nx">onRecordeChange</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">model</span><span class="p">.</span><span class="nx">saveData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">...</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p><code>model.ts</code></p>
</blockquote>
<ul>
<li>全局声明类型时避免类型冲突 <code>Record</code> &ndash;&gt; <code>RecordItem</code></li>
<li>新建TS全局声明文件<code>custom.d.ts</code>，文件名任意，只需注意后缀<code>*.d.ts</code></li>
</ul>
<blockquote>
<p><code>custom.d.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">type</span> <span class="nx">RecordItem</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">tags</span>: <span class="kt">string</span><span class="p">[];</span>
  <span class="nx">notes</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="kr">type</span><span class="o">:</span> <span class="kt">string</span><span class="p">;</span>
  <span class="nx">amount</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">createdAt?</span>: <span class="kt">Date</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>model.js</code>文件名改写为<code>model.ts</code></li>
<li>可识别 TS 文件的默认导出<code>import {model} from '@/model.ts';</code></li>
<li>声明形参的类型<code>saveData(data: RecordItem[]) {...}</code></li>
<li>断言返回值的类型 <code>return JSON.parse(window.localStorage.getItem(localStorageKeyName) ?? '[]') as RecordItem[];</code></li>
<li>封装深拷贝<code>clone</code>方法</li>
</ul>
<blockquote>
<p><code>mdoel.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;recordList&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">model</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">fetchData() {</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">RecordItem</span><span class="p">[];</span>
  <span class="p">},</span>
  <span class="nx">saveData</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">RecordItem</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// export default model
</span><span class="c1">// export {model}
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="nx">model</span><span class="p">;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>删除<code>Money.vue</code>中重复的类型声明<code>recordList: RecordItem[] = model.fetchData();</code>
<ul>
<li><code>model.fetchData()</code>已经在<code>model.ts</code>中声明返回值的类型，无需重复声明<code>recordList: RecordItem[]</code></li>
</ul>
</li>
<li>在声明时提前写好类型断言，调用时就可以不写， TS 自动推测</li>
</ul>
<blockquote>
<p><code>mdoel.ts</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="kr">const</span> <span class="nx">localStorageKeyName</span> <span class="o">=</span> <span class="s1">&#39;recordList&#39;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">recordListModel</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">clone</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">RecordItem</span> <span class="o">|</span> <span class="nx">RecordItem</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span> <span class="kr">as</span> <span class="nx">RecordItem</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">fetchData() {</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">)</span> <span class="o">??</span> <span class="s1">&#39;[]&#39;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">RecordItem</span><span class="p">[];</span>
  <span class="p">},</span>
  <span class="nx">saveData</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">RecordItem</span><span class="p">[])</span> <span class="p">{</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">localStorageKeyName</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="c1">// export default model
</span><span class="c1">// export {model}
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="nx">recordListModel</span><span class="p">;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>导入<code>import {model} from '@/model.ts'; // export {model}</code></li>
<li>或改成<code>import recordListModel from '@/mdoel.ts'; // export default model</code></li>
</ul>
<blockquote>
<p><code>Money.vue</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Layout</span> <span class="na">class</span><span class="nt">-prefix</span><span class="err">=&#34;</span><span class="na">layout</span><span class="err">&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Tags</span> <span class="nt">:data-source.sync</span><span class="s">=&#34;tags&#34;</span> <span class="nt">@update:selectedTags</span><span class="s">=&#34;onUpdate&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Notes</span> <span class="nt">@update:value</span><span class="s">=&#34;onUpdateNotes&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Types</span> <span class="nt">:type.sync</span><span class="s">=&#34;record.type&#34;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">Numpad</span> <span class="nt">:value.sync</span><span class="s">=&#34;record.amount&#34;</span> <span class="nt">@submit</span><span class="s">=&#34;saveRecord&#34;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Tags</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Tags.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Notes</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Notes.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Types</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Types.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Numpad</span> <span class="nx">from</span> <span class="s1">&#39;@/components/Money/Numpad.vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Watch</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-property-decorator&#39;</span><span class="p">;</span>
<span class="c1">// import model from &#39;@/model.js&#39;; // TS 中不能用`import`直接引入 JS 的模块
</span><span class="c1">// const model = require(&#39;@/model.js&#39;).model;
</span><span class="c1">// const {model} = require(&#39;@/model.ts&#39;);
</span><span class="c1">// import {model} from &#39;@/model.ts&#39;; // export {model}
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">recordListModel</span> <span class="nx">from</span> <span class="s1">&#39;@/mdoel.ts&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Numpad</span><span class="p">,</span> <span class="nx">Types</span><span class="p">,</span> <span class="nx">Notes</span><span class="p">,</span> <span class="nx">Tags</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Money</span> <span class="kr">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nx">tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;衣&#39;</span><span class="p">,</span> <span class="s1">&#39;食&#39;</span><span class="p">,</span> <span class="s1">&#39;住&#39;</span><span class="p">,</span> <span class="s1">&#39;行&#39;</span><span class="p">,</span> <span class="s1">&#39;理财&#39;</span><span class="p">];</span>
  <span class="nx">record</span><span class="o">:</span> <span class="nx">RecordItem</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">tags</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">notes</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">createdAt</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
  <span class="p">};</span>
  
  <span class="c1">// recordList: Record[] = JSON.parse(window.localStorage.getItem(&#39;recordList&#39;) ?? &#39;[]&#39;);
</span><span class="c1"></span>  <span class="c1">// recordList: RecordItem[] = model.fetchData();
</span><span class="c1"></span>  <span class="nx">recordList</span> <span class="o">=</span> <span class="nx">recordListModel</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>

  <span class="nx">onUpdate</span><span class="p">(</span><span class="nx">selectedTags</span><span class="o">:</span> <span class="nx">string</span><span class="p">[])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">tags</span> <span class="o">=</span> <span class="nx">selectedTags</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">onUpdateNotes</span><span class="p">(</span><span class="nx">notesValue</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">notes</span> <span class="o">=</span> <span class="nx">notesValue</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">saveRecord</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">clonedRecord</span> <span class="o">=</span> <span class="nx">recordListModel</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">record</span><span class="p">);</span>
    <span class="nx">clonedRecord</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">clonedRecord</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="err">@</span><span class="nx">Watch</span><span class="p">(</span><span class="s1">&#39;recordList&#39;</span><span class="p">)</span>
  <span class="nx">onRecordeChange</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">recordListModel</span><span class="p">.</span><span class="nx">saveData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">recordList</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
<span class="p">.</span><span class="nx">layout</span><span class="o">-</span><span class="nx">content</span> <span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
  <span class="nx">flex</span><span class="o">-</span><span class="nx">direction</span><span class="o">:</span> <span class="nx">column</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="一些bug修正与代码重构">一些bug修正与代码重构</h2>
<h3 id="使用事件代理">使用事件代理</h3>
<hr>
<h3 id="成功-按条件-给不同的事件类型click--touchstart-动态绑定-一个-按条件选出的事件">成功 按条件 给不同的事件类型(click | touchstart) 动态绑定 一个 按条件选出的事件</h3>
<ul>
<li><code>@[clientEvent]=&quot;handleButtonFn($event, item.bundleEvent)&quot;</code></li>
<li>显示地传参事件对象<code>$event</code></li>
<li><code>:name=&quot;item.id&quot;</code> <code>'delete' | 'clear' | 'ok'</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;numpad&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;output&#34;</span><span class="p">&gt;{{</span> <span class="nx">output</span> <span class="o">||</span> <span class="s1">&#39;0&#39;</span> <span class="p">}}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span> <span class="nt">@mousemove</span><span class="s">=&#34;showSearchlight&#34;</span> <span class="nt">:style</span><span class="s">=&#34;searchlightStyle&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">v-for</span><span class="s">=&#34;(item, index) in numPadText&#34;
</span><span class="s">              :data-index=&#34;index&#34;
</span><span class="s">              :key=&#34;item.id&#34;
</span><span class="s">              @[clientEvent]=&#34;handleButtonFn($event, item.bundleEvent)&#34;
</span><span class="s">              :class=&#34;{ok: item.id === &#39;ok&#39;, zero: item.id === &#39;zero&#39; }&#34;&gt;{{ item.text }}
</span><span class="s">        &lt;Icon v-if=&#34;item.name !== &#39;num&#39;&#34; :name=&#34;item.id&#34;/&gt;
</span><span class="s">      &lt;/button&gt;
</span><span class="s">    &lt;/div&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
  <span class="na">...</span>
  <span class="na">eventName </span><span class="o">=</span> <span class="s">&#39;click&#39;</span><span class="err">;</span>
  <span class="na">output </span><span class="o">=</span> <span class="na">this.amount.toString</span><span class="err">();</span>

<span class="err">//</span> <span class="na">按条件</span> <span class="na">给不同的事件类型</span><span class="err">(</span><span class="na">click</span> <span class="err">|</span> <span class="na">touchstart</span><span class="err">)</span>
  <span class="na">get</span> <span class="na">clientEvent</span><span class="err">()</span> <span class="p">{</span>
    <span class="na">if</span> <span class="err">(</span><span class="na">document.documentElement.clientWidth</span> <span class="p">&gt;</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">eventName</span> <span class="o">=</span> <span class="s1">&#39;click&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">eventName</span> <span class="o">=</span> <span class="s1">&#39;touchstart&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventName</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">numPadText</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;removeNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;clear&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;clearNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;confirmNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;zero&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;num&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;dot&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;dot&#39;</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="o">:</span> <span class="s1">&#39;inputNum&#39;</span><span class="p">},</span>
  <span class="p">];</span>

  <span class="nx">handleButtonFn</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">bundleEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">bundleEvent</span><span class="p">;</span>
    <span class="k">this</span><span class="p">[</span><span class="nx">fn</span><span class="p">](</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">inputNum</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="nx">TouchEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="nx">as</span> <span class="nx">HTMLButtonElement</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="nx">as</span> <span class="nx">string</span><span class="p">;</span>
    <span class="c1">// &#39;0&#39;开头的逻辑
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;0123456789&#39;</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// &#39;.&#39;的逻辑 // 按数字位数 拼接 字符串
</span><span class="c1"></span>        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// &#39;.&#39;开头的逻辑
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">dotIndex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">dotIndex</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// &#39;.&#39;重复判断
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span> <span class="o">===</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
      <span class="c1">// &#39;.&#39;限制小数位 2位
</span><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">dotIndex</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span><span class="p">;}</span>
    <span class="p">}</span>
    <span class="c1">// 限制显示数字长度
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;别做白日梦啦&#39;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">removeNum</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">+=</span> <span class="nx">input</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">removeNum</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span> <span class="nx">TouchEvent</span><span class="p">,</span> <span class="nx">number</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">number</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">clearNum</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">clearNum</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">confirmNum</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">number</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">output</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">number</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;checkZero&#39;</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;update:amount&#39;</span><span class="p">,</span> <span class="nx">number</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$nextTick</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<blockquote>
<p>内置事件类型名注意全小写<code>mousemove</code> <code>touchstart</code></p>
</blockquote>
<ul>
<li>通过浏览器开发工具&gt;事件侦听器查看具体的元素上绑定的事件名是否写错</li>
</ul>
<hr>
<h3 id="实现仿win10计算器和日历的探照灯效果">实现仿win10计算器和日历的探照灯效果</h3>
<ul>
<li><code>getParent()</code> 找父节点</li>
<li><code>showSearchlight()</code> 显示探照灯</li>
<li><code>background: radial-gradient(circle at var(--x-pos) var(--y-pos), #aaa, transparent 100px);</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;numpad&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;output&#34;</span><span class="p">&gt;{{</span> <span class="nx">output</span> <span class="o">||</span> <span class="s1">&#39;0&#39;</span> <span class="p">}}&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buttons&#34;</span> <span class="nt">@mousemove</span><span class="s">=&#34;showSearchlight&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="nt">v-for</span><span class="s">=&#34;(item, index) in numPadText.numPadText123&#34;
</span><span class="s">              :data-index=&#34;index&#34;
</span><span class="s">              :key=&#34;item.id&#34;
</span><span class="s">              @[clientEvent]=&#34;inputNum&#34;&gt;
</span><span class="s">        {{ item.text }}
</span><span class="s">        &lt;Icon v-if=&#34;item.name !== &#39;num&#39;&#34;
</span><span class="s">              name=&#39;delete&#39;/&gt;
</span><span class="s">      &lt;/button&gt;
</span><span class="s">      ...
</span><span class="s">      ...
</span><span class="s">    &lt;/div&gt;
</span><span class="s">  &lt;/div&gt;
</span><span class="s">&lt;/template&gt;
</span><span class="s">
</span><span class="s">&lt;script lang=&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="na">import</span> <span class="na">Vue</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="err">&#39;;</span>
<span class="na">import</span> <span class="p">{</span><span class="na">Component</span><span class="err">,</span> <span class="na">Prop</span><span class="p">}</span> <span class="na">from</span> <span class="err">&#39;</span><span class="na">vue</span><span class="nt">-property-decorator</span><span class="err">&#39;;</span>

<span class="err">@</span><span class="na">Component</span>
<span class="na">export</span> <span class="na">default</span> <span class="na">class</span> <span class="na">Numpad</span> <span class="na">extends</span> <span class="na">Vue</span> <span class="p">{</span>
    <span class="na">...</span>
  <span class="err">//</span> <span class="na">TODO</span> <span class="na">待优化重构</span>  <span class="na">不用</span> <span class="na">DOM</span> <span class="na">操作</span>
  <span class="na">getParent</span><span class="err">(</span><span class="na">curEl</span><span class="o">:</span> <span class="na">HTMLButtonElement</span><span class="err">,</span> <span class="na">parentEl</span><span class="o">:</span> <span class="na">HTMLElement</span><span class="err">)</span> <span class="p">{</span>
    <span class="na">while</span> <span class="err">(</span><span class="na">curEl</span> <span class="err">!==</span> <span class="na">parentEl</span><span class="err">)</span> <span class="p">{</span>
      <span class="na">curEl </span><span class="o">=</span> <span class="na">curEl.parentElement</span> <span class="na">as</span> <span class="na">HTMLButtonElement</span><span class="err">;</span>
    <span class="p">}</span>
    <span class="na">return</span> <span class="na">curEl</span><span class="err">;</span>
  <span class="p">}</span>

  <span class="na">showSearchlight</span><span class="err">(</span><span class="na">e</span><span class="o">:</span> <span class="na">MouseEvent</span><span class="err">)</span> <span class="p">{</span>
    <span class="na">let</span> <span class="na">elem </span><span class="o">=</span> <span class="na">e.target</span> <span class="na">as</span> <span class="na">HTMLButtonElement</span><span class="err">;</span>
    <span class="na">const</span> <span class="na">wrapper </span><span class="o">=</span> <span class="na">document.querySelector</span><span class="err">(&#39;</span><span class="na">.buttons</span><span class="err">&#39;);</span>
    <span class="na">if</span> <span class="err">(</span><span class="na">e.target</span> <span class="err">&amp;&amp;</span> <span class="na">elem</span> <span class="err">!==</span> <span class="na">wrapper</span><span class="err">)</span> <span class="p">{</span>
      <span class="na">elem </span><span class="o">=</span> <span class="na">this.getParent</span><span class="err">(</span><span class="na">e.target</span> <span class="na">as</span> <span class="na">HTMLButtonElement</span><span class="err">,</span> <span class="na">wrapper</span> <span class="na">as</span> <span class="na">HTMLElement</span><span class="err">);</span>
    <span class="p">}</span>
    <span class="na">const</span> <span class="na">x </span><span class="o">=</span> <span class="na">e.clientX</span> <span class="err">-</span> <span class="na">elem.offsetLeft</span><span class="err">;</span>
    <span class="na">const</span> <span class="na">y </span><span class="o">=</span> <span class="na">e.clientY</span> <span class="err">-</span> <span class="na">elem.offsetTop</span><span class="err">;</span>

    <span class="na">document.documentElement.style.setProperty</span><span class="err">(&#39;-</span><span class="nt">-x-pos</span><span class="err">&#39;,</span> <span class="na">x</span> <span class="err">+</span> <span class="err">&#39;</span><span class="na">px</span><span class="err">&#39;);</span>
    <span class="na">document.documentElement.style.setProperty</span><span class="err">(&#39;-</span><span class="nt">-y-pos</span><span class="err">&#39;,</span> <span class="na">y</span> <span class="err">+</span> <span class="err">&#39;</span><span class="na">px</span><span class="err">&#39;);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>


<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="err">@</span><span class="kr">import</span> <span class="s2">&#34;~@/assets/style/global.scss&#34;</span><span class="p">;</span>
<span class="p">.</span><span class="nx">numpad</span> <span class="p">{</span>
  <span class="p">.</span><span class="nx">output</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">.</span><span class="nx">buttons</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="o">&amp;:</span><span class="nx">hover</span> <span class="p">{</span>
      <span class="nx">background</span><span class="o">:</span> <span class="nx">radial</span><span class="o">-</span><span class="nx">gradient</span><span class="p">(</span><span class="nx">circle</span> <span class="nx">at</span> <span class="kd">var</span><span class="p">(</span><span class="o">--</span><span class="nx">x</span><span class="o">-</span><span class="nx">pos</span><span class="p">)</span> <span class="kd">var</span><span class="p">(</span><span class="o">--</span><span class="nx">y</span><span class="o">-</span><span class="nx">pos</span><span class="p">),</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">,</span> <span class="nx">transparent</span> <span class="mi">100</span><span class="nx">px</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="o">&gt;</span> <span class="nx">button</span> <span class="p">{</span>
      <span class="p">...</span>
      <span class="o">&gt;</span> <span class="p">.</span><span class="nx">icon</span> <span class="p">{</span>
        <span class="p">...</span>
        <span class="p">}</span>
      <span class="o">&amp;:</span><span class="nx">hover</span> <span class="p">{</span>
        <span class="nx">border</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ccc</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="o">&amp;:</span><span class="nx">last</span><span class="o">-</span><span class="nx">child</span> <span class="p">{</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">column</span><span class="o">:</span> <span class="mi">2</span><span class="o">/</span><span class="mi">4</span><span class="p">;</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">row</span><span class="o">:</span> <span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="o">&amp;</span><span class="p">.</span><span class="nx">ok</span> <span class="p">{</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">column</span><span class="o">:</span> <span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">row</span><span class="o">:</span> <span class="mi">3</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="o">&amp;</span><span class="p">.</span><span class="nx">zero</span> <span class="p">{</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">column</span><span class="o">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
        <span class="nx">grid</span><span class="o">-</span><span class="nx">row</span><span class="o">:</span> <span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="nx">$bg</span><span class="o">:</span> <span class="err">#</span><span class="nx">f2f2f2</span><span class="p">;</span>
      <span class="o">&amp;:</span><span class="nx">nth</span><span class="o">-</span><span class="nx">child</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">background</span><span class="o">:</span> <span class="nx">$bg</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">...</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>重构searchlight逻辑 不进行DOM操作</p>
</blockquote>
<ul>
<li>绑定节点的<code>style</code>属性</li>
<li>设置变量<code>var(--x)</code>，记录鼠标位置</li>
<li>根据鼠标位置设置<code>background: radial-gradient();</code>的样式</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="c1">// 重构searchlight逻辑  不用 DOM 操作
</span><span class="c1"></span>  <span class="nx">getParent</span><span class="p">(</span><span class="nx">curEl</span>: <span class="kt">HTMLButtonElement</span><span class="p">,</span> <span class="nx">parentEl</span>: <span class="kt">HTMLElement</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">curEl</span> <span class="o">!==</span> <span class="nx">parentEl</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">curEl</span> <span class="o">=</span> <span class="nx">curEl</span><span class="p">.</span><span class="nx">parentElement</span> <span class="kr">as</span> <span class="nx">HTMLButtonElement</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">curEl</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">searchlightPosition</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">x</span>: <span class="kt">0</span><span class="p">,</span>
    <span class="nx">y</span>: <span class="kt">0</span>
  <span class="p">}</span>
  <span class="kr">get</span> <span class="nx">searchlightStyle() {</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="s1">&#39;--x-pos&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">searchlightPosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
      <span class="s1">&#39;--y-pos&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">searchlightPosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">showSearchlight</span><span class="p">(</span><span class="nx">e</span>: <span class="kt">MouseEvent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="kr">as</span> <span class="nx">HTMLButtonElement</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.buttons&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="o">!==</span> <span class="nx">wrapper</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getParent</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="kr">as</span> <span class="nx">HTMLButtonElement</span><span class="p">,</span> <span class="nx">wrapper</span> <span class="kr">as</span> <span class="nx">HTMLElement</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchlightPosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchlightPosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>参考链接：
<ul>
<li><a href="https://juejin.cn/post/6844904144667574286/">win10 calender</a></li>
<li><a href="https://stackoverflow.com/questions/42872002/in-vue-js-component-how-to-use-props-in-css/">stackOverflow In vue.js component, how to use props in css?</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="使用sync">使用<code>.sync</code></h3>
<ul>
<li><code>&lt;FormItem ... @update:inputValue=&quot;onUpdateTips&quot; :inputValue=&quot;record.tips&quot;/&gt;</code>改为：
<ul>
<li><code>&lt;FormItem ... :inputValue.sync=&quot;record.tips&quot;/&gt;</code></li>
<li>原来方法<code>Mehods</code>中的<code>onUpdateTips(value: string) {this.record.tips = value;}</code> 可以删除</li>
</ul>
</li>
</ul>
<blockquote>
<p>成功提交一个记录后，初始化:</p>
</blockquote>
<ul>
<li>标签tags初始化：取消选中标签 <code>this.selectedTags = [];</code></li>
<li>备注tips初始化：清空备注栏 <code>this.record.tips = '';</code></li>
<li>数字盘输出初始化：清空数字输出 <code>this.output = '0';</code></li>
<li>Tab种类无需初始化</li>
</ul>
<blockquote>
<p>标签tags初始化 逻辑</p>
</blockquote>
<ul>
<li>点击OK 成功提交一个记录</li>
<li><code>Numpad.vue -&gt; click Button OK -&gt; confirmNum() -&gt; this.$emit</code></li>
<li><code>('update:deselectTags', true) -&gt; Money.vue</code></li>
<li><code>Money.vue -&gt; &lt;Numpad @update:deselectTags=&quot;deselectTags&quot; /&gt; -&gt; deselectTags(){emptyTags = []}</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="cm">/*
</span><span class="cm">*   点击OK 成功提交一个记录
</span><span class="cm">*   Numpad.vue -&gt; click Button OK -&gt; confirmNum() -&gt; this.$emit(&#39;update:deselectTags&#39;, true) -&gt; Money.vue
</span><span class="cm">*   Money.vue  -&gt; &lt;Numpad @update:deselectTags=&#34;deselectTags&#34; /&gt; -&gt; deselectTags(){emptyTags = []}
</span><span class="cm">*   &lt;Tags :is-deselect-tags=&#34;emptyTags&#34;/&gt;
</span><span class="cm">*   Tags.vue   -&gt; @Prop(Boolean) isDeselectTags!: boolean;
</span><span class="cm">*              -&gt; @Watch(&#39;isDeselectTags&#39;);deselectTag() {...this.selectedTags = [];}
</span><span class="cm">* */</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="单一功能原则">单一功能原则</h3>
<ul>
<li>添加方法 <code>submit()</code> 其中包含单一化逻辑：</li>
<li><code>checkoutRecord()</code></li>
<li><code>alertInform()</code></li>
<li><code>saveRecord()</code></li>
<li><code>reset()</code></li>
</ul>
<blockquote>
<p>统一  成功提交一个记录后，初始化的逻辑</p>
</blockquote>
<ul>
<li><code>Numpad.vue</code>控制 按下OK 按钮
<ul>
<li>通知父组件<code>Money.vue</code>：
<ul>
<li><code>const number = parseFloat(this.output);</code>  <code>this.$emit('update:amount', number);</code> 传值给父组件</li>
<li><code>this.$emit('submit');</code> 通知父组件<code>Money.vue</code>执行自定义事件<code>@submit=&quot;submit&quot;</code></li>
<li><code>Money.vue</code> 开始检查逻辑 <code>checkoutRecord()</code>
<ul>
<li>初始<code>let checkoutResult = true;</code></li>
<li>未选泽标签逻辑 <code>if (!this.record.tags || this.record.tags.length === 0) </code>：<code>checkoutResult = false;</code></li>
<li>已选好标签：<code>return checkoutResult;</code></li>
<li>将<code>checkoutResult</code>值传回给<code>Numpad.vue</code></li>
</ul>
</li>
<li><code>Numpad.vue</code> 开始在下次更新后，执行重置逻辑
<ul>
<li><code> this.$nextTick(() =&gt; {this.reset();});</code></li>
<li><code>reset()</code>判断<code>if (this.isReset)</code>
<ul>
<li><code>true</code>: <code>this.output = '0'; this.$emit('update:deselectTags', true);</code> 重置标签</li>
<li><code>false</code>: <code>this.$emit('update:deselectTags', false);</code> 不清零，不重置标签</li>
</ul>
</li>
</ul>
</li>
<li><code>Money.vue</code> 开始重置逻辑</li>
<li><code>Money.vue</code> 开始重置逻辑</li>
<li></li>
</ul>
</li>
<li>数字盘输出初始化：清空数字输出 <code>this.output = '0';</code></li>
</ul>
</li>
<li><code>Money.vue</code>控制
<ul>
<li>是否成功提交一个记录<code>checkoutRecord()</code></li>
<li>保存记录<code>saveRecord()</code></li>
<li>重置各子组件<code>reset()</code>
<ul>
<li>重置<code>Tags.vue</code>：<code>this.selectedTags = [];</code></li>
<li>重置<code>FormItem.vue</code>：<code>this.record.tips = '';</code></li>
<li>重置<code>Numpad.vue</code>：``</li>
<li>重置<code>Tabs.vue</code>：``</li>
</ul>
</li>
</ul>
</li>
<li><code>Tags.vue</code>控制 标签tags初始化：取消选中标签 <code>this.selectedTags = [];</code></li>
<li><code>FormItem.vue</code>控制 备注tips初始化：清空备注栏 <code>this.record.tips = '';</code></li>
<li><code>Tabs.vue</code>控制 Tab种类无需初始化</li>
</ul>
<hr>
<h2 id="代码httpsgithubcomfrankfangmorney-live-localstorage小结"><a href="https://github.com/FrankFang/morney-live-localstorage">代码</a>小结</h2>
<ul>
<li><code>.sync</code> 怎么用</li>
<li><code>TS</code> 以及装饰器怎么用</li>
<li><code>window.localStorage</code> 怎么用</li>
<li>数据迁移是什么</li>
<li>存储的标签是写死在数据中的<code>tags = ['衣', '食', '住', '行', '理财'];</code> 怎么用<code>Model</code>来存储所有<code>Model</code>相关数据</li>
<li><a href="https://github.com/FrankFang/morney-live-tags">仓库</a></li>
<li><a href="https://github.com/FrankFang/morney-live-tags/commits/master">所有 commits（倒序）</a></li>
</ul>
<hr>
<blockquote>
<p>保存选中状态可用<a href="https://cn.vuejs.org/v2/guide/components-dynamic-async.html"><code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code></a></p>
</blockquote>
<hr>
<hr>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2022-03-29
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/frontend/">FrontEnd</a>
          <a href="http://xmasuhai.xyz/tags/project/">Project</a>
          <a href="http://xmasuhai.xyz/tags/money/">money</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-04vue-%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">【项目 喵内记账 Meoney 04】Vue 全局数据管理</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/project/money/%E9%A1%B9%E7%9B%AE-%E5%96%B5%E5%86%85%E8%AE%B0%E8%B4%A6-meoney-03labels%E7%BB%84%E4%BB%B6/">
            <span class="next-text nav-default">【项目 喵内记账 Meoney 03】Labels组件</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
