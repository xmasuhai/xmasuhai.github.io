<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>【项目 Vue3 轮子】0.0 项目中遇到的问题 - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="项目中遇到的问题与报错 大纲链接§ [toc] 轮子 ⇧ 初步完成的轮子 基于Vue 3.2、TS，使用vite2.0构建打包 使用composition API和语" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.59.1" />


<link rel="canonical" href="http://xmasuhai.xyz/post/project/vueel3/%E9%A1%B9%E7%9B%AE-vue3-%E8%BD%AE%E5%AD%900.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="【项目 Vue3 轮子】0.0 项目中遇到的问题" />
<meta property="og:description" content="项目中遇到的问题与报错 大纲链接§ [toc] 轮子 ⇧ 初步完成的轮子 基于Vue 3.2、TS，使用vite2.0构建打包 使用composition API和语" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/project/vueel3/%E9%A1%B9%E7%9B%AE-vue3-%E8%BD%AE%E5%AD%900.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" />
<meta property="article:published_time" content="2022-04-08T10:04:22+08:00" />
<meta property="article:modified_time" content="2022-05-20T08:40:33+08:00" />
<meta itemprop="name" content="【项目 Vue3 轮子】0.0 项目中遇到的问题">
<meta itemprop="description" content="项目中遇到的问题与报错 大纲链接§ [toc] 轮子 ⇧ 初步完成的轮子 基于Vue 3.2、TS，使用vite2.0构建打包 使用composition API和语">


<meta itemprop="datePublished" content="2022-04-08T10:04:22&#43;08:00" />
<meta itemprop="dateModified" content="2022-05-20T08:40:33&#43;08:00" />
<meta itemprop="wordCount" content="4215">



<meta itemprop="keywords" content="FrontEnd," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="【项目 Vue3 轮子】0.0 项目中遇到的问题"/>
<meta name="twitter:description" content="项目中遇到的问题与报错 大纲链接§ [toc] 轮子 ⇧ 初步完成的轮子 基于Vue 3.2、TS，使用vite2.0构建打包 使用composition API和语"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">【项目 Vue3 轮子】0.0 项目中遇到的问题</h1>
      
      <div class="post-meta">
        <time datetime="2022-04-08" class="post-time">
          2022-04-08
        </time>
        <div class="post-category">
            <a href="http://xmasuhai.xyz/categories/frontend/"> FrontEnd </a>
            
          </div>
        <span class="more-meta"> 约 4215 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li><a href="#项目中遇到的问题与报错">项目中遇到的问题与报错</a>
<ul>
<li><a href="#轮子-a-href-catalogue-a">轮子 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#发布组件库时的-main-路径错误-a-href-catalogue-a">发布组件库时的 <code>main</code> 路径错误 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#rollup-config-js-配置错误及运行-rollup-c-错误-a-href-catalogue-a"><code>rollup.config.js</code>配置错误及运行<code>rollup -c</code>错误 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#vue-tsc-vite-build-a-href-catalogue-a"><code>vue-tsc &amp;&amp; vite build</code> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#build-之后加载-md-文件报错-a-href-catalogue-a">build 之后加载 .md 文件报错 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#prismajs-不显示代码行数-a-href-catalogue-a">Prismajs 不显示代码行数 <a href="#catalogue"> ⇧ </a></a>
<ul>
<li><a href="#提问-a-href-catalogue-a">提问： <a href="#catalogue"> ⇧ </a></a></li>
</ul></li>
<li><a href="#引入的样式没有生效或报错-a-href-catalogue-a">引入的样式没有生效或报错 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#vite-插件-rollup-文档的-命名误导-id-a-href-catalogue-a">vite 插件 rollup 文档的 命名误导 id <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#解构出的-props-数据在-script-setup-中失去数据响应性-a-href-catalogue-a">解构出的 <code>props</code> 数据在 <code>script setup</code> 中失去数据响应性 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#css-import-在-webstorm-中报错-a-href-catalogue-a">CSS <code>@import</code> 在<code>webstorm</code>中报错 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#component-component-必须加上-key-currenttab-属性-a-href-catalogue-a"><code>&lt;component&gt;&lt;/component&gt;</code>必须加上<code>:key=&quot;currentTab&quot;</code>属性 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#警告-vue-warn-extraneous-non-props-attributes-title-were-passed-to-component-but-could-not-be-automatically-inherited-because-component-renders-fragment-or-text-root-nodes-a-href-catalogue-a">警告<code>[Vue warn]: Extraneous non-props attributes (title) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.</code> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#解决hover影响移动端样式-a-href-catalogue-a">解决hover影响移动端样式 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#使用-script-setup-语法糖-无法获取-context-a-href-catalogue-a">使用 <code>script setup</code> 语法糖 无法获取<code>context</code> <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#deep-selector-代替-vue2-x-中-scss-过时的写法-a-href-catalogue-a"><code>:deep(selector)</code> 代替<code>Vue2.x</code>中<code>SCSS</code>过时的写法 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#参考文章-a-href-catalogue-a">参考文章 <a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#相关文章-a-href-catalogue-a">相关文章 <a href="#catalogue"> ⇧ </a></a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h1 id="项目中遇到的问题与报错">项目中遇到的问题与报错</h1>

<blockquote>
<p>大纲链接<a id="catalogue" href="#catalogue" > § </a></p>
</blockquote>

<p>[toc]</p>

<hr />

<h2 id="轮子-a-href-catalogue-a">轮子 <a href="#catalogue"> ⇧ </a></h2>

<p>初步完成的轮子</p>

<ul>
<li>基于Vue 3.2、TS，使用vite2.0构建打包</li>
<li>使用composition API和<script setup>语法糖</li>
<li><a href="https://gitee.com/xmasuhai/vueel3-demo-1">码云仓库地址</a></li>
<li><a href="https://xmasuhai.gitee.io/vueel3-demo-website/#/">在线预览</a></li>
</ul>

<hr />

<h2 id="发布组件库时的-main-路径错误-a-href-catalogue-a">发布组件库时的 <code>main</code> 路径错误 <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p><code>package.json</code> 错误的路径 <code>&quot;./dist/lib/vueel3.js&quot;,</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;vue3-demo-ui-1&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.7&#34;</span><span class="p">,</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;Xu Shuai&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;MIT&#34;</span><span class="p">,</span>
  <span class="nt">&#34;files&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;dist/lib/*&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/lib/vueel3.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/lib/vueel3.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;exports&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;.&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;import&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/vueel3.js&#34;</span><span class="p">,</span>
      <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="s2">&#34;./dist/vueel3.js&#34;</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>package.json</code> 正确的路径 <code>&quot;dist/lib/vueel3.js&quot;,</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;vue3-demo-ui-1&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.0.7&#34;</span><span class="p">,</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;Xu Shuai&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;MIT&#34;</span><span class="p">,</span>
  <span class="nt">&#34;files&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;dist/lib/*&#34;</span>
  <span class="p">],</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/lib/vueel3.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;module&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/lib/vueel3.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;exports&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;.&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;import&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/lib/vueel3.js&#34;</span><span class="p">,</span>
      <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="s2">&#34;dist/lib/vueel3.js&#34;</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<hr />

<h2 id="rollup-config-js-配置错误及运行-rollup-c-错误-a-href-catalogue-a"><code>rollup.config.js</code>配置错误及运行<code>rollup -c</code>错误 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>不使用<code>rollup</code>打包</li>
<li>而直接使用<code>vite</code>的<a href="https://cn.vitejs.dev/guide/build.html#library-mode"><code>library-mode</code> 库模式</a></li>
<li><code>vite.config.ts</code>代替原来的<code>rollup.config.js</code></li>
</ul>

<blockquote>
<p><code>rollup.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// 请先安装 rollup-plugin-esbuild rollup-plugin-vue rollup-plugin-scss sass rollup-plugin-terser
</span><span class="c1">// rollup-plugin-esbuild
</span><span class="c1">// rollup-plugin-vue
</span><span class="c1">// rollup-plugin-scss
</span><span class="c1">// sass
</span><span class="c1">// rollup-plugin-terser
</span><span class="c1">// import path from &#39;path&#39;
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">dartSass</span> <span class="nx">from</span> <span class="s1">&#39;sass&#39;</span>
<span class="kr">import</span> <span class="nx">vuePlugin</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-vue&#39;</span>
<span class="kr">import</span> <span class="nx">esbuildPlugin</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-esbuild&#39;</span>
<span class="kr">import</span> <span class="nx">scssPlugin</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-scss&#39;</span>
<span class="kr">import</span> <span class="nx">bundleSize</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-filesize&#39;</span>
<span class="c1">// import alias from &#39;@rollup/plugin-alias&#39;
</span><span class="c1">// import {nodeResolve} from &#39;@rollup/plugin-node-resolve&#39; // 告诉 Rollup 如何搜寻外部依赖
</span><span class="c1">// import {terser} from &#39;rollup-plugin-terser&#39; // 压缩 js 代码，包括 ES6 代码压缩
</span><span class="c1">// import pkg from &#39;./package.json&#39;
</span><span class="c1"></span>
<span class="c1">// const pathResolve = p =&gt; path.resolve(__dirname, p)
</span><span class="c1"></span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">input</span><span class="o">:</span> <span class="s1">&#39;src/lib/index.ts&#39;</span><span class="p">,</span>
  <span class="nx">external</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vue&#39;</span><span class="p">,</span> <span class="s1">&#39;Vue&#39;</span><span class="p">],</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// exports: &#39;vueel3&#39;,
</span><span class="c1"></span>    <span class="nx">globals</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">vue</span><span class="o">:</span> <span class="s1">&#39;Vue&#39;</span> <span class="c1">// 告诉rollup全局变量vue即是vue
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vueel3-ui&#39;</span><span class="p">,</span>
    <span class="nx">file</span><span class="o">:</span> <span class="s1">&#39;dist/lib/vueel3.js&#39;</span><span class="p">,</span>
    <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;umd&#39;</span><span class="p">,</span> <span class="c1">// format: &#39;cjs&#39;,
</span><span class="c1"></span>    <span class="c1">// plugins: [terser()],
</span><span class="c1"></span>  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="c1">// nodeResolve({browser: true, preferBuiltins: true}),
</span><span class="c1"></span>    <span class="cm">/*
</span><span class="cm">    alias({
</span><span class="cm">      &#39;@&#39;: pathResolve(&#39;.&#39;)
</span><span class="cm">    }),
</span><span class="cm">    */</span>
    <span class="c1">// .vue -&gt; .js
</span><span class="c1"></span>    <span class="nx">vuePlugin</span><span class="p">({</span>
      <span class="nx">include</span><span class="o">:</span> <span class="sr">/\.vue$/</span><span class="p">,</span>
      <span class="cm">/*
</span><span class="cm">      // 把单文件组件中的样式，插入到html中的style标签
</span><span class="cm">      css: true,
</span><span class="cm">      // 把组件转换成 render 函数
</span><span class="cm">      compileTemplate: true,
</span><span class="cm">      template: {
</span><span class="cm">        isProduction: !process.env.ROLLUP_WATCH,
</span><span class="cm">        compilerOptions: {preserveWhitespace: false}
</span><span class="cm">      }
</span><span class="cm">      */</span>
    <span class="p">}),</span>
    <span class="c1">// .ts -&gt; .js
</span><span class="c1"></span>    <span class="nx">esbuildPlugin</span><span class="p">({</span>
      <span class="nx">include</span><span class="o">:</span> <span class="sr">/\.[jt]s$/</span><span class="p">,</span>
      <span class="nx">minify</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
      <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;es2015&#39;</span>
    <span class="p">}),</span>
    <span class="c1">// .scss -&gt; css
</span><span class="c1"></span>    <span class="nx">scssPlugin</span><span class="p">({</span><span class="nx">include</span><span class="o">:</span> <span class="sr">/\.scss$/</span><span class="p">,</span> <span class="nx">sass</span><span class="o">:</span> <span class="nx">dartSass</span><span class="p">}),</span>
    <span class="nx">bundleSize</span><span class="p">(),</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>vite.config.ts</code>开启build lib</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">vue</span> <span class="nx">from</span> <span class="s1">&#39;@vitejs/plugin-vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">defineConfig</span><span class="cm">/*, PluginOption, UserConfig*/</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span><span class="p">;</span> <span class="c1">// const { defineConfig } = require(&#39;vite&#39;)
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">Markdown</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-md&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ViteComponents</span><span class="cm">/*, {Options}*/</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-components&#39;</span><span class="p">;</span>
<span class="c1">// vueCustomBlockTransforms
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">vueCompAddSourceCodeTitleFromCustomBlock</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./plugins/vueCompAddSourceCodeTitleFromCustomBlock&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">terser</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-terser&#39;</span> <span class="c1">// 压缩 js 代码，包括 ES6 代码压缩
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">esbuildPlugin</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-esbuild&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">bundleSize</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-filesize&#39;</span><span class="p">;</span>

<span class="cm">/*// ES6
</span><span class="cm">import path from &#39;path&#39;;
</span><span class="cm">import fs from &#39;fs&#39;;
</span><span class="cm">import marked from &#39;marked&#39;;*/</span>
<span class="c1">// const path = require(&#39;path&#39;); path.resolve(...)
</span><span class="c1">// https://vitejs.dev/config/
</span><span class="c1"></span><span class="kr">const</span> <span class="p">{</span><span class="nx">resolve</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
  <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;./&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">vue</span><span class="p">({</span>
      <span class="nx">include</span><span class="o">:</span> <span class="p">[</span><span class="sr">/\.vue$/</span><span class="p">,</span> <span class="sr">/\.md$/</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="nx">Markdown</span><span class="p">(),</span>
    <span class="nx">ViteComponents</span><span class="p">({</span>
      <span class="nx">dirs</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/markdown&#39;</span><span class="p">],</span>
      <span class="c1">// allow auto load markdown components under `./src/components/`
</span><span class="c1"></span>      <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vue&#39;</span><span class="p">,</span> <span class="s1">&#39;md&#39;</span><span class="p">],</span>

      <span class="c1">// allow auto import and register components used in markdown
</span><span class="c1"></span>      <span class="nx">customLoaderMatcher</span><span class="o">:</span> <span class="p">(</span><span class="nx">path</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;.md&#39;</span><span class="p">),</span>
    <span class="p">}),</span>
    <span class="nx">vueCompAddSourceCodeTitleFromCustomBlock</span><span class="p">(</span><span class="s1">&#39;demo&#39;</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">find</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span>
        <span class="nx">replacement</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;./src&#39;</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="p">{</span><span class="nx">find</span><span class="o">:</span> <span class="sr">/^~@/</span><span class="p">,</span> <span class="nx">replacement</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">)},</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">build</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">outDir</span><span class="o">:</span> <span class="s1">&#39;dist/lib&#39;</span><span class="p">,</span>
    <span class="nx">lib</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">entry</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src/lib/index.ts&#39;</span><span class="p">),</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vueel3-ui&#39;</span><span class="p">,</span>
      <span class="nx">formats</span><span class="o">:</span> <span class="p">[</span><span class="cm">/*&#39;es&#39;, */</span><span class="s1">&#39;umd&#39;</span><span class="p">],</span>
      <span class="nx">fileName</span><span class="o">:</span> <span class="p">(</span><span class="cm">/*format*/</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="sb">`vueel3-ui.js`</span>  <span class="c1">// `vueel3-ui.${format}.js`
</span><span class="c1"></span>    <span class="p">},</span>
    <span class="nx">minify</span><span class="o">:</span> <span class="s1">&#39;esbuild&#39;</span><span class="p">,</span>
    <span class="nx">rollupOptions</span><span class="o">:</span> <span class="p">{</span>
      <span class="c1">// 确保外部化处理那些你不想打包进库的依赖
</span><span class="c1"></span>      <span class="nx">external</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vue&#39;</span><span class="p">],</span>
      <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// 在 UMD 构建模式下为这些外部化的依赖提供一个全局变量
</span><span class="c1"></span>        <span class="nx">globals</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">vue</span><span class="o">:</span> <span class="s1">&#39;Vue&#39;</span>
        <span class="p">},</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;vueel3&#39;</span><span class="p">,</span>
        <span class="c1">// file: &#39;dist/lib/vueel3.js&#39;,
</span><span class="c1"></span>        <span class="nx">format</span><span class="o">:</span> <span class="s1">&#39;umd&#39;</span><span class="p">,</span>
        <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">terser</span><span class="p">()],</span>
      <span class="p">},</span>
      <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
        <span class="cm">/*
</span><span class="cm">        // .vue -&gt; .js
</span><span class="cm">        vuePlugin({
</span><span class="cm">          include: /\.vue$/
</span><span class="cm">        }),
</span><span class="cm">        */</span>
        <span class="c1">// .ts -&gt; .js
</span><span class="c1"></span>        <span class="nx">esbuildPlugin</span><span class="p">({</span>
          <span class="nx">include</span><span class="o">:</span> <span class="sr">/\.[jt]s$/</span><span class="p">,</span>
          <span class="nx">minify</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span> <span class="o">===</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
          <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;es2015&#39;</span>
        <span class="p">}),</span>
        <span class="c1">// .scss -&gt; css
</span><span class="c1"></span>        <span class="c1">// scssPlugin({include: /\.scss$/, sass: dartSass}),
</span><span class="c1"></span>        <span class="nx">bundleSize</span><span class="p">(),</span>
      <span class="p">]</span>

    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>抽出<code>base</code>配制</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">vue</span> <span class="nx">from</span> <span class="s1">&#39;@vitejs/plugin-vue&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">defineConfig</span><span class="cm">/*, PluginOption, UserConfig*/</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span><span class="p">;</span> <span class="c1">// const { defineConfig } = require(&#39;vite&#39;)
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">Markdown</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-md&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ViteComponents</span><span class="cm">/*, {Options}*/</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-components&#39;</span><span class="p">;</span>
<span class="c1">// vueCustomBlockTransforms
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">vueCompAddSourceCodeTitleFromCustomBlock</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./plugins/vueCompAddSourceCodeTitleFromCustomBlock&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">terser</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-terser&#39;</span> <span class="c1">// 压缩 js 代码，包括 ES6 代码压缩
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">esbuildPlugin</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-esbuild&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">bundleSize</span> <span class="nx">from</span> <span class="s1">&#39;rollup-plugin-filesize&#39;</span><span class="p">;</span>

<span class="cm">/*// ES6
</span><span class="cm">import path from &#39;path&#39;;
</span><span class="cm">import fs from &#39;fs&#39;;
</span><span class="cm">import marked from &#39;marked&#39;;*/</span>
<span class="c1">// const path = require(&#39;path&#39;); path.resolve(...)
</span><span class="c1">// https://vitejs.dev/config/
</span><span class="c1"></span><span class="kr">const</span> <span class="p">{</span><span class="nx">resolve</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
  <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;./&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">vue</span><span class="p">({</span>
      <span class="nx">include</span><span class="o">:</span> <span class="p">[</span><span class="sr">/\.vue$/</span><span class="p">,</span> <span class="sr">/\.md$/</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="nx">Markdown</span><span class="p">(),</span>
    <span class="nx">ViteComponents</span><span class="p">({</span>
      <span class="nx">dirs</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/markdown&#39;</span><span class="p">],</span>
      <span class="c1">// allow auto load markdown components under `./src/components/`
</span><span class="c1"></span>      <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;vue&#39;</span><span class="p">,</span> <span class="s1">&#39;md&#39;</span><span class="p">],</span>

      <span class="c1">// allow auto import and register components used in markdown
</span><span class="c1"></span>      <span class="nx">customLoaderMatcher</span><span class="o">:</span> <span class="p">(</span><span class="nx">path</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;.md&#39;</span><span class="p">),</span>
    <span class="p">}),</span>
    <span class="nx">vueCompAddSourceCodeTitleFromCustomBlock</span><span class="p">(</span><span class="s1">&#39;demo&#39;</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">find</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span>
        <span class="nx">replacement</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;./src&#39;</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="p">{</span><span class="nx">find</span><span class="o">:</span> <span class="sr">/^~@/</span><span class="p">,</span> <span class="nx">replacement</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">)},</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="cm">/*
</span><span class="cm">  build: {
</span><span class="cm">    outDir: &#39;dist/lib&#39;,
</span><span class="cm">    lib: {
</span><span class="cm">      entry: resolve(__dirname, &#39;src/lib/index.ts&#39;),
</span><span class="cm">      name: &#39;vueel3-ui&#39;,
</span><span class="cm">      formats: [/!*&#39;es&#39;, *!/&#39;umd&#39;],
</span><span class="cm">      fileName: (/!*format*!/) =&gt; `vueel3-ui.js`  // `vueel3-ui.${format}.js`
</span><span class="cm">    },
</span><span class="cm">    minify: &#39;esbuild&#39;,
</span><span class="cm">    rollupOptions: {
</span><span class="cm">      // 确保外部化处理那些你不想打包进库的依赖
</span><span class="cm">      external: [&#39;vue&#39;],
</span><span class="cm">      output: {
</span><span class="cm">        // 在 UMD 构建模式下为这些外部化的依赖提供一个全局变量
</span><span class="cm">        globals: {
</span><span class="cm">          vue: &#39;Vue&#39;
</span><span class="cm">        },
</span><span class="cm">        name: &#39;vueel3&#39;,
</span><span class="cm">        // file: &#39;dist/lib/vueel3.js&#39;,
</span><span class="cm">        format: &#39;umd&#39;,
</span><span class="cm">        plugins: [terser()],
</span><span class="cm">      },
</span><span class="cm">      plugins: [
</span><span class="cm">        /!*
</span><span class="cm">        // .vue -&gt; .js
</span><span class="cm">        vuePlugin({
</span><span class="cm">          include: /\.vue$/
</span><span class="cm">        }),
</span><span class="cm">        *!/
</span><span class="cm">        // .ts -&gt; .js
</span><span class="cm">        esbuildPlugin({
</span><span class="cm">          include: /\.[jt]s$/,
</span><span class="cm">          minify: process.env.NODE_ENV === &#39;production&#39;,
</span><span class="cm">          target: &#39;es2015&#39;
</span><span class="cm">        }),
</span><span class="cm">        // .scss -&gt; css
</span><span class="cm">        // scssPlugin({include: /\.scss$/, sass: dartSass}),
</span><span class="cm">        bundleSize(),
</span><span class="cm">      ]
</span><span class="cm">
</span><span class="cm">    }
</span><span class="cm">  }
</span><span class="cm">  */</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div>
<hr />

<h2 id="vue-tsc-vite-build-a-href-catalogue-a"><code>vue-tsc &amp;&amp; vite build</code> <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>运行<code>yarn build</code>报错</li>
<li>实际运行<code>vue-tsc &amp;&amp; vite build</code></li>
<li>直接运行<code>vite build</code>不报错</li>
<li>TS代码编译不通过

<ul>
<li><code>throw 'emit mode is not yet support';</code></li>
</ul></li>
</ul>

<hr />

<h2 id="build-之后加载-md-文件报错-a-href-catalogue-a">build 之后加载 .md 文件报错 <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>bug 重现</p>
</blockquote>

<ul>
<li>打包<code>yarn build</code> 或者<code>vite build</code> 得到<code>dist</code>目录下所有文件</li>
<li>使用<code>http server</code>运行服务<code>hs dist -c-1</code></li>
<li>查看介绍文档，发现空白</li>
</ul>

<blockquote>
<p>解决方法</p>
</blockquote>

<ul>
<li>由于在路由中使用了动态加载<code>const md = filename =&gt; h(Markdown, {path: `../markdown/%{filename}.md`, key: filename})</code></li>
<li>vite 打包时使用的是<code>rollup</code>

<ul>
<li><code>rollup</code>不支持<code>import()</code>时动态拼接字符串（只有当运行函数<code>md</code>时，即<code>md(intro)</code>，才能知道<code>filename</code>是什么）</li>
<li><code>rollup</code>只是做代码的静态分析，否则运行代价太大，得不偿失</li>
</ul></li>
<li>解决方法是将运行时的动态改为静态加载

<ul>
<li>将拼接字符串<code>../markdown/%{filename}.md</code>改为<strong>事先引入模块</strong></li>
<li><code>import intro from './markdown/intro.md'</code></li>
<li><code>import getStarted from './markdown/get-started.md'</code></li>
<li><code>import install from './markdown/install.md'</code></li>
</ul></li>
<li>直接将引入的模块作为<code>md</code>函数的参数

<ul>
<li><code>md(intro)</code></li>
<li><code>md(getStarted)</code></li>
<li><code>md(install)</code></li>
</ul></li>
<li>并且修改<code>md</code>函数

<ul>
<li><code>const md = mdString =&gt; h(Markdown, {content: mdString, key: mdString})</code></li>
</ul></li>

<li><p>并且修改<code>Markdown.vue</code>组件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">article</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;markdown-body&#34;</span> <span class="na">v-html</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;ts&#34;</span><span class="p">&gt;</span>
<span class="kr">import</span> <span class="p">{</span>
<span class="nx">ref</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
<span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">content</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
  <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h2 id="prismajs-不显示代码行数-a-href-catalogue-a">Prismajs 不显示代码行数 <a href="#catalogue"> ⇧ </a></h2>

<p><a href="https://prismjs.com/plugins/line-highlight/">https://prismjs.com/plugins/line-highlight/</a> | Line highlight ▲ Prism plugins
<a href="https://prismjs.com/plugins/line-numbers/">https://prismjs.com/plugins/line-numbers/</a> | Line Numbers ▲ Prism plugins
<a href="https://blog.xqopen.com/code-highlight-in-ghost/">https://blog.xqopen.com/code-highlight-in-ghost/</a> | 几行代码就可以让你家Ghost支持代码高亮
<a href="https://juejin.cn/post/7023910122770399269?utm_source=gold_browser_extension">https://juejin.cn/post/7023910122770399269?utm_source=gold_browser_extension</a> | 尤雨溪推荐神器 ni ，能替代 npm/yarn/pnpm ？简单好用！源码揭秘！ - 掘金
<a href="https://www.google.com/search?q=%22vue3%22+Prismjs+line+number&amp;sa=X&amp;ved=2ahUKEwi2zrbv2-zzAhXizDgGHTdyDgkQ5t4CegQIChAB&amp;biw=867&amp;bih=881&amp;dpr=1">https://www.google.com/search?q=%22vue3%22+Prismjs+line+number&amp;sa=X&amp;ved=2ahUKEwi2zrbv2-zzAhXizDgGHTdyDgkQ5t4CegQIChAB&amp;biw=867&amp;bih=881&amp;dpr=1</a> | &ldquo;vue3&rdquo; Prismjs line number - Google 搜索
<a href="https://morioh.com/p/ff92e45cadd6">https://morioh.com/p/ff92e45cadd6</a> | Highlight Code Using Prism.js and Vue Component
<a href="https://blog.csdn.net/bigbear00007/article/details/109182369">https://blog.csdn.net/bigbear00007/article/details/109182369</a> | prism.js让页面代码变漂亮_HELLO WORLD-CSDN博客_prismjs
<a href="https://www.cnblogs.com/pellime/p/9949843.html">https://www.cnblogs.com/pellime/p/9949843.html</a> | prism.js——让网页中的代码更好看 - pellime - 博客园
<a href="https://www.jianshu.com/p/1619c91f73c2">https://www.jianshu.com/p/1619c91f73c2</a> | 代码美化JS&ndash;prismjs - 简书
<a href="https://www.cnblogs.com/geekgx/p/8134426.html">https://www.cnblogs.com/geekgx/p/8134426.html</a> | prism.js使页面代码变得漂亮 - GeekGx - 博客园
<a href="https://www.orchome.com/1374">https://www.orchome.com/1374</a> | Prism.js介绍 - OrcHome
<a href="https://hexingxing.cn/beautiful-code-highlighting-tool/">https://hexingxing.cn/beautiful-code-highlighting-tool/</a> | PrismJS，一款漂亮的代码高亮工具 – 何星星</p>

<hr />

<h3 id="提问-a-href-catalogue-a">提问： <a href="#catalogue"> ⇧ </a></h3>

<ul>
<li>1.代码链接为 <a href="https://github.com/xmasuhai/vueel3-demo-1/tree/06d4fbb59ce8b40d1ddbc6c7e6e9312c792b3ec9">https://github.com/xmasuhai/vueel3-demo-1/tree/06d4fbb59ce8b40d1ddbc6c7e6e9312c792b3ec9</a></li>
<li>2.运行步骤为：

<ul>
<li>安装依赖 <code>yarn install</code>;</li>
<li>展示页面 <code>yarn dev</code>;</li>
</ul></li>
<li>3.复现步骤为：

<ul>
<li>进入<a href="http://localhost:3000/">http://localhost:3000/</a></li>
<li>点击开始按钮</li>
<li>点击 Switch组件</li>
<li>点击 查看代码 按钮</li>
<li>显示的代码没有行数显示</li>
<li>点击浏览器刷新按钮或F5 重新加载页面</li>
<li>点击 查看代码 按钮</li>
<li>显示的代码有行数显示</li>
<li>点击 Button 组件（切换了路由）</li>
<li>点击 查看代码 按钮</li>
<li>显示的代码没有行数显示</li>
</ul></li>
<li>4.期待结果为：一进入任意组件或者切换组件对应的路由时，点击 查看代码，就可以显示代码行数</li>
<li>使用的是<code>Prismjs</code>的插件<code>line-numbers</code>，估计出问题的文件为<code>src/components/Demo.vue</code>里引用的<code>import 'prismjs/plugins/line-numbers/prism-line-numbers.min.js';</code>，是一个立即执行函数</li>
</ul>

<hr />

<h2 id="引入的样式没有生效或报错-a-href-catalogue-a">引入的样式没有生效或报错 <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>提示：假如script标签内的import &lsquo;prismjs/themes/prism.css&rsquo;没有生效或报错，
请尝试：单独建一个没有scoped的style标签，然后在其中引入，具体代码如下：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">//原来写的样式
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span> <span class="na">scoped</span><span class="p">&gt;</span>
<span class="o">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

// 加上下面这一段
<span class="p">&lt;</span><span class="nt">style</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;scss&#34;</span><span class="p">&gt;</span>
  <span class="p">@</span><span class="k">import</span> <span class="s1">&#39;prismjs/themes/prism.css&#39;</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div>
<hr />

<h2 id="vite-插件-rollup-文档的-命名误导-id-a-href-catalogue-a">vite 插件 rollup 文档的 命名误导 id <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>处理自定义标签<code>&lt;demo&gt;&lt;/demo&gt;</code></li>
<li><a href="https://cn.vitejs.dev/guide/migration.html#custom-blocks-transforms">vite 1.x 迁移 自定义块转换</a></li>
<li><code>transform(code, id)</code>中的<code>id</code>其实所解析到的文件的 url</li>
<li>使用正则匹配<code>/vue&amp;type=demo/.test(id)</code></li>
<li>去除多余的查询参数得到该文件路径

<ul>
<li><code>const path = id.replace(`?vue&amp;type=demo&amp;index=0&amp;lang.demo`,'');</code></li>
</ul></li>
<li>按路径读取文件内容<code>const fileString = fs.readFileSync(path).toString();</code></li>
<li>找出<code>&lt;demo&gt;&lt;/demo&gt;</code>标签节点，并且得到文本

<ul>
<li><code>const parsed = baseParse(fileString).children.find(n =&gt; n.tag === 'demo');</code></li>
<li><code>const title = parsed.children[0].content;</code></li>
</ul></li>
<li>得到代码主体<code>const main = fileString.split(parsed.loc.source).join('').trim();</code></li>
<li>给组件附加属性

<ul>
<li><code>Component.__sourceCode = ${JSON.stringify(main)}</code></li>
<li><code>Component.__sourceCodeTitle = ${JSON.stringify(title)}</code></li>
</ul></li>
<li>在模板字符串中返回 方法

<ul>
<li><code>return `export default function (Component) { Component.__sourceCode = ${JSON.stringify(main)} Component.__sourceCodeTitle = ${JSON.stringify(title)} }`.trim();</code></li>
</ul></li>
</ul>

<hr />

<h2 id="解构出的-props-数据在-script-setup-中失去数据响应性-a-href-catalogue-a">解构出的 <code>props</code> 数据在 <code>script setup</code> 中失去数据响应性 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>需要用 <code>toRefs(props)</code> 重新赋予其数据响应</li>
<li>destructured prop visible is Value (integer for e.g.) which cannot be reactive by itself</li>
<li>解构出来的visible为简单类型，不再具有数据响应性</li>
<li>需要调用 <code>toRefs(props)</code> 赋予数据响应性</li>
<li>Destructuring the props will cause the value to lose reactivity</li>
</ul>

<blockquote>
<p>参考</p>
</blockquote>

<ul>
<li><a href="https://stackoverflow.com/questions/64926354/vue-3-watch-doesn-t-work-if-i-watch-a-destructured-prop">Vue 3 watch doesn’t work if I watch a destructured prop</a></li>
<li><a href="https://v3.cn.vuejs.org/guide/composition-api-setup.html#props">Props WARNING</a></li>
<li><a href="https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%8A%B6%E6%80%81%E8%A7%A3%E6%9E%84">响应式状态解构</a></li>
<li><a href="https://v3.cn.vuejs.org/api/refs-api.html#toref">toRef</a></li>
</ul>

<hr />

<h2 id="css-import-在-webstorm-中报错-a-href-catalogue-a">CSS <code>@import</code> 在<code>webstorm</code>中报错 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li><a href="https://juejin.cn/post/7014500597122465805?utm_source=gold_browser_extension">Vite 从入门到精通 | 处理 CSS</a></li>
<li><a href="https://juejin.cn/post/6989475484551610381">2021年了，vite能投入生产了吗？vite.config.js配置踩坑</a></li>
<li><a href="https://juejin.cn/post/7009441745301667853">解决vite使用alias引入图片不显示的问题</a></li>
</ul>

<p><a href="https://juejin.cn/post/6974584590836957221">https://juejin.cn/post/6974584590836957221</a> | vite 中动态引入图片路径 - 掘金
<a href="https://juejin.cn/post/6980141344131923999">https://juejin.cn/post/6980141344131923999</a> | Vite 的好与坏 - 掘金
<a href="https://juejin.cn/post/6861501624993447950">https://juejin.cn/post/6861501624993447950</a> | CSS八种让人眼前一亮的HOVER效果 - 掘金
<a href="https://juejin.cn/post/6918672538646102029">https://juejin.cn/post/6918672538646102029</a> | Vue3+Ts+Vite购物车实战 - 掘金
<a href="https://juejin.cn/post/6976558626425028645">https://juejin.cn/post/6976558626425028645</a> | 按需加载更优雅的解决方案——vite-plugin-components - 掘金
<a href="https://juejin.cn/post/6844904031513477128">https://juejin.cn/post/6844904031513477128</a> | 请收下这72个炫酷的CSS技巧 - 掘金
<a href="https://juejin.cn/post/6926822933721513998">https://juejin.cn/post/6926822933721513998</a> | 2021必知必会的vite+vue3项目最佳实践 - 掘金
<a href="https://juejin.cn/post/6984033527520051208">https://juejin.cn/post/6984033527520051208</a> | 来一个vitepress版的博客主题吧(简约版) - 掘金
<a href="https://juejin.cn/post/6988704825450397709">https://juejin.cn/post/6988704825450397709</a> | [Vite 总结] 帅小伙花了一个月时间总结的 Vite 知识点和迁移方案 - 掘金
<a href="https://juejin.cn/post/7009519892139507749">https://juejin.cn/post/7009519892139507749</a> | vue2 配个vite，让开发速度翻倍⚡️ - 掘金</p>

<hr />

<h2 id="component-component-必须加上-key-currenttab-属性-a-href-catalogue-a"><code>&lt;component&gt;&lt;/component&gt;</code>必须加上<code>:key=&quot;currentTab&quot;</code>属性 <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>显示被选中的内容，失败</p>
</blockquote>

<ul>
<li>官方不推荐<code>v-if</code>和<code>v-for</code>一起使用</li>
<li>不循环渲染<code>&lt;component&gt;&lt;/component&gt;</code>，使用获取当前选中的标签传给<code>&lt;component :is=&quot;currentTab&quot;&gt;&lt;/component&gt;</code></li>
<li>使用计算属性，实时响应<code>currnetTab</code>的变化</li>
<li><code>&lt;component :is=&quot;currentTab&quot; :key=&quot;currentTab&quot; class=&quot;vue-tabs-content-item&quot;&gt;&lt;/component&gt;</code>

<ul>
<li>必须加上<code>:key=&quot;currentTab&quot;</code>属性</li>
<li><code>component</code>传递相同类型的<code>vnode</code>时，编译是竞态的，见 <a href="https://github.com/vuejs/vue-next/issues/2013">vuejs/vue-next issue#2013</a></li>
</ul></li>
</ul>

<hr />

<h2 id="警告-vue-warn-extraneous-non-props-attributes-title-were-passed-to-component-but-could-not-be-automatically-inherited-because-component-renders-fragment-or-text-root-nodes-a-href-catalogue-a">警告<code>[Vue warn]: Extraneous non-props attributes (title) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.</code> <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>使用了文本节点作为组件的根节点</li>
</ul>

<hr />

<h2 id="解决hover影响移动端样式-a-href-catalogue-a">解决hover影响移动端样式 <a href="#catalogue"> ⇧ </a></h2>

<blockquote>
<p>PC端原本hover样式是鼠标悬浮显示，不悬浮就消失的样式在移动端显示时，点击后才显示hover样式，此后如果不做处理，那么hover样式就一直存在</p>
</blockquote>

<ul>
<li>判断当前设备是什么设备</li>
<li>通过设备宽度来判断，用 <code>@media screen and（...）</code>
来设置移动端和pc的样式。</li>
<li>但这个来处理hover并不好，因为pc端网页窗口也能缩小到500px，移动端的窗口大小也是不定的</li>
</ul>

<p><img src="https://img-blog.csdnimg.cn/20200421104145919.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NjI3NzMw,size_16,color_FFFFFF,t_70" alt="媒体特性" /></p>

<ul>
<li><p>通过查阅<strong>媒体特性</strong>可知，<code>any-hover</code>是用来查看设备是否支持<code>hover</code>事件的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">@</span><span class="k">media</span> <span class="o">(</span><span class="nt">any-hover</span><span class="o">:</span> <span class="nt">hover</span><span class="o">)</span><span class="p">{</span>
	<span class="o">//</span> <span class="nt">在这写hover样式</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>使用<code>touchstart</code> 在body上绑定一个空的touchstart事件</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>消除在移动端中浏览器自带的一个点击高亮效果，可以通过给a标签或者body,html加如下CSS代码：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">-webkit-tap-highlight-color</span><span class="o">:</span> <span class="nt">transparent</span><span class="o">;</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><a href="https://www.jianshu.com/p/f4febdbb8402">手机端实现Tooltip (Hover)</a></li>
<li><a href="https://segmentfault.com/a/1190000003848737">touch事件与点击穿透问题</a></li>
</ul>

<hr />

<h2 id="使用-script-setup-语法糖-无法获取-context-a-href-catalogue-a">使用 <code>script setup</code> 语法糖 无法获取<code>context</code> <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>官方文档不建议使用<code>getCurrentInstance</code>当作在组合式 API 中获取 this 的替代方案来使用</li>
<li>大部分情况下无需用到 context

<ul>
<li><code>...context.slots</code></li>
<li><code>...context.slots.default()</code></li>
<li><code>...context.slots.default()[0]</code></li>
</ul></li>
<li>Vue 直接暴露了其他接口，替代原来需要用<code>context.*</code>访问的接口，比如

<ul>
<li><code>defineProps({})</code></li>
<li><code>defineEmits([])</code></li>
<li><code>defineExpose({})</code></li>
<li><code>useSlots()</code></li>
<li><code>useAttrs()</code></li>
</ul></li>
<li>响应式属性、导入的方法和组件会被直接暴露给模板</li>
</ul>

<hr />

<h2 id="deep-selector-代替-vue2-x-中-scss-过时的写法-a-href-catalogue-a"><code>:deep(selector)</code> 代替<code>Vue2.x</code>中<code>SCSS</code>过时的写法 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li><code>Vue2.x</code>中写<code>scss</code>的深入组件的选择器的写法<code>::v-deep</code>在<code>Vue3.x</code>中改为<code>:deep(selector)</code></li>
</ul>

<hr />

<!-- Article End -->

<div style="text-align:center;">·未完待续·</div>

<hr />

<h2 id="参考文章-a-href-catalogue-a">参考文章 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>无</li>
</ul>

<h2 id="相关文章-a-href-catalogue-a">相关文章 <a href="#catalogue"> ⇧ </a></h2>

<ul>
<li>无</li>
</ul>

<hr />

<ul>
<li>作者： Joel</li>
<li>文章链接：</li>
<li><a href="http://xmasuhai.xyz/posts/版权声明链接/">版权声明</a></li>
<li>非自由转载-非商用-非衍生-保持署名</li>
</ul>

<hr />

<hr />

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2022-05-20
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/frontend/">FrontEnd</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/project/share-blog/%E9%A1%B9%E7%9B%AE-%E5%A4%9A%E4%BA%BA%E5%85%B1%E4%BA%AB%E5%8D%9A%E5%AE%A20.0-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">【项目 多人共享博客】0.0 项目中遇到的问题</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/project/vueel3/%E9%A1%B9%E7%9B%AE-vue3-%E8%BD%AE%E5%AD%901.0-%E4%BD%BF%E7%94%A8vite%E5%88%9B%E5%BB%BAvue3%E9%A1%B9%E7%9B%AE/">
            <span class="next-text nav-default">【项目-vue3 轮子】1.0 使用Vite创建Vue3项目</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2026
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
