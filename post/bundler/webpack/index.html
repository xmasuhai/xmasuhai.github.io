<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Webpack - Joel in The House</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Joel Xu" />
  <meta name="description" content="目录§ ⇧ 1. 前置知识 § 2. 用到的工具 § 3. webpack功能 § 4. CRM学webpack § 4.1. 目标一：用webpack转译JS § 4.2 目标二理解文件名中h" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.59.1" />


<link rel="canonical" href="http://xmasuhai.xyz/post/bundler/webpack/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.af20b78e95c84de86b00a0242a4a77bd2601700e1b250edf27537d957ac0041d.css" integrity="sha256-ryC3jpXITehrAKAkKkp3vSYBcA4bJQ7fJ1N9lXrABB0=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="Webpack" />
<meta property="og:description" content="目录§ ⇧ 1. 前置知识 § 2. 用到的工具 § 3. webpack功能 § 4. CRM学webpack § 4.1. 目标一：用webpack转译JS § 4.2 目标二理解文件名中h" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://xmasuhai.xyz/post/bundler/webpack/" />
<meta property="article:published_time" content="2020-07-21T21:52:30+08:00" />
<meta property="article:modified_time" content="2020-08-02T21:16:57+08:00" />
<meta itemprop="name" content="Webpack">
<meta itemprop="description" content="目录§ ⇧ 1. 前置知识 § 2. 用到的工具 § 3. webpack功能 § 4. CRM学webpack § 4.1. 目标一：用webpack转译JS § 4.2 目标二理解文件名中h">


<meta itemprop="datePublished" content="2020-07-21T21:52:30&#43;08:00" />
<meta itemprop="dateModified" content="2020-08-02T21:16:57&#43;08:00" />
<meta itemprop="wordCount" content="9659">



<meta itemprop="keywords" content="webpack,CRM,Yarn,Parcel,Snowpack,JavaScript,FrontEnd," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Webpack"/>
<meta name="twitter:description" content="目录§ ⇧ 1. 前置知识 § 2. 用到的工具 § 3. webpack功能 § 4. CRM学webpack § 4.1. 目标一：用webpack转译JS § 4.2 目标二理解文件名中h"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Joel in The House</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          <div class="mobile-menu-parent">
            <span class="mobile-submenu-open"></span>
            <a href="http://xmasuhai.xyz/">
              docs
            </a>
          </div>
          <ul class="mobile-submenu-list">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Joel in The House
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/post/">文档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://xmasuhai.xyz/about/">关于我</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          <a class="menu-item-link menu-parent" href="http://xmasuhai.xyz/">docs</a>
          <ul class="submenu">
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/syntax-highlighting/">Syntax Highlighting</a>
              </li>
            
              <li>
                <a href="http://xmasuhai.xyz/post/test/mytest/">my Syntax Highlighting &amp; ShortCode Test</a>
              </li>
            
          </ul>

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Webpack</h1>
      
      <div class="post-meta">
        <time datetime="2020-07-21" class="post-time">
          2020-07-21
        </time>
        <div class="post-category">
            <a href="http://xmasuhai.xyz/categories/2020/"> 2020 </a>
            
          </div>
        <span class="more-meta"> 约 9659 字 </span>
          <span class="more-meta"> 预计阅读 20 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#目录-a-id-catalogue-href-catalogue-a-a-href-catalogue-a">目录<a id="catalogue" href="#catalogue" > § </a><a href="#catalogue"> ⇧ </a></a></li>
<li><a href="#0-安装webpack">0.安装webpack</a></li>
<li><a href="#a-id-1-href-2-1-前置知识-a"><a id="_$1_" href="#_$2_">1. 前置知识 § </a></a></li>
<li><a href="#a-id-1-href-2-2-用到的工具-a"><a id="_$1_" href="#_$2_">2. 用到的工具 § </a></a></li>
<li><a href="#a-id-1-href-2-3-webpack功能与使用-a"><a id="_$1_" href="#_$2_">3. webpack功能与使用 § </a></a>
<ul>
<li><a href="#使用webpack运行">使用webpack运行</a></li>
</ul></li>
<li><a href="#a-id-1-href-2-4-crm学webpack-a"><a id="_$1_" href="#_$2_">4. CRM学webpack § </a></a>
<ul>
<li><a href="#a-id-1-href-2-4-1-目标一-用-webpack-转译-js-a"><a id="_$1_" href="#_$2_">4.1. 目标一：用<code>webpack</code>转译<code>JS</code> § </a></a></li>
<li><a href="#初始化-webpack-config-js">初始化 <code>webpack.config.js</code></a></li>
<li><a href="#webpack-配置-entry-和-output"><code>webpack</code> 配置 <code>entry</code> 和 <code>output</code></a></li>
<li><a href="#a-id-1-href-2-4-2-目标二-理解文件名中-hash-的用途-a"><a id="_$1_" href="#_$2_">4.2 目标二：理解文件名中<code>hash</code>的用途 § </a></a></li>
<li><a href="#a-id-1-href-2-4-3-目标三-用-webpack-生成-html-a"><a id="_$1_" href="#_$2_">4.3 目标三：用<code>webpack</code>生成<code>HTML</code> § </a></a></li>
<li><a href="#a-id-1-href-2-4-4-目标四-用-webpack-引入-css-a"><a id="_$1_" href="#_$2_">4.4 目标四：用<code>webpack</code>引入<code>CSS</code> § </a></a>
<ul>
<li><a href="#css-loader"><code>css-loader</code></a></li>
<li><a href="#singletonstyletag">singletonStyleTag</a></li>
<li><a href="#使用-minicssextractplugin-生产环境下">使用<code>MiniCssExtractPlugin</code>（生产环境下）</a></li>
<li><a href="#使用两个-webpack-config-文件-切换开发模式">使用两个 <code>webpack config</code> 文件，切换开发模式</a></li>
<li><a href="#用工具插件-webpack-merge-实现自动切换">用工具插件<code>webpack-merge</code>实现自动切换</a></li>
<li><a href="#配置分离-生产环境构建">配置分离 生产环境构建</a></li>
<li><a href="#loader-vs-plugin">loader vs plugin</a></li>
</ul></li>
<li><a href="#a-id-1-href-2-4-5-目标五-用-webpack-引入-scss-a"><a id="_$1_" href="#_$2_">4.5 目标五：用<code>webpack</code>引入<code>SCSS</code> § </a></a></li>
<li><a href="#a-id-1-href-2-4-6-目标六-用-webpack-引入-postcss-less-和-stylus-a"><a id="_$1_" href="#_$2_">4.6. 目标六：用<code>webpack</code>引入<code>PostCSS</code>、 <code>LESS</code> 和 <code>Stylus</code> § </a></a></li>
<li><a href="#a-id-1-href-2-4-7-目标七-用-webpack-引入图片-a"><a id="_$1_" href="#_$2_">4.7. 目标七：用<code>webpack</code>引入图片 § </a></a></li>
<li><a href="#a-id-1-href-2-4-8-目标八-用-webpack-的-import-实现懒加载-资源异步加载-a"><a id="_$1_" href="#_$2_">4.8. 目标八：用<code>webpack</code>的 <code>import()</code> 实现懒加载 资源异步加载 § </a></a></li>
<li><a href="#a-id-1-href-2-4-9-目标九-部署到-github-pages-a"><a id="_$1_" href="#_$2_">4.9. 目标九：部署到<code>GitHub Pages</code> § </a></a></li>
<li><a href="#webpack-一键部署到-github">webpack 一键部署到 github</a></li>
<li><a href="#webpack-一键部署到-gitee">webpack 一键部署到 gitee</a></li>
<li><a href="#git-github-gitee-gitlab">git github gitee gitlab</a></li>
<li><a href="#a-id-1-href-2-4-10-目标十-自己写一个-loader-a"><a id="_$1_" href="#_$2_">4.10. 目标十：自己写一个<code>loader</code> § </a></a></li>
<li><a href="#a-id-1-href-2-4-11-目标十一-自己写一个-plugin-a"><a id="_$1_" href="#_$2_">4.11. 目标十一：自己写一个<code>plugin</code> § </a></a></li>
<li><a href="#a-id-1-href-2-4-12-目标十二-用-webpack-实现模块热替换-hmr-a"><a id="_$1_" href="#_$2_">4.12. 目标十二：用<code>webpack</code>实现模块热替换<code>HMR</code> § </a></a></li>
</ul></li>
<li><a href="#a-id-1-href-2-5-从webpack看前端工具的历史-a"><a id="_$1_" href="#_$2_">5. 从webpack看前端工具的历史 § </a></a>
<ul>
<li><a href="#a-id-1-href-2-9-死掉的前端工具-a"><a id="_$1_" href="#_$2_">9. 死掉的前端工具 § </a></a></li>
<li><a href="#a-id-1-href-2-9-和webpack竞争的工具-a"><a id="_$1_" href="#_$2_">9. 和webpack竞争的工具 § </a></a></li>
<li><a href="#a-id-1-href-2-9-基于webpack的工具-a"><a id="_$1_" href="#_$2_">9. 基于webpack的工具 § </a></a></li>
</ul></li>
<li><a href="#a-id-1-href-2-6-总结-a"><a id="_$1_" href="#_$2_">6. 总结 § </a></a></li>
<li><a href="#a-id-1-href-2-7-问答-a"><a id="_$1_" href="#_$2_">7. 问答 § </a></a></li>
<li><a href="#a-id-1-href-2-8-学英语-a"><a id="_$1_" href="#_$2_">8. 学英语 § </a></a>
<ul>
<li>
<ul>
<li><a href="#参考文章">参考文章</a></li>
<li><a href="#相关文章">相关文章</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<h2 id="目录-a-id-catalogue-href-catalogue-a-a-href-catalogue-a">目录<a id="catalogue" href="#catalogue" > § </a><a href="#catalogue"> ⇧ </a></h2>

<ul>
<li><a id="_$1_" href="#_$2_">1. 前置知识 § </a></li>
<li><a id="_$1_" href="#_$2_">2. 用到的工具 § </a></li>
<li><a id="_$1_" href="#_$2_">3. <code>webpack</code>功能 § </a></li>
<li><a id="_$1_" href="#_$2_">4. <code>CRM</code>学<code>webpack</code> § </a>

<ul>
<li><a id="_$1_" href="#_$2_">4.1. 目标一：用<code>webpack</code>转译<code>JS</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.2 目标二理解文件名中<code>hash</code>的用途 § </a></li>
<li><a id="_$1_" href="#_$2_">4.3 目标三：用<code>webpack</code>生成<code>HTML</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.4 目标四：用<code>webpack</code>引入<code>CSS</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.5 目标五：用<code>webpack</code>引入<code>SCSS</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.6. 目标六：用<code>webpack</code>引入<code>LESS</code> 、 <code>Stylus</code>和<code>Postcss</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.7. 目标七：用<code>webpack</code>引入图片 § </a></li>
<li><a id="_$1_" href="#_$2_">4.8. 目标八：用<code>webpack</code>的 <code>import()</code> 实现懒加载 § </a></li>
<li><a id="_$1_" href="#_$2_">4.9. 目标九：部署到<code>GitHub Pages</code> § </a></li>
</ul></li>
<li><a id="_$1_" href="#_$2_">5. 从webpack看前端工具的历史 § </a>

<ul>
<li><a id="_$1_" href="#_$2_">9. 死掉的前端工具 § </a></li>
<li><a id="_$1_" href="#_$2_">9. 和webpack竞争的工具 § </a></li>
<li><a id="_$1_" href="#_$2_">9. 基于webpack的工具 § </a></li>
</ul></li>
<li><a id="_$1_" href="#_$2_">6. 总结 § </a></li>
<li><a id="_$1_" href="#_$2_">4.10. 目标十：自己写一个<code>loader</code> § </a></li>
<li><a id="_$1_" href="#_$2_">4.11. 目标十一：自己写一个<code>plugin</code> § </a></li>
<li><a id="_$1_" href="#_$2_">7. 问答 § </a></li>
<li><a id="_$1_" href="#_$2_">8. 学英语 § </a></li>
</ul>

<hr />

<h2 id="0-安装webpack">0.安装webpack</h2>

<ul>
<li>webpack 的运行，是需要依赖 node.js 的运行环境</li>
<li><a href="https://webpack.js.org/">官网https://webpack.js.org/</a></li>
<li>Get Started</li>
<li>查看目前有哪几种版本 对应版本号 <code>npm info webpack versions</code></li>
<li>全局安装<code>npm i -g webpack@4 webpack-cli@3</code></li>
<li>项目文件安装<code>npm init -y &amp;&amp; npm install webpack@4 webpack-cli@3 --save-dev</code></li>
<li>或者<code>yarn init -y &amp;&amp; yarn add webpack@4 webpack-cli@3 webpack-dev-server@3 --dev</code></li>
<li>或者<code>npm init -y &amp;&amp; yarn add webpack@4 webpack-cli@3 webpack-dev-server@3 --dev</code></li>
<li>不可两者都用</li>
</ul>

<hr />

<blockquote>
<p><a href="https://github.com/FrankFang/webpack-demo-3/package.json">实际的版本号是</a></p>
</blockquote>

<ul>
<li><code>webpack@4.44.1</code></li>
<li><code>webpack-cli@3.3.12</code></li>
<li><code>webpack-dev-server@3.11.0</code></li>
</ul>

<hr />

<blockquote>
<p>前端工程化的理解</p>
</blockquote>

<ul>
<li>模块化的价值 <a href="https://github.com/seajs/seajs/issues/547">sea.js前端模块化开发的价值 #547</a>

<ul>
<li>解决命名冲突</li>
<li>依赖统一管理</li>
<li>提高开发时代码可读性</li>
<li>代码解耦，提高复用性</li>
</ul></li>
</ul>

<blockquote>
<p><a href="https://webpack.docschina.org/concepts/modules/">webpack 模块</a>能以各种方式表达它们的依赖关系</p>
</blockquote>

<ul>
<li><code>ES2015</code> <code>import</code> 语句</li>
<li><code>CommonJS</code> <code>require()</code> 语句</li>
<li><code>AMD</code> <code>define</code> 和 <code>require</code> 语句</li>
<li><code>css/sass/less</code> 文件中的 <code>@import</code> 语句。</li>
<li><code>stylesheet</code> <code>url(...)</code> 或者 <code>HTML</code> <code>&lt;img src=...&gt;</code> 文件中的图片链接</li>
<li>&hellip;</li>
</ul>

<hr />

<h2 id="a-id-1-href-2-1-前置知识-a"><a id="_$1_" href="#_$2_">1. 前置知识 § </a></h2>

<blockquote>
<p>ES6</p>
</blockquote>

<ul>
<li>let / const / 箭头函数 / &hellip; / class / Promise</li>
<li>继承 / this / 原型</li>
</ul>

<blockquote>
<p>CSS 语和布局</p>
</blockquote>

<ul>
<li>flex</li>
</ul>

<blockquote>
<p>MVC 概念</p>
</blockquote>

<ul>
<li>Model / View / Controller /EventHub</li>
</ul>

<blockquote>
<p>工具的使用</p>
</blockquote>

<ul>
<li>VSCode / WebStorm</li>
<li>终端命令行 npm / yarn / http-server / parcel / git</li>
</ul>

<h2 id="a-id-1-href-2-2-用到的工具-a"><a id="_$1_" href="#_$2_">2. 用到的工具 § </a></h2>

<blockquote>
<p><code>webpack@4</code>安装方法见<a href="https://webpack.js.org/guides/getting-started/">官网Getting Started</a></p>
</blockquote>

<ul>
<li>在<code>webpack</code>后面加个 <code>@4</code> 即可</li>
<li>如果<code>webpack</code>升级到了5， 思路依然有效</li>
</ul>

<blockquote>
<p>webpack-dev-server</p>
</blockquote>

<ul>
<li>用于本地预览</li>
<li>parcel 不和 webpack 配套</li>
</ul>

<blockquote>
<p>Yarn</p>
</blockquote>

<ul>
<li>用于build发布</li>
</ul>

<hr />

<blockquote>
<p>正式进入框架阶段</p>
</blockquote>

<h2 id="a-id-1-href-2-3-webpack功能与使用-a"><a id="_$1_" href="#_$2_">3. webpack功能与使用 § </a></h2>

<blockquote>
<p>一个包含前端的项目，里面可能有多个 .js, 多个 .css , 多个静态图片， 多个其他前端资源。
一些 js 资源彼此之前存在依赖关系，当一个页面需要加载多个 .js 的话，也会拖累整个页面的加载速度</p>

<p>为了解决这个问题，webpack 就把各种各样的静态资源，打包成了一个所谓的 assets. 加快浏览器加载</p>
</blockquote>

<ul>
<li>转译代码（ES6转为ES5，SCSS转为CSS）</li>
<li>构建build</li>
<li>代码打包</li>
<li>代码压缩</li>
<li>代码分析</li>
</ul>

<blockquote>
<p>Vue React Webpack 知识对基础知识的杂糅</p>
</blockquote>

<h3 id="使用webpack运行">使用webpack运行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mkdir ./src <span class="o">&amp;&amp;</span> touch index.html <span class="o">&amp;&amp;</span> <span class="nb">cd</span> src <span class="o">&amp;&amp;</span> touch index.js</code></pre></td></tr></table>
</div>
</div>
<p>调用本地局部安装的 webpack</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">./node_modules/.bin/webpack --version</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>自动寻找本地文件夹的 webpack</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">npx webpack</code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>npx</code>不能识别路径中的空格</li>
</ul>

<hr />

<h2 id="a-id-1-href-2-4-crm学webpack-a"><a id="_$1_" href="#_$2_">4. CRM学webpack § </a></h2>

<ol>
<li>目标一：用<code>webpack</code>转译<code>JS</code></li>
<li>目标二：理解文件名中<code>hash</code>的用途</li>
<li>目标三：用<code>webpack</code>生成<code>HTML</code></li>
<li>目标四：用<code>webpack</code>引入<code>CSS</code></li>
<li>目标五：用<code>webpack</code>引入<code>SCSS</code></li>
<li>目标六：用<code>webpack</code>引入<code>LESS</code> 和 <code>Stylus</code></li>
<li>目标七：部署到<code>GitHub Pages</code></li>
<li>目标八：用<code>webpack</code>的 <code>file-loader</code> 引入图片引入图片</li>
<li>目标九：用<code>webpack</code>的 <code>import()</code> 实现懒加载</li>
<li>目标十：自己写一个<code>loader</code></li>
<li>目标十一：自己写一个<code>plugin</code></li>
<li>目标十二：用<code>webpack</code>实现模块热替换<code>HMR</code></li>
<li>目标十三：用<code>webpack</code>引入<code>TypeScript</code></li>
<li>目标十四：用<code>Flow</code>检查器</li>
<li>目标十五：用<code>webpack</code>引入各大框架<code>Vuw</code> <code>React</code> <code>Electron</code></li>
</ol>

<hr />

<h3 id="a-id-1-href-2-4-1-目标一-用-webpack-转译-js-a"><a id="_$1_" href="#_$2_">4.1. 目标一：用<code>webpack</code>转译<code>JS</code> § </a></h3>

<blockquote>
<p>途径</p>
</blockquote>

<ul>
<li>进入<a href="https://webpack.js.org/guides/getting-started/">官网Getting Started</a></li>
<li>Copy</li>
<li>Run</li>
<li>Modify</li>
</ul>

<blockquote>
<p>什么是转译<code>JS</code></p>
</blockquote>

<ul>
<li>分析JS代码，并转译成低版本浏览器可以用的JS</li>
<li><code>./src/x.js</code> <code>export default 'xxx'</code></li>
<li><code>./src/index.js</code> <code>import x from './x.js'; console.log(x)</code></li>
<li>项目路径中<code>npx webpack</code>，查看<code>dist</code>目录中<code>main.js</code></li>
</ul>

<hr />

<h3 id="初始化-webpack-config-js">初始化 <code>webpack.config.js</code></h3>

<blockquote>
<p>去除<code>npx webpack</code>的警告：<code>WARNING in configuration The 'mode' option has not been set...</code></p>
</blockquote>

<ul>
<li><a href="https://webpack.js.org/concepts/configuration/">官网webpack-&gt;Configuration</a></li>
<li>在 Configuration 去除WARNING 设置模式（mode） 生产模式（production） 开发模式（development）：</li>
</ul>

<blockquote>
<p><code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./foo.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;foo.bundle.js&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>再运行<code>npx webpack</code></li>
</ul>

<blockquote>
<p>生产模式（production） 开发模式（development）区别</p>
</blockquote>

<ul>
<li>在<code>dist/main.js</code>中，生产模式压缩的代码体积小；开发模式，便于Debug</li>
<li>如果暂时没有影响就不用管</li>
<li>之后详细说明如何切换两者</li>
</ul>

<h3 id="webpack-配置-entry-和-output"><code>webpack</code> 配置 <code>entry</code> 和 <code>output</code></h3>

<blockquote>
<p>修改<code>webpack.config.js&gt; module.exports&gt; entry</code>默认入口文件<code>entry: './src/index.js'</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;main.js&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>再运行<code>npx webpack</code></li>
<li>查看<code>dist</code>路径后多了<code>foo.bundle.js</code></li>
<li>修改<code>output&gt; filename</code>为<code>main.js</code></li>
<li>手动删除原来的dist路径</li>
<li>再运行<code>npx webpack</code></li>
<li>配置<code>entry</code> 和 <code>output</code>，会把<code>./src/</code>路径下的JS文件转译后放到<code>dist</code>路径下</li>
<li>默认目标路径可以不写<code>path: path.resolve(__dirname, 'dist')</code></li>
<li>入口和出口的配置</li>
</ul>

<hr />

<h3 id="a-id-1-href-2-4-2-目标二-理解文件名中-hash-的用途-a"><a id="_$1_" href="#_$2_">4.2 目标二：理解文件名中<code>hash</code>的用途 § </a></h3>

<ul>
<li><a href="https://webpack.js.org/guides/caching/">官网webpack-&gt;Caching</a></li>
<li>出口的文件名改为<code>'[name].[contenthash].js'</code></li>
<li>再运行<code>npx webpack</code>得到<code>main.xxx.js</code>文件名后多了hash值用来HTTP缓存</li>
</ul>

<blockquote>
<p><code>HTTP</code>响应头中的 <code>Cache-Control</code></p>
</blockquote>

<ul>
<li>设置缓存头</li>
<li>点开响应头<code>Response Headers</code>中的<code>Cache-Control</code></li>
<li><code>public, max-age=31536000</code>设置最大缓存一年</li>
<li>缓存过期后，再重新请求</li>
</ul>

<blockquote>
<p><code>HTTP</code> 缓存的意义</p>
</blockquote>

<ul>
<li>缓存一年</li>
<li>除了<code>index.html</code>外的资源存储在用户浏览器的缓存中</li>
<li>减少连接数，访问时间不用重复下载资源</li>
<li>资源的下载速度之间可差百倍</li>
</ul>

<blockquote>
<p>怎么更新<code>JS CSS</code>之类的资源</p>
</blockquote>

<ul>
<li>对资源文件内容做一个MD5 文件名后加hash</li>
<li><code>'[name].[contenthash].js'</code>就是做这个的</li>
<li>每次修改文件内容，再次打包，得新到的<code>main.xxx.js</code></li>
<li>文件内容和文件名有一一对应的关系</li>
<li>之前的缓存就没用了</li>
<li>浏览器就会更新资源 ，删除原来的缓存</li>
</ul>

<blockquote>
<p>为什么不缓存<code>index.html</code></p>
</blockquote>

<ul>
<li>需要在首页中存储更改hash的文件名</li>
<li>通知浏览器其他资源的入口</li>
<li>首页一定不能做缓存，或者设置的最大缓存时间不能太长</li>
<li>链接到 【HTTP非全解】</li>
</ul>

<hr />

<blockquote>
<p>dist文件越来越多，在 <code>yarn build</code>时设置自动删除并构建</p>
</blockquote>

<ul>
<li>在<code>package.json&gt; script</code>中设置<code>rm -rf dist &amp;&amp; npx webpack</code></li>
<li>可省略<code>npx</code>，自动寻找webpack，<code>rm -rf dist &amp;&amp; webpack</code></li>
</ul>

<blockquote>
<p><code>package.json</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack-demo-1&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack.config.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;webpack&#34;</span><span class="p">:</span> <span class="s2">&#34;4&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-cli&#34;</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-dev-middleware&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.7.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-dev-server&#34;</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-log&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.0.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-sources&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.4.3&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;rm -rf dist &amp;&amp; webpack&#34;</span><span class="p">,</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;keywords&#34;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>yarn build</code>或者<code>npm run build</code></li>
</ul>

<blockquote>
<p><code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].js&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="a-id-1-href-2-4-3-目标三-用-webpack-生成-html-a"><a id="_$1_" href="#_$2_">4.3 目标三：用<code>webpack</code>生成<code>HTML</code> § </a></h3>

<blockquote>
<p>之前先用git提交下代码备份</p>
</blockquote>

<ul>
<li>搜索<code>webpack create html page</code></li>
<li><a href="https://webpack.docschina.org/plugins/html-webpack-plugin/">官网webpack-&gt;HtmlWebpackPlugin</a></li>
<li><a href="https://github.com/jantimon/html-webpack-plugin#options">github jantimon/html-webpack-plugin</a></li>
</ul>

<blockquote>
<p>安装<code>HtmlWebpackPlugin</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># npm install --save-dev html-webpack-plugin</span>
yarn add html-webpack-plugin --dev</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>配置<code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">()]</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>运行<code>yarn build</code></li>
<li>自动生成一个空的html，自动引入了<code>index.xxx.js</code></li>
<li>dist目录下的文件都是自动生成的，不可手动修改</li>
</ul>

<blockquote>
<p>生成一个html模板</p>
</blockquote>

<ul>
<li>新建<code>./src/assets</code>目录 <code>index.html</code></li>

<li><p>配置<code>webpack.config.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
<span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
<span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
<span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
<span class="p">},</span>
<span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
<span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
<span class="c1">// filename: &#39;test.html&#39;,
</span><span class="c1"></span><span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
<span class="p">})]</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div></li>

<li><p>修改 <code>index.html</code> 为常用初始模板，之后配置</p></li>

<li><p>对应的标签模板<code>&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;zh-Hans&#34;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;IE=edge,chrome=1&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span>
<span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span><span class="err">&lt;</span>%= htmlWebpackPlugin.options.title %&gt;<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p><code>x.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">x</span> <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>可以实现</p>
</blockquote>

<ul>
<li>自动更新html文件名</li>
<li>自动使用配置里的title标签</li>
<li>自动把引入的js标签放到body底部</li>
</ul>

<blockquote>
<p>要点</p>
</blockquote>

<ul>
<li>自动更改文件名</li>
<li>插件<code>HtmlWebpackPlugin</code> 生成 <code>HTML</code></li>
</ul>

<h3 id="a-id-1-href-2-4-4-目标四-用-webpack-引入-css-a"><a id="_$1_" href="#_$2_">4.4 目标四：用<code>webpack</code>引入<code>CSS</code> § </a></h3>

<p><code>webpack</code> 引入模块化 <code>CSS</code></p>

<blockquote>
<p><code>x.css</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-CSS" data-lang="CSS"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-CSS" data-lang="CSS"><span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="p">:</span> <span class="kc">orange</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>x.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="s1">&#39;./x.css&#39;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">x</span> <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>编译css时报错</li>
<li><code>ERROR in ./src/x.css 1:5.</code></li>
<li><code>Module parse failed: Unexpected token (1:5)</code></li>
<li><code>You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file...</code></li>
</ul>

<blockquote>
<p>需要<code>css-loader</code></p>
</blockquote>

<h4 id="css-loader"><code>css-loader</code></h4>

<ul>
<li>搜索<code>webpack css-loader</code></li>
<li><a href="https://www.webpackjs.com/loaders/css-loader/">官网webpack-&gt;css-loader</a></li>
<li>安装<code>yarn add css-loader --dev</code></li>
</ul>

<blockquote>
<p>配置<code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
    <span class="c1">// filename: &#39;test.html&#39;,
</span><span class="c1"></span>    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
  <span class="p">})],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>按报错安装所需的工具模块<code>Module not found: Error: Can't resolve 'style-loader'</code></p>
</blockquote>

<ul>
<li>安装<code>style-loader</code></li>

<li><p><a href="https://www.webpackjs.com/loaders/style-loader/">官网 webpack -&gt; style-loader</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn add style-loader --dev</code></pre></td></tr></table>
</div>
</div></li>

<li><p>再运行<code>yarn build</code></p></li>

<li><p><code>style-loader</code>把<code>css-loader</code>解析的<code>CSS</code>代码放到页面的<code>head &gt; style</code>标签中</p></li>

<li><p>开发模式下使用，无需用<code>link</code>标签引入<code>CSS</code>文件</p></li>

<li><p>没有<code>Cache-Control</code>做缓存，未部署</p></li>
</ul>

<blockquote>
<p><code>x.js</code>观察引入的<code>x.css</code>，之前暂时删掉<code>webpack.config.js</code>的<code>'style-loader',</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">css</span> <span class="nx">from</span> <span class="s1">&#39;./x.css&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">css</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">css</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>

<span class="cm">/*
</span><span class="cm">export default function printMe() {
</span><span class="cm">  console.log(&#39;I get called from print.js!&#39;);
</span><span class="cm">    }
</span><span class="cm">*/</span>
<span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>cd ..</code>回到上级目录，再运行<code>yarn build</code></li>
<li><code>cd dist</code>后，使用<code>hs -c-1</code>查看控制台</li>
</ul>

<blockquote>
<p>使用更方便的<code>webpack-dev-server</code>自动刷新部署代替<code>hs -c-1</code></p>
</blockquote>

<ul>
<li>搜索<code>webpack webpack-dev-server</code></li>
<li><a href="https://www.webpackjs.com/configuration/dev-server/">官网webpack -&gt; 开发中 Server(devServer) webpack-dev-server</a></li>
<li><a href="https://webpack.js.org/configuration/dev-server/">官网webpack -&gt; DevServer en</a></li>
<li><a href="https://webpack.docschina.org/configuration/dev-server/">官网webpack -&gt; DevServer zh</a></li>
<li><a href="https://webpack.docschina.org/guides/development/">官网webpack -&gt; DevServer 开发环境 zh</a></li>
<li>先将 <code>mode</code> 设置为 <code>'development'</code></li>
<li><a href="https://webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-source-map">使用 source map</a>，配置<code>devtool: 'inline-source-map',</code>追踪error(错误) 和 warning(警告) 在源代码中的原始位置</li>

<li><p><a href="https://webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-server">使用 webpack-dev-server</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn add webpack-dev-server --dev</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>配置<code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
    <span class="c1">// filename: &#39;test.html&#39;,
</span><span class="c1"></span>    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
  <span class="p">})],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>package.json</code></p>
</blockquote>

<ul>
<li><p><code>--open</code>表示是否打开浏览器，可删除</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JSON" data-lang="JSON"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JSON" data-lang="JSON"><span class="err">...</span>
<span class="s2">&#34;scripts&#34;</span><span class="err">:</span> <span class="p">{</span>
<span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;rm -rf dist &amp;&amp; webpack&#34;</span><span class="p">,</span>
<span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>
<span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack-dev-server --open&#34;</span><span class="p">,</span>
<span class="nt">&#34;watch&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --watch&#34;</span>
<span class="p">}</span><span class="err">,</span>
<span class="err">...</span></code></pre></td></tr></table>
</div>
</div></li>

<li><p>运行<code>yarn start</code></p></li>

<li><p>或者运行<code>npm run start</code></p></li>

<li><p>访问端口<code>http://localhost:8080/</code></p></li>

<li><p>测试实时更新页面<code>background: gray;</code></p></li>

<li><p>不需要在开发时频繁<code>yarn build</code>或是手动删除dist</p></li>

<li><p>不会创建或依赖<code>dist</code>目录，在内存中运行，自动更新</p></li>
</ul>

<h4 id="singletonstyletag">singletonStyleTag</h4>

<blockquote>
<p>使用单个的 <code>&lt;style&gt;</code> 标签加载所有<code>css</code>属性，或者是每个css模块一个 <code>&lt;style&gt;</code> 标签</p>
</blockquote>

<ul>
<li><a href="https://webpack.js.org/loaders/style-loader/#singletonstyletag">webpack style-loader singletonStyleTag</a></li>
<li>默认值是<code>false</code>（每个<code>css</code>模块一个 <code>&lt;style&gt;</code> 标签）</li>
<li>默认情况下，每一个css文件会变为一个<code>&lt;style&gt;</code>标签</li>
<li>实际加载中，可能有多个<code>&lt;style&gt;</code>标签；</li>
<li>默认值为 <code>false</code> （而不是原文中说的默认情况下启用此选项）</li>
<li>当该值设置为<code>true</code> 时，那么，原本多个<code>&lt;style&gt;</code>标签会被合并成一个<code>&lt;style&gt;</code>标签</li>
<li>官方文档上写的是默认开启，实际上是不开启的</li>
</ul>

<hr />

<blockquote>
<p>除了用<code>style-loader</code>生成<code>style</code>,也可以吧<code>CSS</code>抽成文件</p>
</blockquote>

<h4 id="使用-minicssextractplugin-生产环境下">使用<code>MiniCssExtractPlugin</code>（生产环境下）</h4>

<ul>
<li>使用插件提取<code>CSS</code>文件</li>
<li>搜索 <code>webpack css 抽成文件</code> <code>webpack css extract plugin</code></li>
<li><a href="https://webpack.js.org/plugins/mini-css-extract-plugin/">webpack MiniCssExtractPlugin</a></li>

<li><p>安装插件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn add mini-css-extract-plugin --dev</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>配置<code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
    <span class="c1">// filename: &#39;test.html&#39;,
</span><span class="c1"></span>    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
    <span class="p">}),</span>
    <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">ignoreOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
        <span class="c1">// css-loader
</span><span class="c1"></span>        <span class="c1">// use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="s1">&#39;css-loader&#39;</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>目前实现了</p>
</blockquote>

<ul>
<li><code>MiniCssExtractPlugin</code>把<code>css-loader</code>解析的<code>CSS</code>代码放到页面的<code>head &gt; link</code>标签中</li>
<li>实时生成带<code>hash</code>的<code>js</code>文件到<code>script</code>标签中，并放在<code>body</code>标签内的最后</li>
<li>做<code>Cache-Control</code>适用于生产环境</li>
</ul>

<blockquote>
<p>要点：引入 <code>css</code>的两种方式</p>
</blockquote>

<ul>
<li>开发时可以使用<code>JS</code>生成<code>style</code>，快速，不需要在<code>dist</code>中生成<code>css</code>文件</li>
<li>发布时可以把<code>CSS</code>抽成带<code>hash</code>文件，可以做缓存</li>
</ul>

<blockquote>
<p>如何做到在开发时用第一种方式</p>

<p>发布时，即在生产环境中，用第二种方式</p>
</blockquote>

<ul>
<li>根据模式选择不同的途径</li>
<li>生产环境：<code>yarn build</code>；

<ul>
<li>对应的<code>package.json</code>中：<code>&quot;build&quot;: &quot;rm -rf dist &amp;&amp; webpack&quot;</code></li>
<li>做缓存，用<code>MiniCssExtractPlugin</code>生成<code>link</code>标签</li>
<li>引入带<code>hash</code>的<code>CSS</code>文件</li>
<li>插入<code>head</code>标签</li>
</ul></li>
<li>开发环境：<code>yarn start</code>；

<ul>
<li>对应的<code>package.json</code>中：<code>&quot;start&quot;: &quot;webpack-dev-server&quot;</code></li>
<li>不做缓存，用<code>css-loader</code>生成<code>style</code>标签</li>
<li>插入<code>head</code>标签</li>
</ul></li>
</ul>

<blockquote>
<p>终端命令行使用帮助文档<code>webpack --help</code></p>
</blockquote>

<ul>
<li>未全局安装的话用<code>npx webpack --help</code></li>
<li>设置配置文件<code>package.json</code>的路径</li>
<li><code>&quot;build&quot;: &quot;rm -rf dist &amp;&amp; webpack --config webpack.config.prod.js&quot;</code></li>
<li>意思是，在<code>build</code>时，不适用默认的配置，而是使用<code>webpack.config.prod.js</code>的配置</li>
</ul>

<blockquote>
<p><code>package.json</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JSON" data-lang="JSON"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JSON" data-lang="JSON"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack-demo-1&#34;</span><span class="p">,</span>
  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
  <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;main&#34;</span><span class="p">:</span> <span class="s2">&#34;index.js&#34;</span><span class="p">,</span>
  <span class="nt">&#34;keywords&#34;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&#34;author&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
  <span class="nt">&#34;license&#34;</span><span class="p">:</span> <span class="s2">&#34;ISC&#34;</span><span class="p">,</span>
  <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;webpack&#34;</span><span class="p">:</span> <span class="s2">&#34;4&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-cli&#34;</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-dev-middleware&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.7.2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-dev-server&#34;</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-log&#34;</span><span class="p">:</span> <span class="s2">&#34;^2.0.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;webpack-sources&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.4.3&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;devDependencies&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;css-loader&#34;</span><span class="p">:</span> <span class="s2">&#34;^3.6.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;html-webpack-plugin&#34;</span><span class="p">:</span> <span class="s2">&#34;^4.3.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;mini-css-extract-plugin&#34;</span><span class="p">:</span> <span class="s2">&#34;^0.9.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;style-loader&#34;</span><span class="p">:</span> <span class="s2">&#34;^1.2.1&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;rm -rf dist &amp;&amp; webpack --config webpack.config.prod.js&#34;</span><span class="p">,</span>
    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack-dev-server&#34;</span><span class="p">,</span>
    <span class="nt">&#34;watch&#34;</span><span class="p">:</span> <span class="s2">&#34;webpack --watch&#34;</span>
  <span class="p">},</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>yarn start</code></li>
<li>查看<code>dist</code>，目录中<code>index.html</code>是否引入了<code>style</code>标签</li>
</ul>

<h4 id="使用两个-webpack-config-文件-切换开发模式">使用两个 <code>webpack config</code> 文件，切换开发模式</h4>

<ul>
<li><p>默认<code>webpack.config.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
<span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
<span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
<span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
<span class="p">},</span>
<span class="nx">output</span><span class="o">:</span> <span class="p">{...},</span>
<span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
<span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({...}),</span>
<span class="p">],</span>
<span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
    <span class="c1">// mode: &#39;development&#39;
</span><span class="c1"></span>    <span class="c1">// `yarn start`
</span><span class="c1"></span>    <span class="c1">// css-loader
</span><span class="c1"></span>    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div></li>

<li><p>创建生产环境的<code>webpack.config.prod.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">let</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
<span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
<span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
<span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
<span class="p">},</span>
<span class="nx">output</span><span class="o">:</span> <span class="p">{...},</span>
<span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
<span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({...}),</span>
<span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].css&#39;</span><span class="p">,</span>
  <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].[contenthash].css&#39;</span><span class="p">,</span>
  <span class="nx">ignoreOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}),</span>
<span class="p">],</span>
<span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
    <span class="c1">// mode: &#39;production&#39;
</span><span class="c1"></span>    <span class="c1">// `yarn build`
</span><span class="c1"></span>    <span class="c1">// MiniCssExtractPlugin
</span><span class="c1"></span>    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
        <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
      <span class="s1">&#39;css-loader&#39;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>继承共有属性 <code>webpack.config.base.js</code></p>
</blockquote>

<ul>
<li><p>配置继承<code>webpack.config.base.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">let</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
<span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
<span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
<span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
<span class="p">},</span>
<span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
<span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
<span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
<span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
<span class="p">})</span>
<span class="p">]</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p><code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
        <span class="c1">// mode: &#39;development&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn start`
</span><span class="c1"></span>        <span class="c1">// css-loader
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.prod.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span><span class="nx">base</span><span class="p">.</span><span class="nx">plugins</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">ignoreOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// ...base.module.rules,
</span><span class="c1"></span>    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
        <span class="c1">// mode: &#39;production&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn build`
</span><span class="c1"></span>        <span class="c1">// MiniCssExtractPlugin
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="s1">&#39;css-loader&#39;</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>yarn build</code> production mode</li>
<li><code>yarn start</code> development mode</li>
</ul>

<h4 id="用工具插件-webpack-merge-实现自动切换">用工具插件<code>webpack-merge</code>实现自动切换</h4>

<ul>
<li><a href="https://www.cnblogs.com/wangtong111/p/11197313.html">survivejs/webpack-merge</a></li>
<li><a href="https://note.youdao.com/">webpack-merge 配置分离</a></li>
<li><a href="https://www.npmjs.com/package/webpack-merge">npm webpack-merge</a></li>
</ul>

<h4 id="配置分离-生产环境构建">配置分离 生产环境构建</h4>

<ul>
<li><a href="https://www.webpackjs.com/guides/production/">为每个环境编写彼此独立的 webpack 配置</a></li>
<li><a href="https://webpack.docschina.org/guides/production/">生产环境 webpack v5.0 beta</a></li>
<li><a href="https://blog.csdn.net/sd19871122/article/details/86498939">使用webpack-merge区分生成环境和开发环境</a></li>
<li><a href="https://www.cnblogs.com/cczlovexw/p/11765571.html">webpack-merge使用说明</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33565293">浅析webpack-merge源码</a></li>
<li><a href="https://juejin.im/post/5ea2a64a51882573a509c426">霖呆呆的webpack之路-构建方式篇</a></li>
<li><a href="https://juejin.im/post/5e6518946fb9a07c820fbaaf">带你深度解锁Webpack系列(进阶篇)</a></li>
<li><a href="https://www.jianshu.com/p/fe06ea267d3e">webpack常用插件汇总</a></li>
</ul>

<blockquote>
<p>环境变量</p>
</blockquote>

<ul>
<li><a href="https://www.webpackjs.com/guides/environment-variables/">使用环境变量</a></li>
<li><a href="https://juejin.im/post/5d6f6514f265da03da24b391">webpack4多环境变量问题</a></li>
<li><a href="https://www.shangmayuan.com/a/48ece2b43a594e369c0a7081.html">Webpack配置环境切换</a></li>
<li><a href="https://juejin.im/post/5b319c5e518825749d2d60be">Webpack下多环境配置的思路</a></li>
<li><a href="https://blog.csdn.net/mate_ge/article/details/81183952">Webpack配置环境切换</a></li>
<li><a href="https://segmentfault.com/a/1190000010507403/">webpack开发与生产环境配置</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/147720556/">通过Webpack全局配置开发环境和多种生产环境的请求地址</a></li>
<li><a href="https://www.cnblogs.com/sincw/p/9126104.html">Webpack + ES6 最新环境搭建与配置</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/29161762">为什么我们要做三份 Webpack 配置文件</a></li>
<li><a href="https://www.cnblogs.com/weifeng123/p/9185962.html">webpack实现开发、测试、生产等环境的打包切换</a></li>
<li><a href="https://blog.csdn.net/qq_20097569/article/details/82492819?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase">配置webpack中dev.env.js、prod.env.js，解决不同命令下项目启动和打包到指定的环境</a></li>
<li><a href="https://www.jb51.net/article/142695.htm">浅谈Webpack下多环境配置的思路</a></li>
<li><a href="https://blog.csdn.net/weixin_41900808/article/details/88756511">Webpack：环境变量的使用方法</a></li>
<li><a href="https://blog.csdn.net/hong10086/article/details/85230458/">webpack开发环境和生产环境切换原理</a></li>
<li><a href="http://www.liuchungui.com/2016/12/18/webpack%E5%BC%80%E5%8F%91%E5%92%8C%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%BB%BA%E7%AB%8B/">webpack开发和生产环境的建立</a></li>
</ul>

<hr />

<blockquote>
<p><code>webpack</code> 实现了</p>
</blockquote>

<ul>
<li>内置<code>babel-loader</code>转译n个<code>JS</code>文件为1个<code>JS</code>文件</li>
<li>用<code>JS</code><code>import CSS</code>，<code>style/css-loader</code>就转译为<code>style</code>标签</li>
<li>用<code>MiniCssExtractPlugin</code>转译n个<code>CSS</code>文件为1个<code>CSS</code>文件</li>
</ul>

<hr />

<h4 id="loader-vs-plugin">loader vs plugin</h4>

<blockquote>
<p><code>loader</code> 和 <code>plugin</code>的区别是</p>
</blockquote>

<ul>
<li>翻译一下，<code>loader</code>是加载器，<code>plugin</code>是插件</li>
<li><code>loader</code>作用加载文件</li>
<li><code>plugin</code>作用扩展/加强功能</li>
</ul>

<blockquote>
<p>举例</p>
</blockquote>

<ul>
<li><code>babel-loader</code>用来加载JS，转移为低版本的JS</li>
<li><code>style-loader</code>和<code>css-loader</code>用来加载CSS，变为页面中的标签</li>
<li>new 一个 <code>HtmlWebpackPlugin</code> <code>MiniCssExtractPlugin</code></li>
<li>plugins 需要安装后require() loader直接安装依赖使用</li>
</ul>

<blockquote>
<p>搜英文关键词，选择性地CRM</p>
</blockquote>

<hr />

<h3 id="a-id-1-href-2-4-5-目标五-用-webpack-引入-scss-a"><a id="_$1_" href="#_$2_">4.5 目标五：用<code>webpack</code>引入<code>SCSS</code> § </a></h3>

<blockquote>
<p>将<code>x.css</code>改名为<code>x.scss</code>，在<code>x.js</code>里改为<code>import css from './x.scss'</code></p>
</blockquote>

<ul>
<li><a href="http://xmasuhai.xyz/post/scss/%E6%9B%B4%E5%A5%BD%E7%9A%84css-01scss%E5%85%A5%E9%97%A8/">链接到 【SCSS非全解】</a></li>
<li><a href="https://www.webpackjs.com/loaders/sass-loader/">sass-loader v4.44.0</a></li>
<li><a href="https://webpack.js.org/loaders/sass-loader/">sass-loader v5.0 beta</a></li>
<li><a href="https://sass-lang.com/dart-sass">Dart Sass</a></li>
<li><a href="https://github.com/sass/dart-sass">sass/dart-sass github</a></li>
</ul>

<blockquote>
<p>注意不要覆盖配置中的<code>module</code></p>
</blockquote>

<ul>
<li>在<code>rules: []</code>里加一句<code>...base.module.rules,</code></li>
</ul>

<blockquote>
<p><code>webpack.config.base.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">let</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
    <span class="p">})</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/i</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">injectType</span><span class="o">:</span> <span class="s1">&#39;singletonStyleTag&#39;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
          <span class="c1">// Compiles Scss to CSS
</span><span class="c1"></span>          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;sass-loader&#39;</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="c1">// Prefer `dart-sass`
</span><span class="c1"></span>              <span class="nx">implementation</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dart-sass&#39;</span><span class="p">),</span>
              <span class="nx">sassOptions</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">fiber</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fibers&#39;</span><span class="p">)</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">...</span><span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
        <span class="c1">// mode: &#39;development&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn start`
</span><span class="c1"></span>        <span class="c1">// css-loader
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">use</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">use</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.prod.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span><span class="nx">base</span><span class="p">.</span><span class="nx">plugins</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">ignoreOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// ...base.module.rules,
</span><span class="c1"></span>    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/i</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">use</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
          <span class="c1">// Compiles Scss to CSS
</span><span class="c1"></span>          <span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">use</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
        <span class="c1">// mode: &#39;production&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn build`
</span><span class="c1"></span>        <span class="c1">// MiniCssExtractPlugin
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
              <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="s1">&#39;css-loader&#39;</span>
        <span class="p">]</span>
      <span class="p">},</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>x.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="s1">&#39;./x.scss&#39;</span>

<span class="c1">// import css from &#39;./x.scss&#39;
</span><span class="c1">// console.dir(css)
</span><span class="c1">// console.log(css.toString())
</span><span class="c1"></span>
<span class="cm">/*
</span><span class="cm">export default function printMe() {
</span><span class="cm">  console.log(&#39;I get called from print.js!&#39;);
</span><span class="cm">    }
</span><span class="cm">*/</span>
<span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>要点</p>
</blockquote>

<ul>
<li><a href="https://webpack.js.org/loaders/sass-loader/">webpack sass-loader</a></li>
<li><code>node-sass</code>已经过时</li>

<li><p>代替使用<code>dart-sass</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn add sass-loader sass dart-sass --dev</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<h3 id="a-id-1-href-2-4-6-目标六-用-webpack-引入-postcss-less-和-stylus-a"><a id="_$1_" href="#_$2_">4.6. 目标六：用<code>webpack</code>引入<code>PostCSS</code>、 <code>LESS</code> 和 <code>Stylus</code> § </a></h3>

<blockquote>
<p>要点</p>
</blockquote>

<ul>
<li><code>SCSS</code>、 <code>LESS</code> 和 <code>Stylus</code>使用原理完全没区别</li>
<li>改个后缀，兼容CSS语法的部分通用</li>
<li><code>Stylus</code>兼容<code>SASS</code>和<code>LESS</code></li>
<li><code>PostCSS</code></li>
<li><a href="https://www.webpackjs.com/loaders/less-loader/">webpack less-loader v4.44.0</a></li>
<li><a href="https://webpack.js.org/loaders/less-loader/">webpack less-loader v5.0 beta</a></li>
<li><a href="https://webpack.docschina.org/loaders/less-loader/#root">webpack less-loader v5.0 beta zh</a></li>
<li><a href="https://github.com/shama/stylus-loader">webpack stylus</a></li>

<li><p><a href="https://webpack.docschina.org/loaders/postcss-loader/">webpack postcss-loader</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn add less-loader --dev <span class="o">&amp;&amp;</span>
yarn add stylus-loader stylus --dev <span class="o">&amp;&amp;</span>
yarn add postcss-loader --dev <span class="o">&amp;&amp;</span>
yarn add autoprefixer --dev <span class="o">&amp;&amp;</span>
yarn add postcss-cssnext --dev</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p><code>x.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="s1">&#39;./x.scss&#39;</span>
<span class="kr">import</span> <span class="s1">&#39;./y.less&#39;</span>
<span class="kr">import</span> <span class="s1">&#39;./z.styl&#39;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="s1">&#39;xxx&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">x</span> <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.base.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">let</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">styleLoader</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">injectType</span><span class="o">:</span> <span class="s1">&#39;singletonStyleTag&#39;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kr">const</span> <span class="nx">scssLoader</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;sass-loader&#39;</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// Prefer `dart-sass`
</span><span class="c1"></span>    <span class="nx">implementation</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dart-sass&#39;</span><span class="p">),</span>
    <span class="nx">sassOptions</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">fiber</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fibers&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">),</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;index.[contenthash].js&#39;</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;webpack&#39;</span><span class="p">,</span>
    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;src/assets/index.html&#39;</span>
    <span class="p">})</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
        <span class="c1">// mode: &#39;development&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn start`
</span><span class="c1"></span>        <span class="c1">// css-loader
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="nx">styleLoader</span><span class="p">,</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/i</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="nx">styleLoader</span><span class="p">,</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
          <span class="c1">// Compiles Scss to CSS
</span><span class="c1"></span>          <span class="nx">scssLoader</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="c1">// rules[1]
</span><span class="c1"></span>      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.less$/i</span><span class="p">,</span>
        <span class="nx">loader</span><span class="o">:</span> <span class="p">[</span><span class="nx">styleLoader</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;less-loader&#39;</span><span class="p">]</span> <span class="c1">// compiles Less to CSS
</span><span class="c1"></span>      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">...</span><span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>webpack.config.prod.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.config.base.js&#39;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">cssLoaderPlugin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">base</span><span class="p">,</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">...</span><span class="nx">base</span><span class="p">.</span><span class="nx">plugins</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
      <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;[id].[contenthash].css&#39;</span><span class="p">,</span>
      <span class="nx">ignoreOrder</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">}),</span>
  <span class="p">],</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="c1">// ...base.module.rules,
</span><span class="c1"></span>      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
        <span class="c1">// mode: &#39;production&#39;
</span><span class="c1"></span>        <span class="c1">// `yarn build`
</span><span class="c1"></span>        <span class="c1">// MiniCssExtractPlugin
</span><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="nx">cssLoaderPlugin</span><span class="p">,</span>
          <span class="s1">&#39;css-loader&#39;</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.scss$/i</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="nx">cssLoaderPlugin</span><span class="p">,</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
          <span class="c1">// Compiles Scss to CSS
</span><span class="c1"></span>          <span class="nx">base</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">use</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.less$/i</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
          <span class="c1">// Creates `style` nodes from JS strings
</span><span class="c1"></span>          <span class="nx">cssLoaderPlugin</span><span class="p">,</span>
          <span class="c1">// Translates CSS into CommonJS
</span><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
          <span class="c1">// Compiles Less to CSS
</span><span class="c1"></span>          <span class="s1">&#39;less-loader&#39;</span><span class="p">,</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>
<h3 id="a-id-1-href-2-4-7-目标七-用-webpack-引入图片-a"><a id="_$1_" href="#_$2_">4.7. 目标七：用<code>webpack</code>引入图片 § </a></h3>

<blockquote>
<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">x</span> <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
<span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">div</span><span class="p">)</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`
</span><span class="sb">  &lt;img src=&#34;./assets/BlkHo.gif&#34;&gt;
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>报错 <code>Cannot set property 'innerHTML of null'</code></p>
</blockquote>

<ul>
<li><code>.innerHTNL</code>前面的<code>div</code>是个<code>null</code></li>
<li>未取到<code>div</code>，<code>console.log(div)</code></li>
<li>注意<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>中的<code>id</code>没有<code>#</code></li>
</ul>

<blockquote>
<p><code>src/assets/index.html</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-HTML" data-lang="HTML">...
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
...</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>yarn start</code>的页面中为请求到图片</p>
</blockquote>

<ul>
<li>因为<code>webpack-dev-server</code>加载的路径并不是当前目录，而是<code>dist</code>目录</li>
</ul>

<blockquote>
<p>怎样加载图片路径</p>

<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">x</span> <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
<span class="kr">import</span> <span class="nx">gif</span> <span class="nx">from</span> <span class="s1">&#39;./assets/BlkHo.gif&#39;</span>
<span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">)</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`
</span><span class="sb">  &lt;img src=&#34;./assets/BlkHo.gif&#34;&gt;
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>import</code>的时什么将由<code>loader</code>决定</li>
<li>搜<code>webpack image-loader</code>，由许多可供使用的</li>
<li>使用 <code>file-loader</code> 引入本地图片</li>
<li>处理顺序是从数组的走后一项开始的</li>
<li><code>image-webpack-loader</code> 插件放在处理顺序的最后，先用其他（<code>url-loader</code>）引入加载网络图片</li>
<li><a href="https://webpack.js.org/guides/asset-management/">webpack Asset Management</a></li>
<li><a href="https://webpack.js.org/loaders/file-loader/">webpack file-loader</a></li>
<li><a href="https://github.com/webpack-contrib/file-loader">github file-loader</a></li>
</ul>

<blockquote>
<p><code>Error: Can't resolve 'file-loader'</code></p>
</blockquote>

<ul>
<li>手动安装<code>file-loader</code></li>
<li><code>yarn add file-loader --dev</code></li>
</ul>

<blockquote>
<p><code>webpack.config.base.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="p">...,</span>
<span class="p">{</span>
    <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|svg|je?pg|gif)$/i</span><span class="p">,</span>
    <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
      <span class="s1">&#39;file-loader&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">},</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p><code>index.js</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span>  <span class="nx">from</span> <span class="s1">&#39;./x.js&#39;</span>
<span class="kr">import</span> <span class="nx">gif</span> <span class="nx">from</span> <span class="s1">&#39;./assets/BlkHo.gif&#39;</span>
<span class="kr">import</span> <span class="nx">png</span> <span class="nx">from</span> <span class="s1">&#39;./assets/1.png&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">gif</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">png</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">div</span><span class="p">)</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`
</span><span class="sb">  &lt;img src=&#34;</span><span class="si">${</span><span class="nx">gif</span><span class="si">}</span><span class="sb">&#34;&gt;
</span><span class="sb">  &lt;img src=&#34;</span><span class="si">${</span><span class="nx">png</span><span class="si">}</span><span class="sb">&#34;&gt;
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>自动添加哈希</li>
<li>图片放到本地的<code>assets</code></li>
<li>使用<code>import</code>得到路径的引用</li>
<li>将引用放到<code>src</code></li>
<li><code>file-loader</code>的作用就是把文件变成文件路径</li>
</ul>

<hr />

<h3 id="a-id-1-href-2-4-8-目标八-用-webpack-的-import-实现懒加载-资源异步加载-a"><a id="_$1_" href="#_$2_">4.8. 目标八：用<code>webpack</code>的 <code>import()</code> 实现懒加载 资源异步加载 § </a></h3>

<blockquote>
<p>当模块数量过多、资源体积过大时，将暂时用不到的模块延迟加载</p>

<p>使得页面初次渲染时用户下载的资源尽可能小</p>

<p>后续的模块等到恰当的时机再去触发加载</p>
</blockquote>

<ul>
<li>提升用户体验</li>
<li>按需分步加载</li>
<li><code>import</code> 函数异步加载。返回<code>promise</code>对象实例</li>
<li>不推荐使用<code>require.ensure</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import">import MDN</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import#动态import">动态import</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export">export MDN</a></li>

<li><p><a href="https://webpack.docschina.org/guides/lazy-loading/">懒加载</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">)</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="s1">&#39;懒加载&#39;</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;点击了 button&#34;</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">lazyPromise</span> <span class="o">=</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./lazy.js&#39;</span><span class="p">)</span>
<span class="c1">// 加载时异步的 拿到的是一个 Promise对象实例
</span><span class="c1"></span><span class="nx">lazyPromise</span><span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">module</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="k">default</span>
<span class="nx">fn</span><span class="p">()</span>
<span class="p">},</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;模块加载错误&#34;</span><span class="p">)</span>
<span class="p">})</span>
<span class="p">}</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<hr />

<h3 id="a-id-1-href-2-4-9-目标九-部署到-github-pages-a"><a id="_$1_" href="#_$2_">4.9. 目标九：部署到<code>GitHub Pages</code> § </a></h3>

<blockquote>
<p>本地打包</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yarn build</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>本地预览</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> dist
hs -c-1</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>上传代码</p>
</blockquote>

<h3 id="webpack-一键部署到-github">webpack 一键部署到 github</h3>

<blockquote>
<p>原来的部署过程</p>
</blockquote>

<p>1.将“站点”部署 上传 dist 目录</p>

<ul>
<li>githubPages</li>
</ul>

<p>2.使用git分支 上传到 gh-pages 分支</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">rm -f dist
git add . <span class="o">&amp;&amp;</span> git commit -am <span class="s2">&#34;remove dist&#34;</span> <span class="o">&amp;&amp;</span> git push
yarn build

git branch gh-pages
git checkout gh-pages</code></pre></td></tr></table>
</div>
</div>
<ul>
<li><p>手滑把<code>.gitignore</code>删除了，重置，撤回上一步</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git reset --hard HEAD</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>只保留 <code>dist</code> <code>node_modules</code> <code>.gitignore</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">git add . <span class="o">&amp;&amp;</span> git commit -m <span class="s2">&#34;remove source code&#34;</span> <span class="o">&amp;&amp;</span> git push</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>拷出 dist 的所有内容</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">mv</span> <span class="nx">dist</span><span class="o">/*</span> <span class="p">.</span><span class="o">/</span>
<span class="nx">rm</span> <span class="o">-</span><span class="nx">rf</span> <span class="nx">dist</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>上传网站根目录</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">git</span> <span class="nx">add</span> <span class="p">.</span> <span class="o">&amp;&amp;</span> <span class="nx">git</span> <span class="nx">commit</span> <span class="o">-</span><span class="nx">m</span> <span class="s2">&#34;remove create website&#34;</span> <span class="o">&amp;&amp;</span> <span class="nx">git</span> <span class="nx">push</span> <span class="o">--</span><span class="nx">set</span><span class="o">-</span><span class="nx">upstream</span> <span class="nx">origin</span> <span class="nx">gh</span><span class="o">-</span><span class="nx">pages</span>
</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>一个分支用来写代码 一个分支用来预览</p>
</blockquote>

<ul>
<li>loading 顺时针转 请求 逆时针转 下载</li>
<li>git stash 将修改过的文件暂存</li>
<li>git checkout master</li>
<li>git stash pop</li>
</ul>

<blockquote>
<p>用脚本一键部署 <code>deploy.sh</code></p>
</blockquote>

<ul>
<li><p>回到上一个分支 <code>git checkout -</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">yarn build <span class="o">&amp;&amp;</span>
git checkout gh-pages <span class="o">&amp;&amp;</span>
rm -rf src *.sh *.js *.json yarn.lock *.css *.scss *.less *.styl *.gif *.png  <span class="o">&amp;&amp;</span>
mv dist/* ./ <span class="o">&amp;&amp;</span>
rm -rf dist<span class="p">;</span>
git add . <span class="o">&amp;&amp;</span>
git commit -m <span class="s2">&#34;preview gh-pages&#34;</span> <span class="o">&amp;&amp;</span>
git push
git checkout -</code></pre></td></tr></table>
</div>
</div></li>
</ul>

<blockquote>
<p>以后如果改了代码 需要更新预览，先提交master 在一键脚本</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sh ./deploy.sh</code></pre></td></tr></table>
</div>
</div>
<h3 id="webpack-一键部署到-gitee">webpack 一键部署到 gitee</h3>

<ul>
<li>登录网站 新建仓库</li>
<li><strong>点击SSH</strong></li>
<li>在<code>git remote add origin git@gitee.com:xmasuhai/webpack-demo-1.git</code>中修改<code>origin</code>为<code>gitee</code></li>
<li><code>git remote add gitee git@gitee.com:xmasuhai/webpack-demo-1.git</code></li>
<li><code>git push -u gitee master</code></li>
<li><code>git remote -v</code>查看仓库</li>
</ul>

<blockquote>
<p>再次新建一个脚本<code>deploy_cn.sh</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">yarn build <span class="o">&amp;&amp;</span>
git checkout gh-pages <span class="o">&amp;&amp;</span>
rm -rf src *.sh *.js *.json yarn.lock *.css *.scss *.less *.styl *.gif *.png  <span class="o">&amp;&amp;</span>
mv dist/* ./ <span class="o">&amp;&amp;</span>
rm -rf dist<span class="p">;</span>
git add . <span class="o">&amp;&amp;</span>
git commit -m <span class="s2">&#34;preview gh-pages&#34;</span> <span class="o">&amp;&amp;</span>
git push gitee gh-pages:master <span class="o">&amp;&amp;</span>
git checkout -</code></pre></td></tr></table>
</div>
</div>
<h3 id="git-github-gitee-gitlab">git github gitee gitlab</h3>

<hr />

<h3 id="a-id-1-href-2-4-10-目标十-自己写一个-loader-a"><a id="_$1_" href="#_$2_">4.10. 目标十：自己写一个<code>loader</code> § </a></h3>

<h3 id="a-id-1-href-2-4-11-目标十一-自己写一个-plugin-a"><a id="_$1_" href="#_$2_">4.11. 目标十一：自己写一个<code>plugin</code> § </a></h3>

<hr />

<h3 id="a-id-1-href-2-4-12-目标十二-用-webpack-实现模块热替换-hmr-a"><a id="_$1_" href="#_$2_">4.12. 目标十二：用<code>webpack</code>实现模块热替换<code>HMR</code> § </a></h3>

<ol>
<li>目标十二：用<code>webpack</code>实现模块热替换<code>HMR</code></li>
<li>目标十三：用<code>webpack</code>引入<code>TypeScript</code></li>
<li>目标十四：使用<code>Flow</code>检查器</li>
<li>目标十五：用<code>webpack</code>引入各大框架<code>Vuw</code> <code>React</code> <code>Electron</code></li>
<li>目标十六：用<code>webpack</code>实现 <code>i118n</code></li>
</ol>

<hr />

<h2 id="a-id-1-href-2-5-从webpack看前端工具的历史-a"><a id="_$1_" href="#_$2_">5. 从webpack看前端工具的历史 § </a></h2>

<ul>
<li>链接到 理性看待node</li>
</ul>

<h3 id="a-id-1-href-2-9-死掉的前端工具-a"><a id="_$1_" href="#_$2_">9. 死掉的前端工具 § </a></h3>

<ul>
<li>Grunt 太慢，几死</li>
<li>Gulp 速度ok 但没 webpack 繁荣</li>
<li>Require.js 几死</li>
<li>Sea.js 已死</li>
<li>Browserify 已死</li>
</ul>

<h3 id="a-id-1-href-2-9-和webpack竞争的工具-a"><a id="_$1_" href="#_$2_">9. 和webpack竞争的工具 § </a></h3>

<blockquote>
<p>rollup</p>
</blockquote>

<ul>
<li>比 webpack 的打包体积更小</li>
<li>生态不丰富</li>
<li>适合库的开发</li>
</ul>

<blockquote>
<p>parcel</p>
</blockquote>

<ul>
<li>比 webpack 配置简单</li>
<li>公司要求负载的配置，变态的需求</li>
<li>适合demo学习</li>
</ul>

<blockquote>
<p>snowpack</p>
</blockquote>

<h3 id="a-id-1-href-2-9-基于webpack的工具-a"><a id="_$1_" href="#_$2_">9. 基于webpack的工具 § </a></h3>

<blockquote>
<p><code>@vue/cli</code></p>
</blockquote>

<ul>
<li>快速创建<code>vue</code>项目</li>
<li>基本不用配置</li>
<li>特殊配置看文档</li>
</ul>

<blockquote>
<p><code>create-react-app</code></p>
</blockquote>

<ul>
<li>快速创建<code>react</code>项目</li>
<li>基本不用配置</li>
<li>特殊配置看文档</li>
</ul>

<blockquote>
<p><code>@angular/cli</code></p>
</blockquote>

<ul>
<li>快速创建<code>angular</code>项目</li>
<li>基本不用配置</li>
<li>特殊配置看文档</li>
</ul>

<hr />

<h2 id="a-id-1-href-2-6-总结-a"><a id="_$1_" href="#_$2_">6. 总结 § </a></h2>

<blockquote>
<p>术语总结
自我驱动学习法</p>
</blockquote>

<ul>
<li>定一个小目标</li>
<li>尽一切实现</li>
<li>再定一个</li>
</ul>

<blockquote>
<p>要点</p>
</blockquote>

<ul>
<li>不要定太难完成的目标</li>
<li>不要等别人给你定目标</li>
</ul>

<hr />

<h2 id="a-id-1-href-2-7-问答-a"><a id="_$1_" href="#_$2_">7. 问答 § </a></h2>

<blockquote>
<p>问答1：要将<code>webpack</code>学到什么程度</p>
</blockquote>

<ul>
<li>给一个需求就能搞定的程度</li>
<li>CRM现有解决方案</li>
</ul>

<blockquote>
<p>问答2：面试问<code>webpack</code>怎么答</p>
</blockquote>

<ul>
<li>相关博客</li>
<li>几个手写<code>webpack config</code>的项目</li>
<li>使用<code>@vue/cli</code>、<code>create-react-app</code></li>
</ul>

<h2 id="a-id-1-href-2-8-学英语-a"><a id="_$1_" href="#_$2_">8. 学英语 § </a></h2>

<ul>
<li>调手机操作系统语言为英语</li>
<li>订阅<code>Hacker News</code>、<code>JS Daily</code></li>
<li>优先看英文文档</li>
</ul>

<blockquote>
<p>工具</p>
</blockquote>

<ul>
<li>词典</li>
<li>抽离 <code>extract</code></li>
</ul>

<hr />

<!-- Article End -->

<hr />

<!-- test -->

<div style="text-align:center;">·未完待续·</div>

<!-- ok -->

<hr />

<h4 id="参考文章">参考文章</h4>

<ul>
<li><a href="https://static.xiedaimala.com/xdml/file/3ac7c224-c23d-491f-84b5-4fabfbeab9b8/2019-12-3-17-21-57.pdf">Webpack.pdf</a></li>
<li><a href="https://github.com/FrankFang/webpack-demo-2">代码</a></li>
<li><a href="https://github.com/FrankFang/webpack-demos">FrankFang/webpack-demos</a></li>
<li><a href="https://github.com/FrankFang/webpack-demo-1">FrankFang/webpack-demos-1</a></li>
<li><a href="https://github.com/FrankFang/webpack-demo-2">FrankFang/webpack-demos-2</a></li>
<li><a href="https://github.com/FrankFang/webpack-demo-3">FrankFang/webpack-demos-3</a></li>
<li><a href="https://www.shangmayuan.com/a/e370fcc8de4040969b19e2e7.html">webpack务虚扫盲</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/57722935">本科毕业设计的前端技术总结（三）：这可能是最详尽的Webpack基础总结</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/109527475">webpack多页面打包实践</a></li>
</ul>

<h4 id="相关文章">相关文章</h4>

<ul>
<li>无</li>
</ul>

<hr />

<ul>
<li>作者： Joel</li>
<li>文章链接：</li>
<li><a href="http://xmasuhai.xyz/posts/版权声明链接/">版权声明</a></li>
<li>非自由转载-非商用-非衍生-保持署名</li>
<li><a style='color:#DB2D5D;' href='https://xiedaimala.com/bbs/users/8c266e6f-55a2-4348-a180-17cb8cdb2c46#/?page=1' target='_blank' rel='noreferrer noopener'>河</a>
<a style='color:#006CFF;' href='https://juejin.im/user/59abfad26fb9a0248f4aa221' target='_blank' rel='noreferrer noopener'>掘</a>
<a style='color:#009A61;' href='https://segmentfault.com/u/joel_59b17eb9d2155' target='_blank' rel='noreferrer noopener'>思</a>
<a style='color:#0084FF;' href='https://www.zhihu.com/people/xue-shou-41/posts' target='_blank' rel='noreferrer noopener'>知</a>
<a style='color:#EA6F5A;' href='https://www.jianshu.com/u/079916729823' target='_blank' rel='noreferrer noopener'>简</a></li>
</ul>

<hr />

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Joel Xu</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2020-08-02
      
        
        
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://xmasuhai.xyz/tags/webpack/">webpack</a>
          <a href="http://xmasuhai.xyz/tags/crm/">CRM</a>
          <a href="http://xmasuhai.xyz/tags/yarn/">Yarn</a>
          <a href="http://xmasuhai.xyz/tags/parcel/">Parcel</a>
          <a href="http://xmasuhai.xyz/tags/snowpack/">Snowpack</a>
          <a href="http://xmasuhai.xyz/tags/javascript/">JavaScript</a>
          <a href="http://xmasuhai.xyz/tags/frontend/">FrontEnd</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/vue/vue%E8%B5%B7%E6%89%8B%E5%BC%8F/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">Vue2.6起手式&amp;Vue3.0对比</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/mvc/mvc-%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/">
            <span class="next-text nav-default">MVC 理论与实践</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  
  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:xmasuhai@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/xmasuhai" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/people/xue-shou-41/posts" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>


<a href="http://xmasuhai.xyz/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2019 -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Joel Xu
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
